{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6","webpack:///TweenTime.Editor.min.js","webpack:///webpack/bootstrap 77c2348108df7892830a?4183","webpack:///./Editor.js","webpack:///./core/Utils.js?8d2f","webpack:///external {\"root\":\"signals\",\"commonjs\":\"./signals\",\"amd\":\"signals\"}?71f5","webpack:///external {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}?55d0","webpack:///./graph/Timeline.js","webpack:///./graph/Header.js","webpack:///external \"d3\"","webpack:///./graph/TimeIndicator.js","webpack:///./graph/Items.js","webpack:///./graph/KeysPreview.js","webpack:///./graph/Properties.js","webpack:///./graph/Keys.js","webpack:///./graph/Errors.js","webpack:///./graph/Selection.js","webpack:///./editor/PropertiesEditor.js","webpack:///external {\"root\":\"$\",\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\"}","webpack:///./editor/Property.js","webpack:///./editor/PropertyNumber.js","webpack:///./editor/PropertyBase.js","webpack:///external {\"root\":\"DraggableNumber\",\"commonjs\":\"DraggableNumber\",\"commonjs2\":\"DraggableNumber\",\"amd\":\"DraggableNumber\"}","webpack:///./templates/propertyNumber.tpl.html","webpack:////Users/poly/ws/TweenTime/~/hogan.js/lib/hogan.js","webpack:////Users/poly/ws/TweenTime/~/hogan.js/lib/compiler.js","webpack:////Users/poly/ws/TweenTime/~/hogan.js/lib/template.js","webpack:///./editor/PropertyColor.js","webpack:///external \"spectrum\"","webpack:///./templates/propertyColor.tpl.html","webpack:///./editor/PropertyTween.js","webpack:///./templates/propertyTween.tpl.html","webpack:///./templates/propertiesEditor.tpl.html","webpack:///./editor/EditorMenu.js","webpack:///./bower_components/FileSaver/FileSaver.js","webpack:///(webpack)/buildin/module.js","webpack:///(webpack)/buildin/amd-define.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///./editor/EditorControls.js","webpack:///./editor/SelectionManager.js","webpack:///./editor/Exporter.js","webpack:///./editor/UndoManager.js","webpack:///./templates/timeline.tpl.html"],"names":["root","factory","exports","module","require","undefined","define","amd","this","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_6__","__WEBPACK_EXTERNAL_MODULE_9__","__WEBPACK_EXTERNAL_MODULE_18__","__WEBPACK_EXTERNAL_MODULE_22__","__WEBPACK_EXTERNAL_MODULE_28__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","_graphTimeline","_graphTimeline2","_editorPropertiesEditor","_editorPropertiesEditor2","_editorEditorMenu","_editorEditorMenu2","_editorEditorControls","_editorEditorControls2","_editorSelectionManager","_editorSelectionManager2","_editorExporter","_editorExporter2","_editorUndoManager","_editorUndoManager2","tpl_timeline","Signals","Editor","tweenTime","_this","options","arguments","timer","lastTime","onKeyAdded","bind","onKeyRemoved","el","$","$timeline","append","addClass","selectionManager","exporter","timeline","propertiesEditor","keyAdded","add","keyRemoved","menu","onMenuCreated","find","controls","undoManager","onSelect","Signal","self","selection","addToSelection","dispatch","window","editorEnabled","dispatchEvent","Event","requestAnimationFrame","update","value","item","select","getSelection","addState","render","removeItem","triggerSelect","time","time_changed","force","_isDirty","_this2","Utils","d","hours","Math","floor","minutes","seconds","output","data","objectId","property_name","tolerance","timer_time","getCurrentTime","abs","start","end","j","properties","prop","keys","name","k","prevKey","compare","a","b","sort","s4","random","toString","substring","_coreUtils","_coreUtils2","_Header","_Header2","_TimeIndicator","_TimeIndicator2","_Items","_Items2","_KeysPreview","_KeysPreview2","_Properties","_Properties2","_Keys","_Keys2","_Errors","_Errors2","_Selection","_Selection2","d3","Timeline","editor","currentTime","onUpdate","initialDomain","domainStart","domainEnd","totalDuration","margin","top","right","bottom","left","width","innerWidth","height","lineHeight","label_position_x","x","scale","domain","range","xAxis","svg","axis","orient","tickSize","tickFormat","formatMinutes","get","attr","svgContainer","svgContainerTime","linesContainer","header","timeIndicator","items","keysPreview","newKey","keyContainer","selectNewKey","errors","onKeyUpdated","xAxisGrid","ticks","dy","xGrid","xAxisElement","onBrush","extent","onresize","INNER_WIDTH","selectAll","resize","domainLength","margin_ms","setDomain","bar","max","updateHeight","Header","xDisplayed","createBrushHandle","createTimeHandle","durationChanged","onDurationChanged","ms","new_domain","min","brush","adaptDomainToDuration","extent0","getTime","on","gBrush","timeSelection","dragTimeMove","event","sourceEvent","stopPropagation","event_x","clientX","dx","invert","timeMatch","shiftKey","getClosestTime","seek","dragTime","behavior","drag","origin","enter","mouse","timeGrp","TimeIndicator","container","_","Items","selectBar","datum","dragmove","diff","prop_key","dragmoveLeft","dragmoveRight","dragLeft","t","y","dragRight","bar_border","barEnter","barContainerRight","guid","collapsed","numProperties","visibleProperties","filter","barWithStartAndEnd","text","label","exit","remove","KeysPreview","propVal","propKey","setItemStyle","parentNode","bar_data","keyValue","keyKey","parseInt","Properties","subGrp","sub_height","lineObject","lineValue","def","getPreviousKey","val","_line","_property","push","sortKeys","Keys","classed","_dom","propertyObject","propertyData","lineData","key_data","currentDomainStart","old_time","selection_first_time","selection_last_time","isEqual","time_offset","updateKeyItem","property","key_scale","is_first","altKey","propValue","_id","selectKey","type","dragend","key_grp","cls","ease","split","grp_linear","grp_in","grp_out","grp_inout","Errors","propertiesWithError","insert","errorsValue","errorTime","Selection","onMouseUp","init","css","user-select","class","reset","s","empty","move","key_width","timeStart","timeEnd","containerBounding","getBoundingClientRect","each","state_data","item_data","itemBounding","_editorProperty","_editorProperty2","tpl_propertiesEditor","PropertiesEditor","addProperty","$el","$container","parentElement","keypress","e","forEach","Array","removeClass","_PropertyNumber","_PropertyNumber2","_PropertyColor","_PropertyColor2","_PropertyTween","_PropertyTween2","Property","numberProp","tweenProp","key_val","getContainer","$tween_container","instance_prop","$grp_container","getGroupContainer","addNumberProperty","addTweenProperty","$existing","$grp","grp_class","group","group_name","replace","toLowerCase","createGroupContainer","dispose","propClass","tween","click","preventDefault","index","indexOf","splice","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_get","_x2","_x3","_x4","_again","object","receiver","desc","parent","getter","Function","getOwnPropertyDescriptor","getPrototypeOf","_PropertyBase2","_PropertyBase3","DraggableNumber","tpl_property","PropertyNumber","_PropertyBase","instance_property","onInputChange","$input","parseFloat","getCurrentVal","view","onKeyClick","onChangeEnd","draggableOptions","changeCallback","endCallback","draggable","change","destroy","set","toFixed","PropertyBase","$key","currentValue","addKey","prop_name","values","current_value","getInputVal","current_key","getCurrentKey","toggleClass","H","T","Template","code","v","f","fl","partials","subs","apply","Hogan","template","cleanTripleStache","token","n","substr","trim","tagChange","tag","charAt","l","buildTree","tokens","kind","stack","customTags","instructions","opener","tail","shift","allowedInSuper","Error","tags","isOpener","nodes","pop","isCloser","last","o","close","open","stringifySubstitutions","esc","join","stringifyPartials","codeObj","rSlash","rQuot","rNewline","rCr","rLineSep","rParagraphSep","chooseMethod","createPartial","node","context","prefix","sym","serialNo","indent","tripleStache","write","rIsWhitespace","#","^","<","/","!",">","=","_v","{","&","_t","scan","delimiters","addBuf","buf","String","lineIsWhitespace","isAllWhitespace","lineStart","match","filterLine","haveSeenTag","noNewLine","next","seenTag","changeDelimiters","ctag","closeIndex","otag","len","IN_TEXT","IN_TAG_TYPE","IN_TAG","state","tagType","\n","stringify","wrapMain","generate","tree","walk","asString","makeTemplate","makePartials","codegen","ctx","inPartial","nodelist","func","parse","sectionTags","cache","cacheKey","disableLambda","modelGet","compile","findInScope","scope","doModelGet","createSpecializedPartial","stackSubs","stackPartials","stackText","PartialTemplate","Substitutions","partial","subsText","coerceToString","hoganEscape","str","hChars","test","rAmp","rLt","rGt","rApos","compiler","r","ri","ep","symbol","base","activeSub","rp","rs","section","isArray","inverted","pass","returnFound","found","names","cx","mv","ls","oldTags","ct","textSource","result","sub","PropertyColor","spectrum","allowEmpty","showAlpha","clickoutFiresChange","preferredFormat","color","_a","toHexString","toRgbString","PropertyTween","onChange","$time","selected","tweens","charCode","blur","updateKeyTime","document","execCommand","isNaN","html","saveAs","EditorMenu","initExport","initToggle","timelineClosed","$toggleLink","$toggleLinkSide","propertiesClosed","hasClass","getJSON","blob","Blob","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","navigator","msSaveOrOpenBlob","userAgent","doc","get_URL","URL","webkitURL","save_link","createElementNS","can_use_save_link","createEvent","initMouseEvent","webkit_req_fs","webkitRequestFileSystem","req_fs","requestFileSystem","mozRequestFileSystem","throw_outside","ex","setImmediate","setTimeout","force_saveable_type","fs_min_size","arbitrary_revoke_timeout","revoke","file","revoker","revokeObjectURL","chrome","filesaver","event_types","concat","listener","FileSaver","object_url","target_view","slice","blob_changed","dispatch_all","fs_error","createObjectURL","location","href","new_tab","safari","readyState","DONE","abortable","create_if_not_found","exclusive","INIT","download","webkitSlice","size","TEMPORARY","fs","getDirectory","dir","save","getFile","createWriter","writer","onwriteend","toURL","onerror","error","ABORT_ERR","abort","WRITING","NOT_FOUND_ERR","FS_proto","onwritestart","onprogress","onwrite","onabort","content","webpackPolyfill","deprecate","paths","children","__webpack_amd_options__","EditorControls","$time_end","initControls","getDuration","playPause","$play_pause","toggle","is_playing","$bt_first","$bt_last","total","getTotalDuration","setDuration","SelectionManager","addDataRelations","removeDuplicates","highlightItems","sortSelection","item2","lineIndex","line","propIndex","keyIndex","d3item","Exporter","domain_start","domain_end","settings","duration","json_replacer","getData","JSON","UndoManager","history_max","history","current_index","keydown","keyCode","metaKey","ctrlKey","redo","undo","setState","item_key","key_key"],"mappings":"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","file":"TweenTime.Editor.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(undefined), require(\"lodash\"), require(\"d3\"), require(\"jquery\"), require(\"DraggableNumber\"), require(\"spectrum\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"signals\", \"lodash\", \"d3\", \"jquery\", \"DraggableNumber\", \"spectrum\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Editor\"] = factory(require(\"./signals\"), require(\"lodash\"), require(\"d3\"), require(\"jquery\"), require(\"DraggableNumber\"), require(\"spectrum\"));\n\telse\n\t\troot[\"TweenTime\"] = root[\"TweenTime\"] || {}, root[\"TweenTime\"][\"Editor\"] = factory(root[\"signals\"], root[\"_\"], root[\"d3\"], root[\"$\"], root[\"DraggableNumber\"], root[\"spectrum\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_9__, __WEBPACK_EXTERNAL_MODULE_18__, __WEBPACK_EXTERNAL_MODULE_22__, __WEBPACK_EXTERNAL_MODULE_28__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(undefined), require(\"lodash\"), require(\"d3\"), require(\"jquery\"), require(\"DraggableNumber\"), require(\"spectrum\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"signals\", \"lodash\", \"d3\", \"jquery\", \"DraggableNumber\", \"spectrum\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Editor\"] = factory(require(\"./signals\"), require(\"lodash\"), require(\"d3\"), require(\"jquery\"), require(\"DraggableNumber\"), require(\"spectrum\"));\n\telse\n\t\troot[\"TweenTime\"] = root[\"TweenTime\"] || {}, root[\"TweenTime\"][\"Editor\"] = factory(root[\"signals\"], root[\"_\"], root[\"d3\"], root[\"$\"], root[\"DraggableNumber\"], root[\"spectrum\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_9__, __WEBPACK_EXTERNAL_MODULE_18__, __WEBPACK_EXTERNAL_MODULE_22__, __WEBPACK_EXTERNAL_MODULE_28__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _graphTimeline = __webpack_require__(7);\n\t\n\tvar _graphTimeline2 = _interopRequireDefault(_graphTimeline);\n\t\n\tvar _editorPropertiesEditor = __webpack_require__(17);\n\t\n\tvar _editorPropertiesEditor2 = _interopRequireDefault(_editorPropertiesEditor);\n\t\n\tvar _editorEditorMenu = __webpack_require__(33);\n\t\n\tvar _editorEditorMenu2 = _interopRequireDefault(_editorEditorMenu);\n\t\n\tvar _editorEditorControls = __webpack_require__(38);\n\t\n\tvar _editorEditorControls2 = _interopRequireDefault(_editorEditorControls);\n\t\n\tvar _editorSelectionManager = __webpack_require__(39);\n\t\n\tvar _editorSelectionManager2 = _interopRequireDefault(_editorSelectionManager);\n\t\n\tvar _editorExporter = __webpack_require__(40);\n\t\n\tvar _editorExporter2 = _interopRequireDefault(_editorExporter);\n\t\n\tvar _editorUndoManager = __webpack_require__(41);\n\t\n\tvar _editorUndoManager2 = _interopRequireDefault(_editorUndoManager);\n\t\n\tvar tpl_timeline = __webpack_require__(42);\n\t\n\tvar Signals = __webpack_require__(3);\n\t\n\tvar Editor = (function () {\n\t  function Editor(tweenTime) {\n\t    var _this = this;\n\t\n\t    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t    _classCallCheck(this, Editor);\n\t\n\t    this.tweenTime = tweenTime;\n\t    this.options = options;\n\t    this.timer = this.tweenTime.timer;\n\t    this.lastTime = -1;\n\t\n\t    this.onKeyAdded = this.onKeyAdded.bind(this);\n\t    this.onKeyRemoved = this.onKeyRemoved.bind(this);\n\t\n\t    var el = options.el || $('body');\n\t    this.el = el;\n\t    this.$timeline = $(tpl_timeline());\n\t    el.append(this.$timeline);\n\t    el.addClass('has-editor');\n\t\n\t    this.selectionManager = new _editorSelectionManager2['default'](this.tweenTime);\n\t    this.exporter = new _editorExporter2['default'](this);\n\t    this.timeline = new _graphTimeline2['default'](this, options);\n\t\n\t    this.propertiesEditor = new _editorPropertiesEditor2['default'](this, this.selectionManager);\n\t    this.propertiesEditor.keyAdded.add(this.onKeyAdded);\n\t    this.propertiesEditor.keyRemoved.add(this.onKeyRemoved);\n\t\n\t    this.menu = new _editorEditorMenu2['default'](this.tweenTime, this.$timeline, this);\n\t    if (this.options.onMenuCreated !== undefined) {\n\t      this.options.onMenuCreated(this.$timeline.find('.timeline__menu'), this);\n\t    }\n\t\n\t    this.controls = new _editorEditorControls2['default'](this.tweenTime, this.$timeline);\n\t    this.undoManager = new _editorUndoManager2['default'](this);\n\t\n\t    // Public events.\n\t    this.onSelect = new Signals.Signal();\n\t    var self = this;\n\t    this.selectionManager.onSelect.add(function (selection, addToSelection) {\n\t      // Propagate the event.\n\t      self.onSelect.dispatch(selection, addToSelection);\n\t    });\n\t\n\t    // Will help resize the canvas to correct size (minus sidebar and timeline)\n\t    window.editorEnabled = true;\n\t    window.dispatchEvent(new Event('resize'));\n\t    window.requestAnimationFrame(function () {\n\t      return _this.update();\n\t    });\n\t  }\n\t\n\t  _createClass(Editor, [{\n\t    key: 'select',\n\t    value: function select(item) {\n\t      var addToSelection = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];\n\t\n\t      this.selectionManager.select(item, addToSelection);\n\t    }\n\t  }, {\n\t    key: 'getSelection',\n\t    value: function getSelection() {\n\t      return this.selectionManager.getSelection();\n\t    }\n\t  }, {\n\t    key: 'onKeyAdded',\n\t    value: function onKeyAdded() {\n\t      this.undoManager.addState();\n\t      this.render(false, false, true);\n\t    }\n\t  }, {\n\t    key: 'onKeyRemoved',\n\t    value: function onKeyRemoved(item) {\n\t      this.selectionManager.removeItem(item);\n\t      this.undoManager.addState();\n\t      if (this.selectionManager.selection.length) {\n\t        this.selectionManager.triggerSelect();\n\t      }\n\t      this.render(false, false, true);\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var time = arguments.length <= 0 || arguments[0] === undefined ? false : arguments[0];\n\t      var time_changed = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];\n\t      var force = arguments.length <= 2 || arguments[2] === undefined ? false : arguments[2];\n\t\n\t      if (time === false) {\n\t        time = this.timer.time[0];\n\t      }\n\t      if (force) {\n\t        this.timeline._isDirty = true;\n\t      }\n\t      this.timeline.render(time, time_changed);\n\t      this.controls.render(time, time_changed);\n\t      this.propertiesEditor.render(time, time_changed);\n\t    }\n\t  }, {\n\t    key: 'update',\n\t    value: function update() {\n\t      var _this2 = this;\n\t\n\t      var time = this.timer.time[0];\n\t      var time_changed = this.lastTime === time ? false : true;\n\t\n\t      this.render(time, time_changed);\n\t      this.lastTime = this.timer.time[0];\n\t      window.requestAnimationFrame(function () {\n\t        return _this2.update();\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return Editor;\n\t})();\n\t\n\tmodule.exports = Editor;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Utils = (function () {\n\t  function Utils() {\n\t    _classCallCheck(this, Utils);\n\t  }\n\t\n\t  _createClass(Utils, null, [{\n\t    key: \"formatMinutes\",\n\t    value: function formatMinutes(d) {\n\t      // convert milliseconds to seconds\n\t      d = d / 1000;\n\t      var hours = Math.floor(d / 3600);\n\t      var minutes = Math.floor((d - hours * 3600) / 60);\n\t      var seconds = d - minutes * 60;\n\t      var output = seconds + \"s\";\n\t      if (minutes) {\n\t        output = minutes + \"m \" + output;\n\t      }\n\t      if (hours) {\n\t        output = hours + \"h \" + output;\n\t      }\n\t      return output;\n\t    }\n\t  }, {\n\t    key: \"getClosestTime\",\n\t    value: function getClosestTime(data, time) {\n\t      var objectId = arguments.length <= 2 || arguments[2] === undefined ? false : arguments[2];\n\t      var property_name = arguments.length <= 3 || arguments[3] === undefined ? false : arguments[3];\n\t      var timer = arguments.length <= 4 || arguments[4] === undefined ? false : arguments[4];\n\t      var tolerance = arguments.length <= 5 || arguments[5] === undefined ? 0.1 : arguments[5];\n\t\n\t      if (timer) {\n\t        var timer_time = timer.getCurrentTime() / 1000;\n\t        if (Math.abs(timer_time - time) <= tolerance) {\n\t          return timer_time;\n\t        }\n\t      }\n\t\n\t      if (objectId || property_name) {\n\t        for (var i = 0; i < data.length; i++) {\n\t          var item = data[i];\n\t          // Don't match item with itself, but allow property to match item start/end.\n\t          if (item.id != objectId || property_name) {\n\t            // First check start & end.\n\t            if (Math.abs(item.start - time) <= tolerance) {\n\t              return item.start;\n\t            }\n\t\n\t            if (Math.abs(item.end - time) <= tolerance) {\n\t              return item.end;\n\t            }\n\t          }\n\t\n\t          // Test properties keys\n\t          for (var j = 0; j < item.properties.length; j++) {\n\t            var prop = item.properties[j];\n\t\n\t            // Don't match property with itself.\n\t            if (prop.keys && (item.id != objectId || prop.name != property_name)) {\n\t              for (var k = 0; k < prop.keys.length; k++) {\n\t                var key = prop.keys[k];\n\t                if (Math.abs(key.time - time) <= tolerance) {\n\t                  return key.time;\n\t                }\n\t              }\n\t            }\n\t          }\n\t        }\n\t      }\n\t      return false;\n\t    }\n\t  }, {\n\t    key: \"getPreviousKey\",\n\t    value: function getPreviousKey(keys, time) {\n\t      var prevKey = false;\n\t      for (var i = 0; i < keys.length; i++) {\n\t        var key = keys[i];\n\t        if (key.time < time) {\n\t          prevKey = key;\n\t        } else {\n\t          return prevKey;\n\t        }\n\t      }\n\t      return prevKey;\n\t    }\n\t  }, {\n\t    key: \"sortKeys\",\n\t    value: function sortKeys(keys) {\n\t      var compare = function compare(a, b) {\n\t        if (a.time < b.time) {\n\t          return -1;\n\t        }\n\t        if (a.time > b.time) {\n\t          return 1;\n\t        }\n\t        return 0;\n\t      };\n\t      return keys.sort(compare);\n\t    }\n\t  }, {\n\t    key: \"guid\",\n\t    value: function guid() {\n\t      var s4 = function s4() {\n\t        return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n\t      };\n\t      return s4() + s4() + \"-\" + s4() + \"-\" + s4() + \"-\" + s4() + \"-\" + s4() + s4() + s4();\n\t    }\n\t  }]);\n\t\n\t  return Utils;\n\t})();\n\t\n\texports[\"default\"] = Utils;\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 2 */,\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ },\n/* 4 */,\n/* 5 */,\n/* 6 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _coreUtils = __webpack_require__(1);\n\t\n\tvar _coreUtils2 = _interopRequireDefault(_coreUtils);\n\t\n\tvar _Header = __webpack_require__(8);\n\t\n\tvar _Header2 = _interopRequireDefault(_Header);\n\t\n\tvar _TimeIndicator = __webpack_require__(10);\n\t\n\tvar _TimeIndicator2 = _interopRequireDefault(_TimeIndicator);\n\t\n\tvar _Items = __webpack_require__(11);\n\t\n\tvar _Items2 = _interopRequireDefault(_Items);\n\t\n\tvar _KeysPreview = __webpack_require__(12);\n\t\n\tvar _KeysPreview2 = _interopRequireDefault(_KeysPreview);\n\t\n\tvar _Properties = __webpack_require__(13);\n\t\n\tvar _Properties2 = _interopRequireDefault(_Properties);\n\t\n\tvar _Keys = __webpack_require__(14);\n\t\n\tvar _Keys2 = _interopRequireDefault(_Keys);\n\t\n\tvar _Errors = __webpack_require__(15);\n\t\n\tvar _Errors2 = _interopRequireDefault(_Errors);\n\t\n\tvar _Selection = __webpack_require__(16);\n\t\n\tvar _Selection2 = _interopRequireDefault(_Selection);\n\t\n\tvar d3 = __webpack_require__(9);\n\t\n\tvar Timeline = (function () {\n\t  function Timeline(editor, options) {\n\t    var _this = this;\n\t\n\t    _classCallCheck(this, Timeline);\n\t\n\t    this.editor = editor;\n\t    this.tweenTime = this.editor.tweenTime;\n\t    this.timer = this.tweenTime.timer;\n\t    this.selectionManager = this.editor.selectionManager;\n\t\n\t    this._isDirty = true;\n\t    this.timer = this.tweenTime.timer;\n\t    this.currentTime = this.timer.time; // used in timeindicator.\n\t\n\t    this.onUpdate = this.onUpdate.bind(this);\n\t\n\t    // Make the domain cover 20% of the totalDuation by default.\n\t    this.initialDomain = [];\n\t    this.initialDomain[0] = options.domainStart || 0;\n\t    this.initialDomain[1] = options.domainEnd || this.timer.totalDuration * 0.2;\n\t\n\t    // Adapt time to be greater or equal to domainStart.\n\t    if (this.initialDomain[0] > this.timer.getCurrentTime()) {\n\t      this.timer.time[0] = this.initialDomain[0];\n\t    }\n\t\n\t    var margin = { top: 6, right: 20, bottom: 0, left: 265 };\n\t    this.margin = margin;\n\t\n\t    var width = window.innerWidth - margin.left - margin.right;\n\t    var height = 270 - margin.top - margin.bottom - 40;\n\t    this.lineHeight = 20;\n\t    this.label_position_x = -margin.left + 20;\n\t\n\t    this.x = d3.time.scale().domain(this.initialDomain).range([0, width]);\n\t\n\t    this.xAxis = d3.svg.axis().scale(this.x).orient(\"top\").tickSize(-height, 0).tickFormat(_coreUtils2['default'].formatMinutes);\n\t\n\t    this.svg = d3.select(editor.$timeline.get(0)).select('.timeline__main').append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", 600);\n\t\n\t    this.svgContainer = this.svg.append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\t\n\t    this.svgContainerTime = this.svg.append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",0)\");\n\t\n\t    this.linesContainer = this.svg.append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\t\n\t    this.header = new _Header2['default'](editor, this.timer, this.initialDomain, this.tweenTime, width, margin);\n\t    this.timeIndicator = new _TimeIndicator2['default'](this, this.svgContainerTime);\n\t\n\t    this.selection = new _Selection2['default'](this, this.svg, margin);\n\t\n\t    this.items = new _Items2['default'](this, this.linesContainer);\n\t    this.items.onUpdate.add(this.onUpdate);\n\t    this.keysPreview = new _KeysPreview2['default'](this, this.linesContainer);\n\t\n\t    this.properties = new _Properties2['default'](this);\n\t    this.properties.onKeyAdded.add(function (newKey, keyContainer) {\n\t      _this._isDirty = true;\n\t      // render the timeline directly so that we can directly select\n\t      // the new key with it's domElement.\n\t      _this.render(0, false);\n\t      _this.keys.selectNewKey(newKey, keyContainer);\n\t    });\n\t    this.errors = new _Errors2['default'](this);\n\t    this.keys = new _Keys2['default'](this);\n\t    this.keys.onKeyUpdated.add(function () {\n\t      _this.onUpdate();\n\t    });\n\t\n\t    this.xAxisGrid = d3.svg.axis().scale(this.x).ticks(100).tickSize(-this.items.dy, 0).tickFormat(\"\").orient(\"top\");\n\t\n\t    this.xGrid = this.svgContainer.append('g').attr('class', 'x axis grid').attr(\"transform\", \"translate(0,\" + margin.top + \")\").call(this.xAxisGrid);\n\t\n\t    this.xAxisElement = this.svgContainer.append(\"g\").attr(\"class\", \"x axis\").attr(\"transform\", \"translate(0,\" + margin.top + \")\").call(this.xAxis);\n\t\n\t    this.header.onBrush.add(function (extent) {\n\t      _this.x.domain(extent);\n\t      _this.xGrid.call(_this.xAxisGrid);\n\t      _this.xAxisElement.call(_this.xAxis);\n\t      _this._isDirty = true;\n\t    });\n\t\n\t    // First render\n\t    window.requestAnimationFrame(function () {\n\t      _this.render();\n\t    });\n\t\n\t    window.onresize = function () {\n\t      var INNER_WIDTH = window.innerWidth;\n\t      var width = INNER_WIDTH - margin.left - margin.right;\n\t      _this.svg.attr(\"width\", width + margin.left + margin.right);\n\t      _this.svg.selectAll('.timeline__right-mask').attr('width', INNER_WIDTH);\n\t      _this.x.range([0, width]);\n\t\n\t      _this._isDirty = true;\n\t      _this.header.resize(INNER_WIDTH);\n\t      _this.render();\n\t    };\n\t  }\n\t\n\t  _createClass(Timeline, [{\n\t    key: 'onUpdate',\n\t    value: function onUpdate() {\n\t      this.editor.render(false, false, true);\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render(time, time_changed) {\n\t      if (time_changed) {\n\t        var domainLength;\n\t        // Update current domain when playing to keep time indicator in view.\n\t        var margin_ms = 16;\n\t        if (this.timer.getCurrentTime() > this.initialDomain[1]) {\n\t          domainLength = this.initialDomain[1] - this.initialDomain[0];\n\t          this.initialDomain[0] += domainLength - margin_ms;\n\t          this.initialDomain[1] += domainLength - margin_ms;\n\t          this.header.setDomain(this.initialDomain);\n\t        }\n\t        if (this.timer.getCurrentTime() < this.initialDomain[0]) {\n\t          domainLength = this.initialDomain[1] - this.initialDomain[0];\n\t          this.initialDomain[0] = this.timer.getCurrentTime();\n\t          this.initialDomain[1] = this.initialDomain[0] + domainLength;\n\t          this.header.setDomain(this.initialDomain);\n\t        }\n\t      }\n\t\n\t      if (this._isDirty || time_changed) {\n\t        // Render header and time indicator everytime the time changed.\n\t        this.header.render();\n\t        this.timeIndicator.render();\n\t      }\n\t\n\t      if (this._isDirty) {\n\t        // No need to call this on each frames, but only on brush, key drag, ...\n\t        var bar = this.items.render();\n\t        this.keysPreview.render(bar);\n\t        var properties = this.properties.render(bar);\n\t        this.errors.render(properties);\n\t        this.keys.render(properties);\n\t        this._isDirty = false;\n\t\n\t        // Adapt the timeline height.\n\t        var height = Math.max(this.items.dy + 30, 230);\n\t        this.xAxis.tickSize(-height, 0);\n\t        this.xAxisGrid.tickSize(-height, 0);\n\t        this.xGrid.call(this.xAxisGrid);\n\t        this.xAxisElement.call(this.xAxis);\n\t        this.svg.attr(\"height\", height);\n\t        this.timeIndicator.updateHeight(height);\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Timeline;\n\t})();\n\t\n\texports['default'] = Timeline;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _coreUtils = __webpack_require__(1);\n\t\n\tvar _coreUtils2 = _interopRequireDefault(_coreUtils);\n\t\n\tvar d3 = __webpack_require__(9);\n\t\n\tvar Signals = __webpack_require__(3);\n\t\n\tvar Header = (function () {\n\t  function Header(editor, timer, initialDomain, tweenTime, width, margin) {\n\t    _classCallCheck(this, Header);\n\t\n\t    this.timer = timer;\n\t    this.initialDomain = initialDomain;\n\t    this.tweenTime = tweenTime;\n\t\n\t    this.onBrush = new Signals.Signal();\n\t    this.margin = { top: 10, right: 20, bottom: 0, left: margin.left };\n\t    this.height = 50 - this.margin.top - this.margin.bottom + 20;\n\t\n\t    this.currentTime = this.timer.time;\n\t    this.x = d3.time.scale().range([0, width]);\n\t    this.x.domain([0, this.timer.totalDuration]);\n\t\n\t    // Same as this.x from timeline\n\t    this.xDisplayed = d3.time.scale().range([0, width]);\n\t    this.xDisplayed.domain(this.initialDomain);\n\t\n\t    this.xAxis = d3.svg.axis().scale(this.x).orient(\"top\").tickSize(-5, 0).tickFormat(_coreUtils2['default'].formatMinutes);\n\t\n\t    this.svg = d3.select(editor.$timeline.get(0)).select('.timeline__header').append(\"svg\").attr(\"width\", width + this.margin.left + this.margin.right).attr(\"height\", 56);\n\t\n\t    this.svgContainer = this.svg.append(\"g\").attr(\"transform\", \"translate(\" + this.margin.left + \",\" + this.margin.top + \")\");\n\t\n\t    this.createBrushHandle();\n\t    this.createTimeHandle();\n\t    this.timer.durationChanged.add(this.onDurationChanged);\n\t  }\n\t\n\t  _createClass(Header, [{\n\t    key: 'adaptDomainToDuration',\n\t    value: function adaptDomainToDuration(domain, seconds) {\n\t      var ms = seconds * 1000;\n\t      var new_domain = [domain[0], domain[1]];\n\t      // Make the domain smaller or equal to ms.\n\t      new_domain[0] = Math.min(new_domain[0], ms);\n\t      new_domain[1] = Math.min(new_domain[1], ms);\n\t      // Should not go below 0.\n\t      new_domain[0] = Math.max(new_domain[0], 0);\n\t\n\t      return new_domain;\n\t    }\n\t  }, {\n\t    key: 'setDomain',\n\t    value: function setDomain() {\n\t      this.brush.x(this.x).extent(this.initialDomain);\n\t      this.svgContainer.select('.brush').call(this.brush);\n\t      // Same as onBrush\n\t      this.onBrush.dispatch(this.initialDomain);\n\t      this.render();\n\t      this.xDisplayed.domain(this.initialDomain);\n\t    }\n\t  }, {\n\t    key: 'onDurationChanged',\n\t    value: function onDurationChanged(seconds) {\n\t      this.x.domain([0, this.timer.totalDuration]);\n\t      this.xAxisElement.call(this.xAxis);\n\t      this.initialDomain = this.adaptDomainToDuration(this.initialDomain, seconds);\n\t      this.setDomain(this.initialDomain);\n\t    }\n\t  }, {\n\t    key: 'createBrushHandle',\n\t    value: function createBrushHandle() {\n\t      var _this = this;\n\t\n\t      this.xAxisElement = this.svgContainer.append(\"g\").attr(\"class\", \"x axis\").attr(\"transform\", \"translate(0,\" + (this.margin.top + 7) + \")\").call(this.xAxis);\n\t\n\t      var onBrush = function onBrush() {\n\t        var extent0 = _this.brush.extent();\n\t        // Get domain as milliseconds and not date.\n\t        var start = extent0[0].getTime();\n\t        var end = extent0[1].getTime();\n\t        // Set the initial domain.\n\t        _this.initialDomain[0] = start;\n\t        _this.initialDomain[1] = end;\n\t        _this.setDomain(_this.initialDomain);\n\t      };\n\t\n\t      this.brush = d3.svg.brush().x(this.x).extent(this.initialDomain).on(\"brush\", onBrush);\n\t\n\t      this.gBrush = this.svgContainer.append(\"g\").attr(\"class\", \"brush\").call(this.brush).selectAll(\"rect\").attr('height', 20);\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var timeSelection = this.svgContainer.selectAll('.time-indicator');\n\t      timeSelection.attr('transform', 'translate(' + this.xDisplayed(this.currentTime[0]) + ', 25)');\n\t    }\n\t  }, {\n\t    key: 'createTimeHandle',\n\t    value: function createTimeHandle() {\n\t      var self = this;\n\t\n\t      var dragTimeMove = function dragTimeMove() {\n\t        var event = d3.event.sourceEvent;\n\t        event.stopPropagation();\n\t        var tweenTime = self.tweenTime;\n\t        var event_x = event.x !== undefined ? event.x : event.clientX;\n\t        var dx = self.xDisplayed.invert(event_x - self.margin.left);\n\t        dx = dx.getTime();\n\t        dx = Math.max(0, dx);\n\t\n\t        var timeMatch = false;\n\t        if (event.shiftKey) {\n\t          time = dx / 1000;\n\t          timeMatch = _coreUtils2['default'].getClosestTime(tweenTime.data, time, '---non-existant');\n\t          if (timeMatch !== false) {\n\t            timeMatch = timeMatch * 1000;\n\t          }\n\t        }\n\t        if (timeMatch === false) {\n\t          timeMatch = dx;\n\t        }\n\t        self.timer.seek([timeMatch]);\n\t      };\n\t\n\t      var dragTime = d3.behavior.drag().origin(function (d) {\n\t        return d;\n\t      }).on(\"drag\", dragTimeMove);\n\t\n\t      var timeSelection = this.svgContainer.selectAll('.time-indicator').data(this.currentTime);\n\t\n\t      timeSelection.enter().append('rect').attr('x', 0).attr('y', 20).attr('width', self.xDisplayed(self.timer.totalDuration)).attr('height', 50).attr('fill-opacity', 0).on('click', function () {\n\t        var mouse = d3.mouse(this);\n\t        var dx = self.xDisplayed.invert(mouse[0]);\n\t        dx = dx.getTime();\n\t        dx = Math.max(0, dx);\n\t        self.timer.seek([dx]);\n\t      });\n\t\n\t      var timeGrp = timeSelection.enter().append(\"g\").attr('class', \"time-indicator\").attr(\"transform\", \"translate(-0.5,\" + 30 + \")\").call(dragTime);\n\t\n\t      timeGrp.append('rect').attr('class', 'time-indicator__line').attr('x', -0.5).attr('y', 0).attr('width', 1).attr('height', 1000);\n\t\n\t      timeGrp.append('path').attr('class', 'time-indicator__handle').attr('d', 'M -5 -3 L -5 5 L 0 10 L 5 5 L 5 -3 L -5 -3');\n\t\n\t      // Mask time indicator\n\t      // todo: remove the mask.\n\t      this.svgContainer.append(\"rect\").attr(\"class\", \"graph-mask\").attr(\"x\", -self.margin.left).attr(\"y\", -self.margin.top).attr(\"width\", self.margin.left - 5).attr(\"height\", self.height);\n\t    }\n\t  }, {\n\t    key: 'resize',\n\t    value: function resize(width) {\n\t      width = width - this.margin.left - this.margin.right;\n\t      this.svg.attr(\"width\", width + this.margin.left + this.margin.right);\n\t\n\t      this.x.range([0, width]);\n\t      this.xDisplayed.range([0, width]);\n\t      this.xAxisElement.call(this.xAxis);\n\t    }\n\t  }]);\n\t\n\t  return Header;\n\t})();\n\t\n\texports['default'] = Header;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar TimeIndicator = (function () {\n\t  function TimeIndicator(timeline, container) {\n\t    _classCallCheck(this, TimeIndicator);\n\t\n\t    this.timeline = timeline;\n\t    this.container = container;\n\t    this.timeSelection = this.container.selectAll('.time-indicator').data(this.timeline.currentTime);\n\t    this.timeGrp = this.timeSelection.enter().append(\"svg\").attr('class', \"time-indicator timeline__right-mask\").attr('width', window.innerWidth - this.timeline.label_position_x).attr('height', 442);\n\t\n\t    this.timeSelection = this.timeGrp.append('rect').attr('class', 'time-indicator__line').attr('x', 0).attr('y', -this.timeline.margin.top - 5).attr('width', 1).attr('height', 1000);\n\t\n\t    this.timeSelection = this.container.selectAll('.time-indicator rect');\n\t  }\n\t\n\t  _createClass(TimeIndicator, [{\n\t    key: 'updateHeight',\n\t    value: function updateHeight(height) {\n\t      this.timeGrp.attr(\"height\", height);\n\t      this.timeSelection.attr(\"height\", height + this.timeline.margin.top + 5);\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      this.timeSelection.attr('transform', \"translate(\" + (this.timeline.x(this.timeline.currentTime[0]) - 0.5) + \",0)\");\n\t    }\n\t  }]);\n\t\n\t  return TimeIndicator;\n\t})();\n\t\n\texports['default'] = TimeIndicator;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _coreUtils = __webpack_require__(1);\n\t\n\tvar _coreUtils2 = _interopRequireDefault(_coreUtils);\n\t\n\tvar d3 = __webpack_require__(9);\n\tvar Signals = __webpack_require__(3);\n\tvar _ = __webpack_require__(6);\n\t\n\tvar Items = (function () {\n\t  function Items(timeline, container) {\n\t    _classCallCheck(this, Items);\n\t\n\t    this.timeline = timeline;\n\t    this.container = container;\n\t    this.dy = 10 + this.timeline.margin.top;\n\t    this.onUpdate = new Signals.Signal();\n\t  }\n\t\n\t  _createClass(Items, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      var self = this;\n\t      var tweenTime = self.timeline.tweenTime;\n\t\n\t      var selectBar = function selectBar() {\n\t        var data = d3.select(this).datum();\n\t        self.timeline.selectionManager.select(data);\n\t      };\n\t\n\t      var dragmove = function dragmove(d) {\n\t        var dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n\t        var diff = dx - d.start;\n\t        d.start += diff;\n\t        d.end += diff;\n\t        if (d.properties) {\n\t          for (var prop_key = 0; prop_key < d.properties.length; prop_key++) {\n\t            var prop = d.properties[prop_key];\n\t            for (var i = 0; i < prop.keys.length; i++) {\n\t              var key = prop.keys[i];\n\t              key.time += diff;\n\t            }\n\t          }\n\t        }\n\t        d._isDirty = true;\n\t        self.onUpdate.dispatch();\n\t      };\n\t\n\t      var dragmoveLeft = function dragmoveLeft(d) {\n\t        d3.event.sourceEvent.stopPropagation();\n\t        var sourceEvent = d3.event.sourceEvent;\n\t        var dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n\t        var timeMatch = false;\n\t        if (sourceEvent.shiftKey) {\n\t          timeMatch = _coreUtils2['default'].getClosestTime(tweenTime.data, dx, d.id, false, tweenTime.timer);\n\t        }\n\t        if (!timeMatch) {\n\t          var diff = dx - d.start;\n\t          timeMatch = d.start + diff;\n\t        }\n\t        d.start = timeMatch;\n\t        d._isDirty = true;\n\t        self.onUpdate.dispatch();\n\t      };\n\t\n\t      var dragmoveRight = function dragmoveRight(d) {\n\t        d3.event.sourceEvent.stopPropagation();\n\t        var sourceEvent = d3.event.sourceEvent;\n\t        var dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n\t        var timeMatch = false;\n\t        if (sourceEvent.shiftKey) {\n\t          timeMatch = _coreUtils2['default'].getClosestTime(tweenTime.data, dx, false, false, tweenTime.timer);\n\t        }\n\t        if (!timeMatch) {\n\t          var diff = dx - d.end;\n\t          timeMatch = d.end + diff;\n\t        }\n\t        d.end = timeMatch;\n\t        d._isDirty = true;\n\t        self.onUpdate.dispatch();\n\t      };\n\t\n\t      var dragLeft = d3.behavior.drag().origin(function () {\n\t        var t = d3.select(this);\n\t        return { x: t.attr('x'), y: t.attr('y') };\n\t      }).on(\"drag\", dragmoveLeft);\n\t\n\t      var dragRight = d3.behavior.drag().origin(function () {\n\t        var t = d3.select(this);\n\t        return { x: t.attr('x'), y: t.attr('y') };\n\t      }).on(\"drag\", dragmoveRight);\n\t\n\t      var drag = d3.behavior.drag().origin(function () {\n\t        var t = d3.select(this);\n\t        return { x: t.attr('x'), y: t.attr('y') };\n\t      }).on(\"drag\", dragmove);\n\t\n\t      var bar_border = 1;\n\t      var bar = this.container.selectAll(\".line-grp\").data(this.timeline.tweenTime.data, function (d) {\n\t        return d.id;\n\t      });\n\t\n\t      var barEnter = bar.enter().append('g').attr('class', 'line-grp');\n\t\n\t      var barContainerRight = barEnter.append('svg').attr('class', 'timeline__right-mask').attr('width', window.innerWidth - self.timeline.label_position_x).attr('height', self.timeline.lineHeight);\n\t\n\t      barContainerRight.append(\"rect\").attr(\"class\", \"bar\")\n\t      // Add a unique id for SelectionManager.removeDuplicates\n\t      .attr('id', function () {\n\t        return _coreUtils2['default'].guid();\n\t      }).attr(\"y\", 3).attr(\"height\", 14);\n\t\n\t      barContainerRight.append(\"rect\").attr(\"class\", \"bar-anchor bar-anchor--left\").attr(\"y\", 2).attr(\"height\", 16).attr(\"width\", 6).call(dragLeft);\n\t\n\t      barContainerRight.append(\"rect\").attr(\"class\", \"bar-anchor bar-anchor--right\").attr(\"y\", 2).attr(\"height\", 16).attr(\"width\", 6).call(dragRight);\n\t\n\t      self.dy = 10 + this.timeline.margin.top;\n\t      bar.attr(\"transform\", function (d) {\n\t        var y = self.dy;\n\t        self.dy += self.timeline.lineHeight;\n\t        if (!d.collapsed) {\n\t          var numProperties = 0;\n\t          if (d.properties) {\n\t            var visibleProperties = _.filter(d.properties, function (prop) {\n\t              return prop.keys.length;\n\t            });\n\t            numProperties = visibleProperties.length;\n\t          }\n\t          self.dy += numProperties * self.timeline.lineHeight;\n\t        }\n\t        return \"translate(0,\" + y + \")\";\n\t      });\n\t\n\t      var barWithStartAndEnd = function barWithStartAndEnd(d) {\n\t        if (d.start !== undefined && d.end !== undefined) {\n\t          return true;\n\t        }\n\t        return false;\n\t      };\n\t\n\t      bar.selectAll('.bar-anchor--left').filter(barWithStartAndEnd).attr(\"x\", function (d) {\n\t        return self.timeline.x(d.start * 1000) - 1;\n\t      }).on('mousedown', function () {\n\t        // Don't trigger mousedown on linescontainer else\n\t        // it create the selection rectangle\n\t        d3.event.stopPropagation();\n\t      });\n\t\n\t      bar.selectAll('.bar-anchor--right').filter(barWithStartAndEnd).attr(\"x\", function (d) {\n\t        return self.timeline.x(d.end * 1000) - 1;\n\t      }).on('mousedown', function () {\n\t        // Don't trigger mousedown on linescontainer else\n\t        // it create the selection rectangle\n\t        d3.event.stopPropagation();\n\t      });\n\t\n\t      bar.selectAll('.bar').filter(barWithStartAndEnd).attr(\"x\", function (d) {\n\t        return self.timeline.x(d.start * 1000) + bar_border;\n\t      }).attr(\"width\", function (d) {\n\t        return Math.max(0, (self.timeline.x(d.end) - self.timeline.x(d.start)) * 1000 - bar_border);\n\t      }).call(drag).on(\"click\", selectBar).on('mousedown', function () {\n\t        // Don't trigger mousedown on linescontainer else\n\t        // it create the selection rectangle\n\t        d3.event.stopPropagation();\n\t      });\n\t\n\t      barEnter.append(\"text\").attr(\"class\", \"line-label\").attr(\"x\", self.timeline.label_position_x + 10).attr(\"y\", 16).text(function (d) {\n\t        return d.label;\n\t      }).on('click', selectBar).on('mousedown', function () {\n\t        // Don't trigger mousedown on linescontainer else\n\t        // it create the selection rectangle\n\t        d3.event.stopPropagation();\n\t      });\n\t\n\t      barEnter.append(\"text\").attr(\"class\", \"line__toggle\").attr(\"x\", self.timeline.label_position_x - 10).attr(\"y\", 16).on('click', function (d) {\n\t        d.collapsed = !d.collapsed;\n\t        self.onUpdate.dispatch();\n\t      });\n\t\n\t      bar.selectAll(\".line__toggle\").text(function (d) {\n\t        if (d.collapsed) {\n\t          return \"▸\";\n\t        } else {\n\t          return \"▾\";\n\t        }\n\t      });\n\t\n\t      barEnter.append(\"line\").attr(\"class\", 'line-separator').attr(\"x1\", -self.timeline.margin.left).attr(\"x2\", self.timeline.x(self.timeline.timer.totalDuration + 100)).attr(\"y1\", self.timeline.lineHeight).attr(\"y2\", self.timeline.lineHeight);\n\t\n\t      bar.exit().remove();\n\t\n\t      return bar;\n\t    }\n\t  }]);\n\t\n\t  return Items;\n\t})();\n\t\n\texports['default'] = Items;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar d3 = __webpack_require__(9);\n\t\n\tvar KeysPreview = (function () {\n\t  function KeysPreview(timeline, container) {\n\t    _classCallCheck(this, KeysPreview);\n\t\n\t    this.timeline = timeline;\n\t    this.container = container;\n\t  }\n\t\n\t  _createClass(KeysPreview, [{\n\t    key: 'render',\n\t    value: function render(bar) {\n\t      var self = this;\n\t\n\t      var propVal = function propVal(d) {\n\t        if (d.properties) {\n\t          return d.properties;\n\t        } else {\n\t          return [];\n\t        }\n\t      };\n\t      var propKey = function propKey(d) {\n\t        return d.name;\n\t      };\n\t\n\t      var properties = bar.selectAll('.keys-preview').data(propVal, propKey);\n\t\n\t      properties.enter().append('svg').attr(\"class\", 'keys-preview timeline__right-mask').attr('width', window.innerWidth - self.timeline.label_position_x).attr('height', self.timeline.lineHeight);\n\t\n\t      var setItemStyle = function setItemStyle() {\n\t        var item = d3.select(this.parentNode.parentNode);\n\t        var bar_data = item.datum();\n\t        if (bar_data.collapsed === true) {\n\t          return \"\";\n\t        }\n\t        // Show only when item is collapsed\n\t        return \"display: none;\";\n\t      };\n\t\n\t      properties.selectAll('.key--preview').attr(\"style\", setItemStyle);\n\t\n\t      var keyValue = function keyValue(d) {\n\t        return d.keys;\n\t      };\n\t      var keyKey = function keyKey(d) {\n\t        return d.time;\n\t      };\n\t      var keys = properties.selectAll('.key--preview').data(keyValue, keyKey);\n\t\n\t      keys.enter().append('path').attr('class', 'key--preview').attr(\"style\", setItemStyle).attr('d', 'M 0 -4 L 4 0 L 0 4 L -4 0');\n\t\n\t      keys.attr('transform', function (d) {\n\t        var dx = self.timeline.x(d.time * 1000);\n\t        dx = parseInt(dx, 10);\n\t        var dy = 11;\n\t        return \"translate(\" + dx + \",\" + dy + \")\";\n\t      });\n\t\n\t      keys.exit().remove();\n\t    }\n\t  }]);\n\t\n\t  return KeysPreview;\n\t})();\n\t\n\texports['default'] = KeysPreview;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _coreUtils = __webpack_require__(1);\n\t\n\tvar _coreUtils2 = _interopRequireDefault(_coreUtils);\n\t\n\tvar d3 = __webpack_require__(9);\n\tvar Signals = __webpack_require__(3);\n\t\n\tvar Properties = (function () {\n\t  function Properties(timeline) {\n\t    _classCallCheck(this, Properties);\n\t\n\t    this.timeline = timeline;\n\t    this.onKeyAdded = new Signals.Signal();\n\t    this.subGrp = false;\n\t  }\n\t\n\t  _createClass(Properties, [{\n\t    key: 'render',\n\t    value: function render(bar) {\n\t      var self = this;\n\t\n\t      var propVal = function propVal(d) {\n\t        if (d.properties) {\n\t          return d.properties.filter(function (prop) {\n\t            return prop.keys.length;\n\t          });\n\t        } else {\n\t          return [];\n\t        }\n\t      };\n\t      var propKey = function propKey(d) {\n\t        return d.name;\n\t      };\n\t\n\t      var properties = bar.selectAll('.line-item').data(propVal, propKey);\n\t      var subGrp = properties.enter().append('g').attr(\"class\", 'line-item');\n\t\n\t      // Save subGrp in a variable for use in Errors.coffee\n\t      self.subGrp = subGrp;\n\t\n\t      properties.attr(\"transform\", function (d, i) {\n\t        var sub_height = (i + 1) * self.timeline.lineHeight;\n\t        return \"translate(0,\" + sub_height + \")\";\n\t      });\n\t\n\t      subGrp.append('rect').attr('class', 'click-handler click-handler--property').attr('x', 0).attr('y', 0).attr('width', self.timeline.x(self.timeline.timer.totalDuration + 100)).attr('height', self.timeline.lineHeight).on('dblclick', function (d) {\n\t        var lineObject = this.parentNode.parentNode;\n\t        var lineValue = d3.select(lineObject).datum();\n\t        var def = d[\"default\"] ? d[\"default\"] : 0;\n\t        var mouse = d3.mouse(this);\n\t        var dx = self.timeline.x.invert(mouse[0]);\n\t        dx = dx.getTime() / 1000;\n\t        var prevKey = _coreUtils2['default'].getPreviousKey(d.keys, dx);\n\t        // set the value to match the previous key if we found one\n\t        if (prevKey) {\n\t          def = prevKey.val;\n\t        }\n\t        d._line = lineValue;\n\t        var newKey = {\n\t          time: dx,\n\t          val: def,\n\t          _property: d\n\t        };\n\t        d.keys.push(newKey);\n\t        // Sort the keys for tweens creation\n\t        d.keys = _coreUtils2['default'].sortKeys(d.keys);\n\t\n\t        lineValue._isDirty = true;\n\t        var keyContainer = this.parentNode;\n\t        self.onKeyAdded.dispatch(newKey, keyContainer);\n\t      });\n\t\n\t      // Mask\n\t      subGrp.append('svg').attr('class', 'line-item__keys timeline__right-mask').attr('width', window.innerWidth - self.timeline.label_position_x).attr('height', self.timeline.lineHeight).attr('fill', '#f00');\n\t\n\t      subGrp.append('text').attr(\"class\", \"line-label line-label--small\").attr(\"x\", self.timeline.label_position_x + 10).attr(\"y\", 15).text(function (d) {\n\t        return d.name;\n\t      });\n\t\n\t      subGrp.append(\"line\").attr(\"class\", 'line-separator--secondary').attr(\"x1\", -self.timeline.margin.left).attr(\"x2\", self.timeline.x(self.timeline.timer.totalDuration + 100)).attr(\"y1\", self.timeline.lineHeight).attr(\"y2\", self.timeline.lineHeight);\n\t\n\t      bar.selectAll('.line-item').attr('display', function () {\n\t        var lineObject = this.parentNode;\n\t        var lineValue = d3.select(lineObject).datum();\n\t        if (!lineValue.collapsed) {\n\t          return \"block\";\n\t        } else {\n\t          return \"none\";\n\t        }\n\t      });\n\t\n\t      properties.exit().remove();\n\t\n\t      return properties;\n\t    }\n\t  }]);\n\t\n\t  return Properties;\n\t})();\n\t\n\texports['default'] = Properties;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _coreUtils = __webpack_require__(1);\n\t\n\tvar _coreUtils2 = _interopRequireDefault(_coreUtils);\n\t\n\tvar d3 = __webpack_require__(9);\n\tvar Signals = __webpack_require__(3);\n\t\n\tvar _ = __webpack_require__(6);\n\t\n\tvar Keys = (function () {\n\t  function Keys(timeline) {\n\t    _classCallCheck(this, Keys);\n\t\n\t    this.timeline = timeline;\n\t    this.onKeyUpdated = new Signals.Signal();\n\t  }\n\t\n\t  _createClass(Keys, [{\n\t    key: 'selectNewKey',\n\t    value: function selectNewKey(data, container) {\n\t      var self = this;\n\t      var key = d3.select(container).selectAll('.key').filter(function (item) {\n\t        return item.time === data.time;\n\t      });\n\t      if (key.length) {\n\t        d3.selectAll('.key--selected').classed('key--selected', false);\n\t        key.classed('key--selected', true);\n\t        key = key[0][0];\n\t        data._dom = key;\n\t        self.timeline.selectionManager.select(data);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render(properties) {\n\t      var self = this;\n\t      var tweenTime = self.timeline.tweenTime;\n\t\n\t      var dragmove = function dragmove(d) {\n\t        var sourceEvent = d3.event.sourceEvent;\n\t        var propertyObject = this.parentNode;\n\t        var lineObject = propertyObject.parentNode.parentNode;\n\t        var propertyData = d3.select(propertyObject).datum();\n\t        var lineData = d3.select(lineObject).datum();\n\t        var key_data = d;\n\t\n\t        var currentDomainStart = self.timeline.x.domain()[0];\n\t        var mouse = d3.mouse(this);\n\t        var old_time = d.time;\n\t        var dx = self.timeline.x.invert(mouse[0]);\n\t        dx = dx.getTime();\n\t        dx = dx / 1000 - currentDomainStart / 1000;\n\t        dx = d.time + dx;\n\t\n\t        var selection = self.timeline.selectionManager.getSelection();\n\t        var selection_first_time = false;\n\t        var selection_last_time = false;\n\t        if (selection.length) {\n\t          selection_first_time = selection[0].time;\n\t          selection_last_time = selection[selection.length - 1].time;\n\t        }\n\t\n\t        selection = _.filter(selection, function (item) {\n\t          return _.isEqual(item, key_data) === false;\n\t        });\n\t\n\t        var timeMatch = false;\n\t        if (sourceEvent.shiftKey) {\n\t          timeMatch = _coreUtils2['default'].getClosestTime(tweenTime.data, dx, lineData.id, propertyData.name, tweenTime.timer);\n\t        }\n\t        if (timeMatch === false) {\n\t          timeMatch = dx;\n\t        }\n\t\n\t        d.time = timeMatch;\n\t        // Sort the keys of the current selected item.\n\t        propertyData.keys = _coreUtils2['default'].sortKeys(propertyData.keys);\n\t        var time_offset = d.time - old_time;\n\t\n\t        var updateKeyItem = function updateKeyItem(item) {\n\t          var property = item._property;\n\t          property._line._isDirty = true;\n\t          property.keys = _coreUtils2['default'].sortKeys(property.keys);\n\t        };\n\t\n\t        var key_scale = false;\n\t        var is_first = false;\n\t        if (selection.length) {\n\t          if (sourceEvent.altKey && selection_first_time !== false && selection_last_time !== false) {\n\t            is_first = selection_first_time === old_time;\n\t            if (is_first) {\n\t              key_scale = (selection_last_time - d.time) / (selection_last_time - old_time);\n\t            } else {\n\t              key_scale = (d.time - selection_first_time) / (old_time - selection_first_time);\n\t            }\n\t          }\n\t\n\t          for (var i = 0; i < selection.length; i++) {\n\t            var data = selection[i];\n\t            if (key_scale === false) {\n\t              data.time += time_offset;\n\t            } else {\n\t              if (is_first) {\n\t                data.time = selection_last_time - (selection_last_time - data.time) * key_scale;\n\t              } else {\n\t                data.time = selection_first_time + (data.time - selection_first_time) * key_scale;\n\t              }\n\t            }\n\t            updateKeyItem(data);\n\t          }\n\t        }\n\t\n\t        lineData._isDirty = true;\n\t        self.onKeyUpdated.dispatch();\n\t      };\n\t\n\t      var propValue = function propValue(d) {\n\t        return d.keys;\n\t      };\n\t      var propKey = function propKey(d) {\n\t        if (!d._id) {\n\t          d._id = _coreUtils2['default'].guid();\n\t        }\n\t        return d._id;\n\t      };\n\t      var keys = properties.select('.line-item__keys').selectAll('.key').data(propValue, propKey);\n\t\n\t      // selectKey is triggered by dragstart event\n\t      var selectKey = function selectKey() {\n\t        var event = d3.event;\n\t        // with dragstart event the mousevent is is inside the event.sourcEvent\n\t        if (event.sourceEvent) {\n\t          event = event.sourceEvent;\n\t        }\n\t\n\t        var addToSelection = event.shiftKey;\n\t        // if element is already selectionned and we are on\n\t        // the dragstart event, we stop there since it is already selected.\n\t        if (d3.event.type && d3.event.type === \"dragstart\") {\n\t          if (d3.select(this).classed('key--selected')) {\n\t            return;\n\t          }\n\t        }\n\t        var key_data = d3.select(this).datum();\n\t\n\t        // Also keep a reference to the key dom element.\n\t        key_data._dom = this;\n\t\n\t        self.timeline.selectionManager.select(key_data, addToSelection);\n\t      };\n\t\n\t      var dragend = function dragend() {\n\t        self.timeline.editor.undoManager.addState();\n\t      };\n\t\n\t      var drag = d3.behavior.drag().origin(function (d) {\n\t        return d;\n\t      }).on(\"drag\", dragmove).on(\"dragstart\", selectKey).on(\"dragend\", dragend);\n\t\n\t      var key_grp = keys.enter().append('g').attr('class', 'key')\n\t      // Use the unique id added in propKey above for the dom element id.\n\t      .attr('id', function (d) {\n\t        return d._id;\n\t      }).on('mousedown', function () {\n\t        // Don't trigger mousedown on linescontainer else\n\t        // it create the selection rectangle\n\t        d3.event.stopPropagation();\n\t      }).call(drag);\n\t\n\t      properties.selectAll('.key').attr('class', function (d) {\n\t        var cls = 'key';\n\t        // keep selected class\n\t        if (d3.select(this).classed('key--selected')) {\n\t          cls += \" key--selected\";\n\t        }\n\t        if (d.ease) {\n\t          var ease = d.ease.split('.');\n\t          if (ease.length === 2) {\n\t            cls += \" \" + ease[1];\n\t          }\n\t        } else {\n\t          // If no easing specified, the it's the default Quad.easeOut\n\t          cls += ' easeOut';\n\t        }\n\t        return cls;\n\t      });\n\t\n\t      var grp_linear = key_grp.append('g').attr('class', 'ease-linear');\n\t      grp_linear.append('path').attr('class', 'key__shape-arrow').attr('d', 'M 0 -6 L 6 0 L 0 6');\n\t      grp_linear.append('path').attr('class', 'key__shape-arrow').attr('d', 'M 0 -6 L -6 0 L 0 6');\n\t\n\t      var grp_in = key_grp.append('g').attr('class', 'ease-in');\n\t      grp_in.append('path').attr('class', 'key__shape-rect').attr('d', 'M 0 -6 L 0 6 L 4 5 L 1 0 L 4 -5');\n\t      grp_in.append('path').attr('class', 'key__shape-arrow').attr('d', 'M 0 -6 L -6 0 L 0 6');\n\t\n\t      var grp_out = key_grp.append('g').attr('class', 'ease-out');\n\t      grp_out.append('path').attr('class', 'key__shape-rect').attr('d', 'M 0 -6 L 0 6 L -4 5 L -1 0 L -4 -5');\n\t      grp_out.append('path').attr('class', 'key__shape-arrow').attr('d', 'M 0 -6 L 6 0 L 0 6');\n\t\n\t      var grp_inout = key_grp.append('g').attr('class', 'ease-inout');\n\t      grp_inout.append('circle').attr('cx', 0).attr('cy', 0).attr('r', 5);\n\t\n\t      keys.attr('transform', function (d) {\n\t        var dx = self.timeline.x(d.time * 1000);\n\t        dx = parseInt(dx, 10);\n\t        var dy = 10;\n\t        return \"translate(\" + dx + \",\" + dy + \")\";\n\t      });\n\t\n\t      keys.exit().remove();\n\t    }\n\t  }]);\n\t\n\t  return Keys;\n\t})();\n\t\n\texports['default'] = Keys;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 15 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar Errors = (function () {\n\t  function Errors(timeline) {\n\t    _classCallCheck(this, Errors);\n\t\n\t    this.timeline = timeline;\n\t  }\n\t\n\t  _createClass(Errors, [{\n\t    key: 'render',\n\t    value: function render(properties) {\n\t      var self = this;\n\t      var subGrp = self.timeline.properties.subGrp;\n\t      var propertiesWithError = function propertiesWithError(d) {\n\t        return d.errors !== undefined;\n\t      };\n\t      // use insert with :first-child to prepend.\n\t      subGrp.insert('svg', ':first-child').attr('class', 'line-item__errors').attr('width', window.innerWidth - self.timeline.label_position_x).attr('height', self.timeline.lineHeight);\n\t\n\t      var errorsValue = function errorsValue(d) {\n\t        return d.errors;\n\t      };\n\t      var errorTime = function errorTime(d) {\n\t        return d.time;\n\t      };\n\t\n\t      var errors = properties.filter(propertiesWithError).select('.line-item__errors').selectAll('.error').data(errorsValue, errorTime);\n\t\n\t      errors.enter().append('rect').attr('class', 'error').attr('width', 4).attr('height', self.timeline.lineHeight - 1).attr('y', '1');\n\t\n\t      properties.selectAll('.error').attr('x', function (d) {\n\t        var dx;\n\t        dx = self.timeline.x(d.time * 1000);\n\t        return dx;\n\t      });\n\t\n\t      errors.exit().remove();\n\t    }\n\t  }]);\n\t\n\t  return Errors;\n\t})();\n\t\n\texports['default'] = Errors;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar Selection = (function () {\n\t  function Selection(timeline, svg, margin) {\n\t    _classCallCheck(this, Selection);\n\t\n\t    this.timeline = timeline;\n\t    this.svg = svg;\n\t    this.margin = margin;\n\t\n\t    this.onMouseUp = this.onMouseUp.bind(this);\n\t    this.init();\n\t  }\n\t\n\t  _createClass(Selection, [{\n\t    key: 'onMouseUp',\n\t    value: function onMouseUp() {\n\t      this.svg.selectAll('.selection').remove();\n\t      // Enable again the default browser text selection.\n\t      $('body').css({\n\t        'user-select': 'all'\n\t      });\n\t    }\n\t  }, {\n\t    key: 'init',\n\t    value: function init() {\n\t      var self = this;\n\t      this.svg.on(\"mousedown\", function () {\n\t        var p = d3.mouse(this);\n\t        // Only init selection if we click on the timeline and not on the labels.\n\t        if (p[0] < self.timeline.margin.left) {\n\t          return;\n\t        }\n\t        self.svg.append('rect').attr({\n\t          'class': 'selection',\n\t          x: p[0],\n\t          y: p[1],\n\t          width: 0,\n\t          height: 0\n\t        });\n\t        // Unselect items.\n\t        self.timeline.selectionManager.reset();\n\t        // Prevent default browser text selection.\n\t        $('body').css({\n\t          'user-select': 'none'\n\t        });\n\t      }).on(\"mousemove\", function () {\n\t        var s = self.svg.select('.selection');\n\t        if (s.empty()) {\n\t          return;\n\t        }\n\t        var p = d3.mouse(this);\n\t        var d = {\n\t          x: parseInt(s.attr('x'), 10),\n\t          y: parseInt(s.attr('y'), 10),\n\t          width: parseInt(s.attr('width'), 10),\n\t          height: parseInt(s.attr('height'), 10)\n\t        };\n\t        // Apply margin to mouse selection.\n\t        p[0] = Math.max(self.margin.left, p[0]);\n\t\n\t        var move = {\n\t          x: p[0] - d.x,\n\t          y: p[1] - d.y\n\t        };\n\t        if (move.x < 1 || move.x * 2 < d.width) {\n\t          d.x = p[0];\n\t          d.width -= move.x;\n\t        } else {\n\t          d.width = move.x;\n\t        }\n\t\n\t        if (move.y < 1 || move.y * 2 < d.height) {\n\t          d.y = p[1];\n\t          d.height -= move.y;\n\t        } else {\n\t          d.height = move.y;\n\t        }\n\t\n\t        s.attr(d);\n\t\n\t        // remove margins from selection\n\t        d.x -= self.margin.left;\n\t        var key_width = 6;\n\t\n\t        d.timeStart = self.timeline.x.invert(d.x - key_width).getTime() / 1000;\n\t        d.timeEnd = self.timeline.x.invert(d.x + d.width + key_width).getTime() / 1000;\n\t        var containerBounding = self.svg[0][0].getBoundingClientRect();\n\t\n\t        // deselect all previously selected items\n\t        d3.selectAll('.key--selected').classed('key--selected', false);\n\t        self.timeline.selectionManager.reset();\n\t        var selection = [];\n\t        d3.selectAll('.key').each(function (state_data) {\n\t          var item_data = d3.select(this.parentNode.parentNode.parentNode).datum();\n\t          var key_data = d3.select(this).datum();\n\t\n\t          // Also keep a reference to the key dom element.\n\t          key_data._dom = this;\n\t\n\t          if (item_data.collapsed !== true) {\n\t            var itemBounding = d3.select(this)[0][0].getBoundingClientRect();\n\t            var y = itemBounding.top - containerBounding.top;\n\t            if (state_data.time >= d.timeStart && state_data.time <= d.timeEnd) {\n\t              // use or condition for top and bottom\n\t              if (y >= d.y && y <= d.y + d.height || y + 10 >= d.y && y + 10 <= d.y + d.height) {\n\t                d3.select(this).classed('key--selected', true);\n\t\n\t                selection.push(key_data);\n\t              }\n\t            }\n\t          }\n\t        });\n\t        self.timeline.selectionManager.select(selection);\n\t      });\n\t      // Attach the mouseup event to window so that it catch it event if\n\t      // mouseup happen outside of the browser window.\n\t      $(window).on(\"mouseup\", this.onMouseUp);\n\t    }\n\t  }]);\n\t\n\t  return Selection;\n\t})();\n\t\n\texports['default'] = Selection;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\t__webpack_require__(18);\n\t\n\tvar _editorProperty = __webpack_require__(19);\n\t\n\tvar _editorProperty2 = _interopRequireDefault(_editorProperty);\n\t\n\tvar Signals = __webpack_require__(3);\n\t\n\tvar tpl_propertiesEditor = __webpack_require__(32);\n\t\n\tvar PropertiesEditor = (function () {\n\t  function PropertiesEditor(editor) {\n\t    _classCallCheck(this, PropertiesEditor);\n\t\n\t    this.editor = editor;\n\t\n\t    this.render = this.render.bind(this);\n\t    this.addProperty = this.addProperty.bind(this);\n\t    this.onSelect = this.onSelect.bind(this);\n\t    this.onKeyAdded = this.onKeyAdded.bind(this);\n\t\n\t    this.timeline = this.editor.timeline;\n\t    this.timer = this.editor.timer;\n\t    this.selectionManager = editor.selectionManager;\n\t\n\t    this.$el = $(tpl_propertiesEditor());\n\t    this.$container = this.$el.find('.properties-editor__main');\n\t    // todo: rename keyAdded to updated\n\t    this.keyAdded = new Signals.Signal();\n\t    this.keyRemoved = new Signals.Signal();\n\t    this.items = [];\n\t\n\t    this.parentElement = editor.el;\n\t    // Close properties by default.\n\t    this.parentElement.addClass('properties-is-closed');\n\t    // Add the properties editor to the document.\n\t    this.parentElement.append(this.$el);\n\t\n\t    this.selectionManager.onSelect.add(this.onSelect);\n\t\n\t    // Stop event propagation to no play by accident.\n\t    this.$el.keypress(function (e) {\n\t      return e.stopPropagation();\n\t    });\n\t  }\n\t\n\t  _createClass(PropertiesEditor, [{\n\t    key: 'onKeyAdded',\n\t    value: function onKeyAdded() {\n\t      this.keyAdded.dispatch();\n\t    }\n\t  }, {\n\t    key: 'onSelect',\n\t    value: function onSelect() {\n\t      var data = arguments.length <= 0 || arguments[0] === undefined ? false : arguments[0];\n\t\n\t      this.items.forEach(function (item) {\n\t        item.remove();\n\t      });\n\t      this.items = [];\n\t      this.$container.empty();\n\t      if (data instanceof Array) {\n\t        for (var i = 0; i < data.length; i++) {\n\t          this.addProperty(data[i]);\n\t        }\n\t      } else {\n\t        this.addProperty(data);\n\t      }\n\t\n\t      // When selecting anything, automatically display the properties editor.\n\t      if (this.items.length) {\n\t        this.parentElement.removeClass('properties-is-closed');\n\t      }\n\t    }\n\t  }, {\n\t    key: 'addProperty',\n\t    value: function addProperty(data) {\n\t      var prop = new _editorProperty2['default'](this.editor, this.$container, data);\n\t      prop.keyAdded.add(this.onKeyAdded);\n\t      this.items.push(prop);\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render(time, time_changed) {\n\t      if (!time_changed) {\n\t        return;\n\t      }\n\t      this.items.forEach(function (prop) {\n\t        prop.update();\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return PropertiesEditor;\n\t})();\n\t\n\texports['default'] = PropertiesEditor;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_18__;\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _PropertyNumber = __webpack_require__(20);\n\t\n\tvar _PropertyNumber2 = _interopRequireDefault(_PropertyNumber);\n\t\n\tvar _PropertyColor = __webpack_require__(27);\n\t\n\tvar _PropertyColor2 = _interopRequireDefault(_PropertyColor);\n\t\n\tvar _PropertyTween = __webpack_require__(30);\n\t\n\tvar _PropertyTween2 = _interopRequireDefault(_PropertyTween);\n\t\n\tvar Signals = __webpack_require__(3);\n\t\n\tvar Property = (function () {\n\t  function Property(editor, $el, data) {\n\t    _classCallCheck(this, Property);\n\t\n\t    this.editor = editor;\n\t    this.$el = $el;\n\t\n\t    this.onKeyAdded = this.onKeyAdded.bind(this);\n\t\n\t    this.timeline = editor.timeline;\n\t    this.timer = editor.timer;\n\t    this.selectionManager = editor.selectionManager;\n\t    this.keyAdded = new Signals.Signal();\n\t    this.items = [];\n\t    this.numberProp = false;\n\t    this.tweenProp = false;\n\t\n\t    var key_val = false;\n\t    var propertyObject = false;\n\t    var propertyData = false;\n\t    var lineObject = false;\n\t    var lineData = false;\n\t\n\t    // For keys the _property data should be defined.\n\t    if (data._property) {\n\t      propertyData = data._property;\n\t      lineData = propertyData._line;\n\t      key_val = data;\n\t    }\n\t\n\t    // Check if we selected a main item.\n\t    if (data.id) {\n\t      lineData = data;\n\t    }\n\t\n\t    // data and propertyData are defined on key select.\n\t    var property_name = false;\n\t    if (propertyData) {\n\t      property_name = propertyData.name;\n\t    }\n\t\n\t    // Get the property container.\n\t    var $container = this.getContainer(lineData);\n\t\n\t    var $tween_container = $container;\n\t\n\t    // Basic data, loop through properties.\n\t    for (var key in lineData.properties) {\n\t      var instance_prop = lineData.properties[key];\n\t      // show all properties or only 1 if we selected a key.\n\t      if (!property_name || instance_prop.name === property_name) {\n\t        var $grp_container = this.getGroupContainer(instance_prop, $container);\n\t        var numberProp = this.addNumberProperty(instance_prop, lineData, key_val, $grp_container);\n\t        this.items.push(numberProp);\n\t        if (instance_prop.name === property_name) {\n\t          $tween_container = $grp_container;\n\t        }\n\t\n\t        if (property_name) {\n\t          // Add tween select if we are editing a key, so only if there is property_name.\n\t          var tweenProp = this.addTweenProperty(instance_prop, lineData, key_val, $tween_container, propertyData);\n\t          this.items.push(tweenProp);\n\t        }\n\t      }\n\t    }\n\t  }\n\t\n\t  _createClass(Property, [{\n\t    key: 'onKeyAdded',\n\t    value: function onKeyAdded() {\n\t      // propagate the event.\n\t      this.keyAdded.dispatch();\n\t    }\n\t  }, {\n\t    key: 'getGroupContainer',\n\t    value: function getGroupContainer(instance_prop, $container) {\n\t      var $existing, $grp, grp_class;\n\t      if (!instance_prop.group) {\n\t        grp_class = 'property-grp--general';\n\t        $existing = $container.find('.' + grp_class);\n\t        if ($existing.length) {\n\t          return $existing;\n\t        } else {\n\t          $grp = this.createGroupContainer(grp_class);\n\t          $container.append($grp);\n\t          return $grp;\n\t        }\n\t      } else {\n\t        // Replace all spaces to dash and make class lowercase\n\t        var group_name = instance_prop.group.replace(/\\s+/g, '-').toLowerCase();\n\t        grp_class = 'property-grp--' + group_name;\n\t        $existing = $container.find('.' + grp_class);\n\t        if ($existing.length) {\n\t          return $existing;\n\t        } else {\n\t          $grp = this.createGroupContainer(grp_class, instance_prop.group);\n\t          $container.append($grp);\n\t          return $grp;\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: 'createGroupContainer',\n\t    value: function createGroupContainer(grp_class) {\n\t      var label = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];\n\t\n\t      var $grp = $('<div class=\"property-grp ' + grp_class + '\"></div>');\n\t      if (label) {\n\t        $grp.append('<h3 class=\"property-grp__title\">' + label + '</h3>');\n\t      }\n\t      return $grp;\n\t    }\n\t  }, {\n\t    key: 'getContainer',\n\t    value: function getContainer(lineData) {\n\t      var $container = false;\n\t      if (lineData.id) {\n\t        $container = $('#property--' + lineData.id);\n\t        if (!$container.length) {\n\t          $container = $container = $('<div class=\"properties__wrapper\" id=\"property--' + lineData.id + '\"></div>');\n\t          this.$el.append($container);\n\t          if (lineData.label) {\n\t            $container.append('<h2 class=\"properties-editor__title\">' + lineData.label + '</h2>');\n\t          }\n\t        }\n\t      }\n\t      if ($container === false) {\n\t        $container = $('<div class=\"properties__wrapper\" id=\"no-item\"></div>');\n\t        this.$el.append($container);\n\t      }\n\t      return $container;\n\t    }\n\t  }, {\n\t    key: 'remove',\n\t    value: function remove() {\n\t      this.items.forEach(function (item) {\n\t        item.remove();\n\t      });\n\t      if (this.keyAdded) {\n\t        this.keyAdded.dispose();\n\t      }\n\t\n\t      delete this.editor;\n\t      delete this.$el;\n\t\n\t      delete this.timeline;\n\t      delete this.timer;\n\t      delete this.selectionManager;\n\t      delete this.keyAdded;\n\t      delete this.items;\n\t      delete this.numberProp;\n\t      delete this.tweenProp;\n\t    }\n\t  }, {\n\t    key: 'addNumberProperty',\n\t    value: function addNumberProperty(instance_prop, lineData, key_val, $container) {\n\t      var propClass = _PropertyNumber2['default'];\n\t      if (instance_prop.type && instance_prop.type === 'color') {\n\t        propClass = _PropertyColor2['default'];\n\t      }\n\t      var prop = new propClass(instance_prop, lineData, this.editor, key_val);\n\t      prop.keyAdded.add(this.onKeyAdded);\n\t      $container.append(prop.$el);\n\t      return prop;\n\t    }\n\t  }, {\n\t    key: 'addTweenProperty',\n\t    value: function addTweenProperty(instance_prop, lineData, key_val, $container, propertyData) {\n\t      var _this = this;\n\t\n\t      var tween = new _PropertyTween2['default'](instance_prop, lineData, this.editor, key_val, this.timeline);\n\t      $container.append(tween.$el);\n\t\n\t      // Add a remove key button\n\t      tween.$el.find('[data-action-remove]').click(function (e) {\n\t        e.preventDefault();\n\t        var index = propertyData.keys.indexOf(key_val);\n\t        if (index > -1) {\n\t          propertyData.keys.splice(index, 1);\n\t          if (key_val._dom) {\n\t            _this.editor.propertiesEditor.keyRemoved.dispatch(key_val._dom);\n\t          }\n\t          lineData._isDirty = true;\n\t        }\n\t      });\n\t      return tween;\n\t    }\n\t  }, {\n\t    key: 'update',\n\t    value: function update() {\n\t      for (var i = 0; i < this.items.length; i++) {\n\t        var item = this.items[i];\n\t        item.update();\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Property;\n\t})();\n\t\n\texports['default'] = Property;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x2, _x3, _x4) { var _again = true; _function: while (_again) { var object = _x2, property = _x3, receiver = _x4; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x2 = parent; _x3 = property; _x4 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t__webpack_require__(18);\n\t\n\tvar _PropertyBase2 = __webpack_require__(21);\n\t\n\tvar _PropertyBase3 = _interopRequireDefault(_PropertyBase2);\n\t\n\tvar DraggableNumber = __webpack_require__(22);\n\t\n\tvar tpl_property = __webpack_require__(23);\n\t\n\tvar PropertyNumber = (function (_PropertyBase) {\n\t  _inherits(PropertyNumber, _PropertyBase);\n\t\n\t  // instance_property: The current property on the data object.\n\t  // lineData: The line data object.\n\t\n\t  function PropertyNumber(instance_property, lineData, editor) {\n\t    var key_val = arguments.length <= 3 || arguments[3] === undefined ? false : arguments[3];\n\t\n\t    _classCallCheck(this, PropertyNumber);\n\t\n\t    _get(Object.getPrototypeOf(PropertyNumber.prototype), 'constructor', this).call(this, instance_property, lineData, editor, key_val);\n\t    this.onInputChange = this.onInputChange.bind(this);\n\t    this.$input = this.$el.find('input');\n\t  }\n\t\n\t  _createClass(PropertyNumber, [{\n\t    key: 'getInputVal',\n\t    value: function getInputVal() {\n\t      return parseFloat(this.$el.find('input').val());\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var _this = this;\n\t\n\t      _get(Object.getPrototypeOf(PropertyNumber.prototype), 'render', this).call(this);\n\t      // By default assign the property default value\n\t      var val = this.getCurrentVal();\n\t\n\t      var data = {\n\t        id: this.instance_property.name, // \"circleRadius\" instead of \"circle radius\"\n\t        label: this.instance_property.label || this.instance_property.name,\n\t        val: val\n\t      };\n\t\n\t      var view = tpl_property(data);\n\t      this.$el = $(view);\n\t      this.$el.find('.property__key').click(this.onKeyClick);\n\t\n\t      var $input = this.$el.find('input');\n\t\n\t      var onChangeEnd = function onChangeEnd() {\n\t        _this.editor.undoManager.addState();\n\t      };\n\t\n\t      var draggableOptions = {\n\t        changeCallback: function changeCallback() {\n\t          return _this.onInputChange();\n\t        },\n\t        endCallback: function endCallback() {\n\t          return onChangeEnd();\n\t        }\n\t      };\n\t      // Set min & max if they are defined.\n\t      if ('min' in this.instance_property) {\n\t        draggableOptions.min = this.instance_property.min;\n\t      }\n\t      if ('max' in this.instance_property) {\n\t        draggableOptions.max = this.instance_property.max;\n\t      }\n\t\n\t      var draggable = new DraggableNumber($input.get(0), draggableOptions);\n\t      $input.data('draggable', draggable);\n\t      $input.change(this.onInputChange);\n\t    }\n\t  }, {\n\t    key: 'remove',\n\t    value: function remove() {\n\t      _get(Object.getPrototypeOf(PropertyNumber.prototype), 'remove', this).call(this);\n\t      if (this.$input.data('draggable')) {\n\t        this.$input.data('draggable').destroy();\n\t      }\n\t\n\t      delete this.$input;\n\t      delete this.$el;\n\t    }\n\t  }, {\n\t    key: 'update',\n\t    value: function update() {\n\t      _get(Object.getPrototypeOf(PropertyNumber.prototype), 'update', this).call(this);\n\t      var val = this.getCurrentVal();\n\t      var draggable = this.$input.data('draggable');\n\t\n\t      if (draggable) {\n\t        draggable.set(val.toFixed(3));\n\t      } else {\n\t        this.$input.val(val.toFixed(3));\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return PropertyNumber;\n\t})(_PropertyBase3['default']);\n\t\n\texports['default'] = PropertyNumber;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _coreUtils = __webpack_require__(1);\n\t\n\tvar _coreUtils2 = _interopRequireDefault(_coreUtils);\n\t\n\tvar Signals = __webpack_require__(3);\n\tvar _ = __webpack_require__(6);\n\t\n\tvar PropertyBase = (function () {\n\t  // @instance_property: The current property on the data object.\n\t  // @lineData: The line data object.\n\t\n\t  function PropertyBase(instance_property, lineData, editor) {\n\t    var key_val = arguments.length <= 3 || arguments[3] === undefined ? false : arguments[3];\n\t\n\t    _classCallCheck(this, PropertyBase);\n\t\n\t    this.instance_property = instance_property;\n\t    this.lineData = lineData;\n\t    this.editor = editor;\n\t    this.key_val = key_val;\n\t\n\t    //this.update = this.update.bind(this);\n\t    this.onInputChange = this.onInputChange.bind(this);\n\t    this.onKeyClick = this.onKeyClick.bind(this);\n\t\n\t    this.timer = editor.timer;\n\t    this.keyAdded = new Signals.Signal();\n\t    this.render();\n\t\n\t    this.$key = this.$el.find('.property__key');\n\t  }\n\t\n\t  _createClass(PropertyBase, [{\n\t    key: 'onKeyClick',\n\t    value: function onKeyClick(e) {\n\t      e.preventDefault();\n\t      var currentValue = this.getCurrentVal();\n\t      this.addKey(currentValue);\n\t    }\n\t  }, {\n\t    key: 'getInputVal',\n\t    value: function getInputVal() {\n\t      return this.$el.find('input').val();\n\t    }\n\t  }, {\n\t    key: 'getCurrentVal',\n\t    value: function getCurrentVal() {\n\t      var val = this.instance_property.val;\n\t      var prop_name = this.instance_property.name;\n\t\n\t      // if we selected a key simply return it's value\n\t      if (this.key_val) {\n\t        return this.key_val.val;\n\t      }\n\t      if (this.lineData.values !== undefined && this.lineData.values[prop_name]) {\n\t        return this.lineData.values[prop_name];\n\t      }\n\t      return val;\n\t    }\n\t  }, {\n\t    key: 'onInputChange',\n\t    value: function onInputChange() {\n\t      var current_value = this.getInputVal();\n\t      var currentTime = this.timer.getCurrentTime() / 1000;\n\t      // if we selected a key simply get the time from it.\n\t      if (this.key_val) {\n\t        currentTime = this.key_val.time;\n\t      }\n\t\n\t      if (this.instance_property.keys && this.instance_property.keys.length) {\n\t        // Add a new key if there is no other key at same time\n\t        var current_key = _.find(this.instance_property.keys, function (key) {\n\t          return key.time == currentTime;\n\t        });\n\t\n\t        if (current_key) {\n\t          // if there is a key update it\n\t          current_key.val = current_value;\n\t        } else {\n\t          // add a new key\n\t          this.addKey(current_value);\n\t        }\n\t      } else {\n\t        // There is no keys, simply update the property value (for data saving)\n\t        this.instance_property.val = current_value;\n\t        // Also directly set the lineData value.\n\t        this.lineData.values[this.instance_property.name] = current_value;\n\t        // Simply update the custom object with new values.\n\t        if (this.lineData.object) {\n\t          currentTime = this.timer.getCurrentTime() / 1000;\n\t          // Set the property on the instance object.\n\t          this.lineData.object.update(currentTime - this.lineData.start);\n\t        }\n\t      }\n\t\n\t      // Something changed, make the lineData dirty to rebuild things. d\n\t      this.lineData._isDirty = true;\n\t    }\n\t  }, {\n\t    key: 'getCurrentKey',\n\t    value: function getCurrentKey() {\n\t      var time = this.timer.getCurrentTime() / 1000;\n\t      if (!this.instance_property || !this.instance_property.keys) {\n\t        return false;\n\t      }\n\t      if (this.instance_property.keys.length === 0) {\n\t        return false;\n\t      }\n\t      for (var i = 0; i < this.instance_property.keys.length; i++) {\n\t        var key = this.instance_property.keys[i];\n\t        if (key.time === time) {\n\t          return key;\n\t        }\n\t      }\n\t      return false;\n\t    }\n\t  }, {\n\t    key: 'addKey',\n\t    value: function addKey(val) {\n\t      var currentTime = this.timer.getCurrentTime() / 1000;\n\t      var key = {\n\t        time: currentTime,\n\t        val: val\n\t      };\n\t      this.instance_property.keys.push(key);\n\t      this.instance_property.keys = _coreUtils2['default'].sortKeys(this.instance_property.keys);\n\t      this.lineData._isDirty = true;\n\t      this.keyAdded.dispatch();\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      // current values are defined in @lineData.values\n\t      this.values = this.lineData.values !== undefined ? this.lineData.values : {};\n\t    }\n\t  }, {\n\t    key: 'update',\n\t    value: function update() {\n\t      var key = this.getCurrentKey();\n\t      this.$key.toggleClass('property__key--active', key);\n\t    }\n\t  }, {\n\t    key: 'remove',\n\t    value: function remove() {\n\t      if (this.keyAdded) {\n\t        this.keyAdded.dispose();\n\t      }\n\t      delete this.instance_property;\n\t      delete this.lineData;\n\t      delete this.editor;\n\t      delete this.key_val;\n\t\n\t      delete this.timer;\n\t      delete this.keyAdded;\n\t      delete this.$key;\n\t    }\n\t  }]);\n\t\n\t  return PropertyBase;\n\t})();\n\t\n\texports['default'] = PropertyBase;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_22__;\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar H = __webpack_require__(24);\n\tmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--number\\\">\");t.b(\"\\n\" + i);t.b(\"  <button class=\\\"property__key\\\"></button>\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">\");t.b(t.v(t.f(\"label\",c,p,0)));t.b(\"</label>\");t.b(\"\\n\" + i);t.b(\"  <input type=\\\"number\\\" id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__input\\\" value=\\\"\");t.b(t.v(t.f(\"val\",c,p,0)));t.b(\"\\\" />\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--number\\\">\\n  <button class=\\\"property__key\\\"></button>\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">{{label}}</label>\\n  <input type=\\\"number\\\" id=\\\"{{id}}\\\" class=\\\"property__input\\\" value=\\\"{{val}}\\\" />\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*\n\t *  Copyright 2011 Twitter, Inc.\n\t *  Licensed under the Apache License, Version 2.0 (the \"License\");\n\t *  you may not use this file except in compliance with the License.\n\t *  You may obtain a copy of the License at\n\t *\n\t *  http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t *  Unless required by applicable law or agreed to in writing, software\n\t *  distributed under the License is distributed on an \"AS IS\" BASIS,\n\t *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n\t *  See the License for the specific language governing permissions and\n\t *  limitations under the License.\n\t */\n\t\n\t// This file is for use with Node.js. See dist/ for browser files.\n\t\n\tvar Hogan = __webpack_require__(25);\n\tHogan.Template = __webpack_require__(26).Template;\n\tHogan.template = Hogan.Template;\n\tmodule.exports = Hogan;\n\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*\n\t *  Copyright 2011 Twitter, Inc.\n\t *  Licensed under the Apache License, Version 2.0 (the \"License\");\n\t *  you may not use this file except in compliance with the License.\n\t *  You may obtain a copy of the License at\n\t *\n\t *  http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t *  Unless required by applicable law or agreed to in writing, software\n\t *  distributed under the License is distributed on an \"AS IS\" BASIS,\n\t *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n\t *  See the License for the specific language governing permissions and\n\t *  limitations under the License.\n\t */\n\t\n\t(function (Hogan) {\n\t  // Setup regex  assignments\n\t  // remove whitespace according to Mustache spec\n\t  var rIsWhitespace = /\\S/,\n\t      rQuot = /\\\"/g,\n\t      rNewline =  /\\n/g,\n\t      rCr = /\\r/g,\n\t      rSlash = /\\\\/g,\n\t      rLineSep = /\\u2028/,\n\t      rParagraphSep = /\\u2029/;\n\t\n\t  Hogan.tags = {\n\t    '#': 1, '^': 2, '<': 3, '$': 4,\n\t    '/': 5, '!': 6, '>': 7, '=': 8, '_v': 9,\n\t    '{': 10, '&': 11, '_t': 12\n\t  };\n\t\n\t  Hogan.scan = function scan(text, delimiters) {\n\t    var len = text.length,\n\t        IN_TEXT = 0,\n\t        IN_TAG_TYPE = 1,\n\t        IN_TAG = 2,\n\t        state = IN_TEXT,\n\t        tagType = null,\n\t        tag = null,\n\t        buf = '',\n\t        tokens = [],\n\t        seenTag = false,\n\t        i = 0,\n\t        lineStart = 0,\n\t        otag = '{{',\n\t        ctag = '}}';\n\t\n\t    function addBuf() {\n\t      if (buf.length > 0) {\n\t        tokens.push({tag: '_t', text: new String(buf)});\n\t        buf = '';\n\t      }\n\t    }\n\t\n\t    function lineIsWhitespace() {\n\t      var isAllWhitespace = true;\n\t      for (var j = lineStart; j < tokens.length; j++) {\n\t        isAllWhitespace =\n\t          (Hogan.tags[tokens[j].tag] < Hogan.tags['_v']) ||\n\t          (tokens[j].tag == '_t' && tokens[j].text.match(rIsWhitespace) === null);\n\t        if (!isAllWhitespace) {\n\t          return false;\n\t        }\n\t      }\n\t\n\t      return isAllWhitespace;\n\t    }\n\t\n\t    function filterLine(haveSeenTag, noNewLine) {\n\t      addBuf();\n\t\n\t      if (haveSeenTag && lineIsWhitespace()) {\n\t        for (var j = lineStart, next; j < tokens.length; j++) {\n\t          if (tokens[j].text) {\n\t            if ((next = tokens[j+1]) && next.tag == '>') {\n\t              // set indent to token value\n\t              next.indent = tokens[j].text.toString()\n\t            }\n\t            tokens.splice(j, 1);\n\t          }\n\t        }\n\t      } else if (!noNewLine) {\n\t        tokens.push({tag:'\\n'});\n\t      }\n\t\n\t      seenTag = false;\n\t      lineStart = tokens.length;\n\t    }\n\t\n\t    function changeDelimiters(text, index) {\n\t      var close = '=' + ctag,\n\t          closeIndex = text.indexOf(close, index),\n\t          delimiters = trim(\n\t            text.substring(text.indexOf('=', index) + 1, closeIndex)\n\t          ).split(' ');\n\t\n\t      otag = delimiters[0];\n\t      ctag = delimiters[delimiters.length - 1];\n\t\n\t      return closeIndex + close.length - 1;\n\t    }\n\t\n\t    if (delimiters) {\n\t      delimiters = delimiters.split(' ');\n\t      otag = delimiters[0];\n\t      ctag = delimiters[1];\n\t    }\n\t\n\t    for (i = 0; i < len; i++) {\n\t      if (state == IN_TEXT) {\n\t        if (tagChange(otag, text, i)) {\n\t          --i;\n\t          addBuf();\n\t          state = IN_TAG_TYPE;\n\t        } else {\n\t          if (text.charAt(i) == '\\n') {\n\t            filterLine(seenTag);\n\t          } else {\n\t            buf += text.charAt(i);\n\t          }\n\t        }\n\t      } else if (state == IN_TAG_TYPE) {\n\t        i += otag.length - 1;\n\t        tag = Hogan.tags[text.charAt(i + 1)];\n\t        tagType = tag ? text.charAt(i + 1) : '_v';\n\t        if (tagType == '=') {\n\t          i = changeDelimiters(text, i);\n\t          state = IN_TEXT;\n\t        } else {\n\t          if (tag) {\n\t            i++;\n\t          }\n\t          state = IN_TAG;\n\t        }\n\t        seenTag = i;\n\t      } else {\n\t        if (tagChange(ctag, text, i)) {\n\t          tokens.push({tag: tagType, n: trim(buf), otag: otag, ctag: ctag,\n\t                       i: (tagType == '/') ? seenTag - otag.length : i + ctag.length});\n\t          buf = '';\n\t          i += ctag.length - 1;\n\t          state = IN_TEXT;\n\t          if (tagType == '{') {\n\t            if (ctag == '}}') {\n\t              i++;\n\t            } else {\n\t              cleanTripleStache(tokens[tokens.length - 1]);\n\t            }\n\t          }\n\t        } else {\n\t          buf += text.charAt(i);\n\t        }\n\t      }\n\t    }\n\t\n\t    filterLine(seenTag, true);\n\t\n\t    return tokens;\n\t  }\n\t\n\t  function cleanTripleStache(token) {\n\t    if (token.n.substr(token.n.length - 1) === '}') {\n\t      token.n = token.n.substring(0, token.n.length - 1);\n\t    }\n\t  }\n\t\n\t  function trim(s) {\n\t    if (s.trim) {\n\t      return s.trim();\n\t    }\n\t\n\t    return s.replace(/^\\s*|\\s*$/g, '');\n\t  }\n\t\n\t  function tagChange(tag, text, index) {\n\t    if (text.charAt(index) != tag.charAt(0)) {\n\t      return false;\n\t    }\n\t\n\t    for (var i = 1, l = tag.length; i < l; i++) {\n\t      if (text.charAt(index + i) != tag.charAt(i)) {\n\t        return false;\n\t      }\n\t    }\n\t\n\t    return true;\n\t  }\n\t\n\t  // the tags allowed inside super templates\n\t  var allowedInSuper = {'_t': true, '\\n': true, '$': true, '/': true};\n\t\n\t  function buildTree(tokens, kind, stack, customTags) {\n\t    var instructions = [],\n\t        opener = null,\n\t        tail = null,\n\t        token = null;\n\t\n\t    tail = stack[stack.length - 1];\n\t\n\t    while (tokens.length > 0) {\n\t      token = tokens.shift();\n\t\n\t      if (tail && tail.tag == '<' && !(token.tag in allowedInSuper)) {\n\t        throw new Error('Illegal content in < super tag.');\n\t      }\n\t\n\t      if (Hogan.tags[token.tag] <= Hogan.tags['$'] || isOpener(token, customTags)) {\n\t        stack.push(token);\n\t        token.nodes = buildTree(tokens, token.tag, stack, customTags);\n\t      } else if (token.tag == '/') {\n\t        if (stack.length === 0) {\n\t          throw new Error('Closing tag without opener: /' + token.n);\n\t        }\n\t        opener = stack.pop();\n\t        if (token.n != opener.n && !isCloser(token.n, opener.n, customTags)) {\n\t          throw new Error('Nesting error: ' + opener.n + ' vs. ' + token.n);\n\t        }\n\t        opener.end = token.i;\n\t        return instructions;\n\t      } else if (token.tag == '\\n') {\n\t        token.last = (tokens.length == 0) || (tokens[0].tag == '\\n');\n\t      }\n\t\n\t      instructions.push(token);\n\t    }\n\t\n\t    if (stack.length > 0) {\n\t      throw new Error('missing closing tag: ' + stack.pop().n);\n\t    }\n\t\n\t    return instructions;\n\t  }\n\t\n\t  function isOpener(token, tags) {\n\t    for (var i = 0, l = tags.length; i < l; i++) {\n\t      if (tags[i].o == token.n) {\n\t        token.tag = '#';\n\t        return true;\n\t      }\n\t    }\n\t  }\n\t\n\t  function isCloser(close, open, tags) {\n\t    for (var i = 0, l = tags.length; i < l; i++) {\n\t      if (tags[i].c == close && tags[i].o == open) {\n\t        return true;\n\t      }\n\t    }\n\t  }\n\t\n\t  function stringifySubstitutions(obj) {\n\t    var items = [];\n\t    for (var key in obj) {\n\t      items.push('\"' + esc(key) + '\": function(c,p,t,i) {' + obj[key] + '}');\n\t    }\n\t    return \"{ \" + items.join(\",\") + \" }\";\n\t  }\n\t\n\t  function stringifyPartials(codeObj) {\n\t    var partials = [];\n\t    for (var key in codeObj.partials) {\n\t      partials.push('\"' + esc(key) + '\":{name:\"' + esc(codeObj.partials[key].name) + '\", ' + stringifyPartials(codeObj.partials[key]) + \"}\");\n\t    }\n\t    return \"partials: {\" + partials.join(\",\") + \"}, subs: \" + stringifySubstitutions(codeObj.subs);\n\t  }\n\t\n\t  Hogan.stringify = function(codeObj, text, options) {\n\t    return \"{code: function (c,p,i) { \" + Hogan.wrapMain(codeObj.code) + \" },\" + stringifyPartials(codeObj) +  \"}\";\n\t  }\n\t\n\t  var serialNo = 0;\n\t  Hogan.generate = function(tree, text, options) {\n\t    serialNo = 0;\n\t    var context = { code: '', subs: {}, partials: {} };\n\t    Hogan.walk(tree, context);\n\t\n\t    if (options.asString) {\n\t      return this.stringify(context, text, options);\n\t    }\n\t\n\t    return this.makeTemplate(context, text, options);\n\t  }\n\t\n\t  Hogan.wrapMain = function(code) {\n\t    return 'var t=this;t.b(i=i||\"\");' + code + 'return t.fl();';\n\t  }\n\t\n\t  Hogan.template = Hogan.Template;\n\t\n\t  Hogan.makeTemplate = function(codeObj, text, options) {\n\t    var template = this.makePartials(codeObj);\n\t    template.code = new Function('c', 'p', 'i', this.wrapMain(codeObj.code));\n\t    return new this.template(template, text, this, options);\n\t  }\n\t\n\t  Hogan.makePartials = function(codeObj) {\n\t    var key, template = {subs: {}, partials: codeObj.partials, name: codeObj.name};\n\t    for (key in template.partials) {\n\t      template.partials[key] = this.makePartials(template.partials[key]);\n\t    }\n\t    for (key in codeObj.subs) {\n\t      template.subs[key] = new Function('c', 'p', 't', 'i', codeObj.subs[key]);\n\t    }\n\t    return template;\n\t  }\n\t\n\t  function esc(s) {\n\t    return s.replace(rSlash, '\\\\\\\\')\n\t            .replace(rQuot, '\\\\\\\"')\n\t            .replace(rNewline, '\\\\n')\n\t            .replace(rCr, '\\\\r')\n\t            .replace(rLineSep, '\\\\u2028')\n\t            .replace(rParagraphSep, '\\\\u2029');\n\t  }\n\t\n\t  function chooseMethod(s) {\n\t    return (~s.indexOf('.')) ? 'd' : 'f';\n\t  }\n\t\n\t  function createPartial(node, context) {\n\t    var prefix = \"<\" + (context.prefix || \"\");\n\t    var sym = prefix + node.n + serialNo++;\n\t    context.partials[sym] = {name: node.n, partials: {}};\n\t    context.code += 't.b(t.rp(\"' +  esc(sym) + '\",c,p,\"' + (node.indent || '') + '\"));';\n\t    return sym;\n\t  }\n\t\n\t  Hogan.codegen = {\n\t    '#': function(node, context) {\n\t      context.code += 'if(t.s(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,1),' +\n\t                      'c,p,0,' + node.i + ',' + node.end + ',\"' + node.otag + \" \" + node.ctag + '\")){' +\n\t                      't.rs(c,p,' + 'function(c,p,t){';\n\t      Hogan.walk(node.nodes, context);\n\t      context.code += '});c.pop();}';\n\t    },\n\t\n\t    '^': function(node, context) {\n\t      context.code += 'if(!t.s(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,1),c,p,1,0,0,\"\")){';\n\t      Hogan.walk(node.nodes, context);\n\t      context.code += '};';\n\t    },\n\t\n\t    '>': createPartial,\n\t    '<': function(node, context) {\n\t      var ctx = {partials: {}, code: '', subs: {}, inPartial: true};\n\t      Hogan.walk(node.nodes, ctx);\n\t      var template = context.partials[createPartial(node, context)];\n\t      template.subs = ctx.subs;\n\t      template.partials = ctx.partials;\n\t    },\n\t\n\t    '$': function(node, context) {\n\t      var ctx = {subs: {}, code: '', partials: context.partials, prefix: node.n};\n\t      Hogan.walk(node.nodes, ctx);\n\t      context.subs[node.n] = ctx.code;\n\t      if (!context.inPartial) {\n\t        context.code += 't.sub(\"' + esc(node.n) + '\",c,p,i);';\n\t      }\n\t    },\n\t\n\t    '\\n': function(node, context) {\n\t      context.code += write('\"\\\\n\"' + (node.last ? '' : ' + i'));\n\t    },\n\t\n\t    '_v': function(node, context) {\n\t      context.code += 't.b(t.v(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,0)));';\n\t    },\n\t\n\t    '_t': function(node, context) {\n\t      context.code += write('\"' + esc(node.text) + '\"');\n\t    },\n\t\n\t    '{': tripleStache,\n\t\n\t    '&': tripleStache\n\t  }\n\t\n\t  function tripleStache(node, context) {\n\t    context.code += 't.b(t.t(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,0)));';\n\t  }\n\t\n\t  function write(s) {\n\t    return 't.b(' + s + ');';\n\t  }\n\t\n\t  Hogan.walk = function(nodelist, context) {\n\t    var func;\n\t    for (var i = 0, l = nodelist.length; i < l; i++) {\n\t      func = Hogan.codegen[nodelist[i].tag];\n\t      func && func(nodelist[i], context);\n\t    }\n\t    return context;\n\t  }\n\t\n\t  Hogan.parse = function(tokens, text, options) {\n\t    options = options || {};\n\t    return buildTree(tokens, '', [], options.sectionTags || []);\n\t  }\n\t\n\t  Hogan.cache = {};\n\t\n\t  Hogan.cacheKey = function(text, options) {\n\t    return [text, !!options.asString, !!options.disableLambda, options.delimiters, !!options.modelGet].join('||');\n\t  }\n\t\n\t  Hogan.compile = function(text, options) {\n\t    options = options || {};\n\t    var key = Hogan.cacheKey(text, options);\n\t    var template = this.cache[key];\n\t\n\t    if (template) {\n\t      var partials = template.partials;\n\t      for (var name in partials) {\n\t        delete partials[name].instance;\n\t      }\n\t      return template;\n\t    }\n\t\n\t    template = this.generate(this.parse(this.scan(text, options.delimiters), text, options), text, options);\n\t    return this.cache[key] = template;\n\t  }\n\t})( true ? exports : Hogan);\n\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*\n\t *  Copyright 2011 Twitter, Inc.\n\t *  Licensed under the Apache License, Version 2.0 (the \"License\");\n\t *  you may not use this file except in compliance with the License.\n\t *  You may obtain a copy of the License at\n\t *\n\t *  http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t *  Unless required by applicable law or agreed to in writing, software\n\t *  distributed under the License is distributed on an \"AS IS\" BASIS,\n\t *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n\t *  See the License for the specific language governing permissions and\n\t *  limitations under the License.\n\t */\n\t\n\tvar Hogan = {};\n\t\n\t(function (Hogan) {\n\t  Hogan.Template = function (codeObj, text, compiler, options) {\n\t    codeObj = codeObj || {};\n\t    this.r = codeObj.code || this.r;\n\t    this.c = compiler;\n\t    this.options = options || {};\n\t    this.text = text || '';\n\t    this.partials = codeObj.partials || {};\n\t    this.subs = codeObj.subs || {};\n\t    this.buf = '';\n\t  }\n\t\n\t  Hogan.Template.prototype = {\n\t    // render: replaced by generated code.\n\t    r: function (context, partials, indent) { return ''; },\n\t\n\t    // variable escaping\n\t    v: hoganEscape,\n\t\n\t    // triple stache\n\t    t: coerceToString,\n\t\n\t    render: function render(context, partials, indent) {\n\t      return this.ri([context], partials || {}, indent);\n\t    },\n\t\n\t    // render internal -- a hook for overrides that catches partials too\n\t    ri: function (context, partials, indent) {\n\t      return this.r(context, partials, indent);\n\t    },\n\t\n\t    // ensurePartial\n\t    ep: function(symbol, partials) {\n\t      var partial = this.partials[symbol];\n\t\n\t      // check to see that if we've instantiated this partial before\n\t      var template = partials[partial.name];\n\t      if (partial.instance && partial.base == template) {\n\t        return partial.instance;\n\t      }\n\t\n\t      if (typeof template == 'string') {\n\t        if (!this.c) {\n\t          throw new Error(\"No compiler available.\");\n\t        }\n\t        template = this.c.compile(template, this.options);\n\t      }\n\t\n\t      if (!template) {\n\t        return null;\n\t      }\n\t\n\t      // We use this to check whether the partials dictionary has changed\n\t      this.partials[symbol].base = template;\n\t\n\t      if (partial.subs) {\n\t        // Make sure we consider parent template now\n\t        if (!partials.stackText) partials.stackText = {};\n\t        for (key in partial.subs) {\n\t          if (!partials.stackText[key]) {\n\t            partials.stackText[key] = (this.activeSub !== undefined && partials.stackText[this.activeSub]) ? partials.stackText[this.activeSub] : this.text;\n\t          }\n\t        }\n\t        template = createSpecializedPartial(template, partial.subs, partial.partials,\n\t          this.stackSubs, this.stackPartials, partials.stackText);\n\t      }\n\t      this.partials[symbol].instance = template;\n\t\n\t      return template;\n\t    },\n\t\n\t    // tries to find a partial in the current scope and render it\n\t    rp: function(symbol, context, partials, indent) {\n\t      var partial = this.ep(symbol, partials);\n\t      if (!partial) {\n\t        return '';\n\t      }\n\t\n\t      return partial.ri(context, partials, indent);\n\t    },\n\t\n\t    // render a section\n\t    rs: function(context, partials, section) {\n\t      var tail = context[context.length - 1];\n\t\n\t      if (!isArray(tail)) {\n\t        section(context, partials, this);\n\t        return;\n\t      }\n\t\n\t      for (var i = 0; i < tail.length; i++) {\n\t        context.push(tail[i]);\n\t        section(context, partials, this);\n\t        context.pop();\n\t      }\n\t    },\n\t\n\t    // maybe start a section\n\t    s: function(val, ctx, partials, inverted, start, end, tags) {\n\t      var pass;\n\t\n\t      if (isArray(val) && val.length === 0) {\n\t        return false;\n\t      }\n\t\n\t      if (typeof val == 'function') {\n\t        val = this.ms(val, ctx, partials, inverted, start, end, tags);\n\t      }\n\t\n\t      pass = !!val;\n\t\n\t      if (!inverted && pass && ctx) {\n\t        ctx.push((typeof val == 'object') ? val : ctx[ctx.length - 1]);\n\t      }\n\t\n\t      return pass;\n\t    },\n\t\n\t    // find values with dotted names\n\t    d: function(key, ctx, partials, returnFound) {\n\t      var found,\n\t          names = key.split('.'),\n\t          val = this.f(names[0], ctx, partials, returnFound),\n\t          doModelGet = this.options.modelGet,\n\t          cx = null;\n\t\n\t      if (key === '.' && isArray(ctx[ctx.length - 2])) {\n\t        val = ctx[ctx.length - 1];\n\t      } else {\n\t        for (var i = 1; i < names.length; i++) {\n\t          found = findInScope(names[i], val, doModelGet);\n\t          if (found !== undefined) {\n\t            cx = val;\n\t            val = found;\n\t          } else {\n\t            val = '';\n\t          }\n\t        }\n\t      }\n\t\n\t      if (returnFound && !val) {\n\t        return false;\n\t      }\n\t\n\t      if (!returnFound && typeof val == 'function') {\n\t        ctx.push(cx);\n\t        val = this.mv(val, ctx, partials);\n\t        ctx.pop();\n\t      }\n\t\n\t      return val;\n\t    },\n\t\n\t    // find values with normal names\n\t    f: function(key, ctx, partials, returnFound) {\n\t      var val = false,\n\t          v = null,\n\t          found = false,\n\t          doModelGet = this.options.modelGet;\n\t\n\t      for (var i = ctx.length - 1; i >= 0; i--) {\n\t        v = ctx[i];\n\t        val = findInScope(key, v, doModelGet);\n\t        if (val !== undefined) {\n\t          found = true;\n\t          break;\n\t        }\n\t      }\n\t\n\t      if (!found) {\n\t        return (returnFound) ? false : \"\";\n\t      }\n\t\n\t      if (!returnFound && typeof val == 'function') {\n\t        val = this.mv(val, ctx, partials);\n\t      }\n\t\n\t      return val;\n\t    },\n\t\n\t    // higher order templates\n\t    ls: function(func, cx, partials, text, tags) {\n\t      var oldTags = this.options.delimiters;\n\t\n\t      this.options.delimiters = tags;\n\t      this.b(this.ct(coerceToString(func.call(cx, text)), cx, partials));\n\t      this.options.delimiters = oldTags;\n\t\n\t      return false;\n\t    },\n\t\n\t    // compile text\n\t    ct: function(text, cx, partials) {\n\t      if (this.options.disableLambda) {\n\t        throw new Error('Lambda features disabled.');\n\t      }\n\t      return this.c.compile(text, this.options).render(cx, partials);\n\t    },\n\t\n\t    // template result buffering\n\t    b: function(s) { this.buf += s; },\n\t\n\t    fl: function() { var r = this.buf; this.buf = ''; return r; },\n\t\n\t    // method replace section\n\t    ms: function(func, ctx, partials, inverted, start, end, tags) {\n\t      var textSource,\n\t          cx = ctx[ctx.length - 1],\n\t          result = func.call(cx);\n\t\n\t      if (typeof result == 'function') {\n\t        if (inverted) {\n\t          return true;\n\t        } else {\n\t          textSource = (this.activeSub && this.subsText && this.subsText[this.activeSub]) ? this.subsText[this.activeSub] : this.text;\n\t          return this.ls(result, cx, partials, textSource.substring(start, end), tags);\n\t        }\n\t      }\n\t\n\t      return result;\n\t    },\n\t\n\t    // method replace variable\n\t    mv: function(func, ctx, partials) {\n\t      var cx = ctx[ctx.length - 1];\n\t      var result = func.call(cx);\n\t\n\t      if (typeof result == 'function') {\n\t        return this.ct(coerceToString(result.call(cx)), cx, partials);\n\t      }\n\t\n\t      return result;\n\t    },\n\t\n\t    sub: function(name, context, partials, indent) {\n\t      var f = this.subs[name];\n\t      if (f) {\n\t        this.activeSub = name;\n\t        f(context, partials, this, indent);\n\t        this.activeSub = false;\n\t      }\n\t    }\n\t\n\t  };\n\t\n\t  //Find a key in an object\n\t  function findInScope(key, scope, doModelGet) {\n\t    var val;\n\t\n\t    if (scope && typeof scope == 'object') {\n\t\n\t      if (scope[key] !== undefined) {\n\t        val = scope[key];\n\t\n\t      // try lookup with get for backbone or similar model data\n\t      } else if (doModelGet && scope.get && typeof scope.get == 'function') {\n\t        val = scope.get(key);\n\t      }\n\t    }\n\t\n\t    return val;\n\t  }\n\t\n\t  function createSpecializedPartial(instance, subs, partials, stackSubs, stackPartials, stackText) {\n\t    function PartialTemplate() {};\n\t    PartialTemplate.prototype = instance;\n\t    function Substitutions() {};\n\t    Substitutions.prototype = instance.subs;\n\t    var key;\n\t    var partial = new PartialTemplate();\n\t    partial.subs = new Substitutions();\n\t    partial.subsText = {};  //hehe. substext.\n\t    partial.buf = '';\n\t\n\t    stackSubs = stackSubs || {};\n\t    partial.stackSubs = stackSubs;\n\t    partial.subsText = stackText;\n\t    for (key in subs) {\n\t      if (!stackSubs[key]) stackSubs[key] = subs[key];\n\t    }\n\t    for (key in stackSubs) {\n\t      partial.subs[key] = stackSubs[key];\n\t    }\n\t\n\t    stackPartials = stackPartials || {};\n\t    partial.stackPartials = stackPartials;\n\t    for (key in partials) {\n\t      if (!stackPartials[key]) stackPartials[key] = partials[key];\n\t    }\n\t    for (key in stackPartials) {\n\t      partial.partials[key] = stackPartials[key];\n\t    }\n\t\n\t    return partial;\n\t  }\n\t\n\t  var rAmp = /&/g,\n\t      rLt = /</g,\n\t      rGt = />/g,\n\t      rApos = /\\'/g,\n\t      rQuot = /\\\"/g,\n\t      hChars = /[&<>\\\"\\']/;\n\t\n\t  function coerceToString(val) {\n\t    return String((val === null || val === undefined) ? '' : val);\n\t  }\n\t\n\t  function hoganEscape(str) {\n\t    str = coerceToString(str);\n\t    return hChars.test(str) ?\n\t      str\n\t        .replace(rAmp, '&amp;')\n\t        .replace(rLt, '&lt;')\n\t        .replace(rGt, '&gt;')\n\t        .replace(rApos, '&#39;')\n\t        .replace(rQuot, '&quot;') :\n\t      str;\n\t  }\n\t\n\t  var isArray = Array.isArray || function(a) {\n\t    return Object.prototype.toString.call(a) === '[object Array]';\n\t  };\n\t\n\t})( true ? exports : Hogan);\n\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x2, _x3, _x4) { var _again = true; _function: while (_again) { var object = _x2, property = _x3, receiver = _x4; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x2 = parent; _x3 = property; _x4 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t__webpack_require__(18);\n\t\n\tvar _PropertyBase2 = __webpack_require__(21);\n\t\n\tvar _PropertyBase3 = _interopRequireDefault(_PropertyBase2);\n\t\n\t__webpack_require__(28);\n\t\n\tvar tpl_property = __webpack_require__(29);\n\t\n\tvar PropertyColor = (function (_PropertyBase) {\n\t  _inherits(PropertyColor, _PropertyBase);\n\t\n\t  function PropertyColor(instance_property, lineData, editor) {\n\t    var key_val = arguments.length <= 3 || arguments[3] === undefined ? false : arguments[3];\n\t\n\t    _classCallCheck(this, PropertyColor);\n\t\n\t    _get(Object.getPrototypeOf(PropertyColor.prototype), 'constructor', this).call(this, instance_property, lineData, editor, key_val);\n\t    this.onInputChange = this.onInputChange.bind(this);\n\t    this.$input = this.$el.find('input');\n\t  }\n\t\n\t  _createClass(PropertyColor, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      var _this = this;\n\t\n\t      _get(Object.getPrototypeOf(PropertyColor.prototype), 'render', this).call(this);\n\t      // By default assign the property default value\n\t      var val = this.getCurrentVal();\n\t\n\t      var data = {\n\t        id: this.instance_property.name, // \"circleRadius\" instead of \"circle radius\"\n\t        label: this.instance_property.label || this.instance_property.name,\n\t        val: val\n\t      };\n\t\n\t      var view = tpl_property(data);\n\t      this.$el = $(view);\n\t      this.$el.find('.property__key').click(this.onKeyClick);\n\t\n\t      var $input = this.$el.find('input');\n\t\n\t      $input.spectrum({\n\t        allowEmpty: false,\n\t        showAlpha: true,\n\t        clickoutFiresChange: false,\n\t        preferredFormat: \"rgb\",\n\t        change: function change() {\n\t          _this.editor.undoManager.addState();\n\t        },\n\t        move: function move(color) {\n\t          if (color._a == 1) {\n\t            $input.val(color.toHexString());\n\t          } else {\n\t            $input.val(color.toRgbString());\n\t          }\n\t\n\t          _this.onInputChange();\n\t        }\n\t      });\n\t\n\t      $input.change(this.onInputChange);\n\t    }\n\t  }, {\n\t    key: 'remove',\n\t    value: function remove() {\n\t      _get(Object.getPrototypeOf(PropertyColor.prototype), 'remove', this).call(this);\n\t      this.$el.find('input').spectrum('destroy');\n\t      delete this.$el;\n\t      delete this.$input;\n\t    }\n\t  }, {\n\t    key: 'update',\n\t    value: function update() {\n\t      _get(Object.getPrototypeOf(PropertyColor.prototype), 'update', this).call(this);\n\t      var val = this.getCurrentVal();\n\t      this.$input.val(val);\n\t      this.$input.spectrum('set', val);\n\t    }\n\t  }]);\n\t\n\t  return PropertyColor;\n\t})(_PropertyBase3['default']);\n\t\n\texports['default'] = PropertyColor;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 28 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_28__;\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar H = __webpack_require__(24);\n\tmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--number\\\">\");t.b(\"\\n\" + i);t.b(\"  <button class=\\\"property__key\\\"></button>\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">\");t.b(t.v(t.f(\"label\",c,p,0)));t.b(\"</label>\");t.b(\"\\n\" + i);t.b(\"  <input id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__input\\\" value=\\\"\");t.b(t.v(t.f(\"val\",c,p,0)));t.b(\"\\\" />\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--number\\\">\\n  <button class=\\\"property__key\\\"></button>\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">{{label}}</label>\\n  <input id=\\\"{{id}}\\\" class=\\\"property__input\\\" value=\\\"{{val}}\\\" />\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n/***/ },\n/* 30 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\t__webpack_require__(18);\n\t\n\tvar tpl_property = __webpack_require__(31);\n\t\n\tvar PropertyTween = (function () {\n\t  // instance_property: The current property on the data object.\n\t  // lineData: The line data object.\n\t\n\t  function PropertyTween(instance_property, lineData, editor) {\n\t    var key_val = arguments.length <= 3 || arguments[3] === undefined ? false : arguments[3];\n\t    var timeline = arguments.length <= 4 || arguments[4] === undefined ? false : arguments[4];\n\t\n\t    _classCallCheck(this, PropertyTween);\n\t\n\t    this.instance_property = instance_property;\n\t    this.lineData = lineData;\n\t    this.editor = editor;\n\t    this.key_val = key_val;\n\t    this.timeline = timeline;\n\t\n\t    this.onChange = this.onChange.bind(this);\n\t\n\t    this.timer = this.editor.timer;\n\t    this.$time = false;\n\t    this.$el = false;\n\t    this.render();\n\t  }\n\t\n\t  _createClass(PropertyTween, [{\n\t    key: 'remove',\n\t    value: function remove() {\n\t      delete this.$el;\n\t      delete this.instance_property;\n\t      delete this.lineData;\n\t      delete this.editor;\n\t      delete this.key_val;\n\t      delete this.timeline;\n\t\n\t      delete this.timer;\n\t      delete this.$time;\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var _this = this;\n\t\n\t      var self = this;\n\t      if (!this.key_val.ease) {\n\t        this.key_val.ease = \"Quad.easeOut\";\n\t      }\n\t      var data = {\n\t        id: this.instance_property.name + \"_tween\",\n\t        val: this.key_val.ease,\n\t        time: this.key_val.time.toFixed(3),\n\t        options: ['Linear.easeNone'],\n\t        selected: function selected() {\n\t          if (this.toString() === self.key_val.ease) {\n\t            return 'selected';\n\t          } else {\n\t            return '';\n\t          }\n\t        }\n\t      };\n\t\n\t      var tweens = [\"Quad\", \"Cubic\", \"Quart\", \"Quint\", \"Strong\"];\n\t      for (var i = 0; i < tweens.length; i++) {\n\t        var tween = tweens[i];\n\t        data.options.push(tween + \".easeOut\");\n\t        data.options.push(tween + \".easeIn\");\n\t        data.options.push(tween + \".easeInOut\");\n\t      }\n\t\n\t      this.$el = $(tpl_property(data));\n\t      this.$time = this.$el.find('.property__key-time strong');\n\t      this.$time.keypress(function (e) {\n\t        if (e.charCode == 13) {\n\t          // Enter\n\t          e.preventDefault();\n\t          _this.$time.blur();\n\t          _this.updateKeyTime(_this.$time.text());\n\t        }\n\t      });\n\t\n\t      this.$time.on('click', function () {\n\t        return document.execCommand('selectAll', false, null);\n\t      });\n\t      this.$el.find('select').change(this.onChange);\n\t    }\n\t  }, {\n\t    key: 'updateKeyTime',\n\t    value: function updateKeyTime(time) {\n\t      time = parseFloat(time);\n\t      if (isNaN(time)) {\n\t        time = this.key_val.time;\n\t      }\n\t      this.$time.text(time);\n\t      this.key_val.time = time;\n\t      this.onChange();\n\t    }\n\t  }, {\n\t    key: 'onChange',\n\t    value: function onChange() {\n\t      var ease = this.$el.find('select').val();\n\t      this.key_val.ease = ease;\n\t      this.editor.undoManager.addState();\n\t      this.lineData._isDirty = true;\n\t      this.timeline._isDirty = true;\n\t    }\n\t  }, {\n\t    key: 'update',\n\t    value: function update() {\n\t      // todo: use mustache instead...\n\t      this.$time.html(this.key_val.time.toFixed(3));\n\t    }\n\t  }]);\n\t\n\t  return PropertyTween;\n\t})();\n\t\n\texports['default'] = PropertyTween;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar H = __webpack_require__(24);\n\tmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--tween\\\">\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">easing</label>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"property__select\\\">\");t.b(\"\\n\" + i);t.b(\"    <div class=\\\"custom-select\\\">\");t.b(\"\\n\" + i);t.b(\"      <select id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\">\");t.b(\"\\n\" + i);if(t.s(t.f(\"options\",c,p,1),c,p,0,212,279,\"{{ }}\")){t.rs(c,p,function(c,p,t){t.b(\"        <option value=\\\"\");t.b(t.v(t.d(\".\",c,p,0)));t.b(\"\\\" \");t.b(t.v(t.f(\"selected\",c,p,0)));t.b(\">\");t.b(t.v(t.d(\".\",c,p,0)));t.b(\"</option>\");t.b(\"\\n\" + i);});c.pop();}t.b(\"      </select>\");t.b(\"\\n\" + i);t.b(\"    </div>\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\" + i);t.b(\"<div class=\\\"properties-editor__actions actions\\\">\");t.b(\"\\n\" + i);t.b(\"  <span class=\\\"property__key-time\\\">key at <strong class=\\\"property__key-input\\\" contenteditable=\\\"true\\\">\");t.b(t.v(t.f(\"time\",c,p,0)));t.b(\"</strong> seconds</span>\");t.b(\"\\n\" + i);t.b(\"  <a href=\\\"#\\\" class=\\\"actions__item\\\" data-action-remove>Remove key</a>\");t.b(\"\\n\" + i);t.b(\"</div>\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--tween\\\">\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">easing</label>\\n  <div class=\\\"property__select\\\">\\n    <div class=\\\"custom-select\\\">\\n      <select id=\\\"{{id}}\\\">\\n        {{#options}}\\n        <option value=\\\"{{.}}\\\" {{selected}}>{{.}}</option>\\n        {{/options}}\\n      </select>\\n    </div>\\n  </div>\\n</div>\\n<div class=\\\"properties-editor__actions actions\\\">\\n  <span class=\\\"property__key-time\\\">key at <strong class=\\\"property__key-input\\\" contenteditable=\\\"true\\\">{{time}}</strong> seconds</span>\\n  <a href=\\\"#\\\" class=\\\"actions__item\\\" data-action-remove>Remove key</a>\\n</div>\", H); return T.render.apply(T, arguments); };\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar H = __webpack_require__(24);\n\tmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"properties-editor\\\">\");t.b(\"\\n\" + i);t.b(\"  <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle-side\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"properties-editor__main\\\"></div>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"properties-editor\\\">\\n  <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle-side\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\\n  <div class=\\\"properties-editor__main\\\"></div>\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar saveAs = __webpack_require__(34);\n\t\n\tvar EditorMenu = (function () {\n\t  function EditorMenu(tweenTime, $timeline, editor) {\n\t    _classCallCheck(this, EditorMenu);\n\t\n\t    this.tweenTime = tweenTime;\n\t    this.$timeline = $timeline;\n\t    this.editor = editor;\n\t    this.timer = this.tweenTime.timer;\n\t    this.initExport();\n\t    this.initToggle();\n\t  }\n\t\n\t  _createClass(EditorMenu, [{\n\t    key: 'initToggle',\n\t    value: function initToggle() {\n\t      var parentElement = this.editor.el;\n\t      var timelineClosed = false;\n\t      var $toggleLink = this.$timeline.find('[data-action=\"toggle\"]');\n\t      $toggleLink.click(function (e) {\n\t        e.preventDefault();\n\t        timelineClosed = !timelineClosed;\n\t        $toggleLink.toggleClass('menu-item--toggle-up', timelineClosed);\n\t        parentElement.toggleClass('timeline-is-closed', timelineClosed);\n\t        return window.dispatchEvent(new Event('resize'));\n\t      });\n\t      var $toggleLinkSide = $('.properties-editor', parentElement).find('[data-action=\"toggle\"]');\n\t      $toggleLinkSide.click(function (e) {\n\t        var propertiesClosed;\n\t        e.preventDefault();\n\t        propertiesClosed = !parentElement.hasClass('properties-is-closed');\n\t        parentElement.toggleClass('properties-is-closed', propertiesClosed);\n\t        return window.dispatchEvent(new Event('resize'));\n\t      });\n\t    }\n\t  }, {\n\t    key: 'initExport',\n\t    value: function initExport() {\n\t      var exporter = this.editor.exporter;\n\t      this.$timeline.find('[data-action=\"export\"]').click(function (e) {\n\t        e.preventDefault();\n\t        var data = exporter.getJSON();\n\t        var blob = new Blob([data], {\n\t          \"type\": \"text/json;charset=utf-8\"\n\t        });\n\t        saveAs(blob, 'data.json');\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return EditorMenu;\n\t})();\n\t\n\texports['default'] = EditorMenu;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {/* FileSaver.js\n\t * A saveAs() FileSaver implementation.\n\t * 2014-08-29\n\t *\n\t * By Eli Grey, http://eligrey.com\n\t * License: X11/MIT\n\t *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n\t */\n\t\n\t/*global self */\n\t/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\n\t\n\t/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\n\t\n\tvar saveAs = saveAs\n\t  // IE 10+ (native saveAs)\n\t  || (typeof navigator !== \"undefined\" &&\n\t      navigator.msSaveOrOpenBlob && navigator.msSaveOrOpenBlob.bind(navigator))\n\t  // Everyone else\n\t  || (function(view) {\n\t\t\"use strict\";\n\t\t// IE <10 is explicitly unsupported\n\t\tif (typeof navigator !== \"undefined\" &&\n\t\t    /MSIE [1-9]\\./.test(navigator.userAgent)) {\n\t\t\treturn;\n\t\t}\n\t\tvar\n\t\t\t  doc = view.document\n\t\t\t  // only get URL when necessary in case Blob.js hasn't overridden it yet\n\t\t\t, get_URL = function() {\n\t\t\t\treturn view.URL || view.webkitURL || view;\n\t\t\t}\n\t\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\n\t\t\t, can_use_save_link = \"download\" in save_link\n\t\t\t, click = function(node) {\n\t\t\t\tvar event = doc.createEvent(\"MouseEvents\");\n\t\t\t\tevent.initMouseEvent(\n\t\t\t\t\t\"click\", true, false, view, 0, 0, 0, 0, 0\n\t\t\t\t\t, false, false, false, false, 0, null\n\t\t\t\t);\n\t\t\t\tnode.dispatchEvent(event);\n\t\t\t}\n\t\t\t, webkit_req_fs = view.webkitRequestFileSystem\n\t\t\t, req_fs = view.requestFileSystem || webkit_req_fs || view.mozRequestFileSystem\n\t\t\t, throw_outside = function(ex) {\n\t\t\t\t(view.setImmediate || view.setTimeout)(function() {\n\t\t\t\t\tthrow ex;\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t\t, force_saveable_type = \"application/octet-stream\"\n\t\t\t, fs_min_size = 0\n\t\t\t// See https://code.google.com/p/chromium/issues/detail?id=375297#c7 for\n\t\t\t// the reasoning behind the timeout and revocation flow\n\t\t\t, arbitrary_revoke_timeout = 10\n\t\t\t, revoke = function(file) {\n\t\t\t\tvar revoker = function() {\n\t\t\t\t\tif (typeof file === \"string\") { // file is an object URL\n\t\t\t\t\t\tget_URL().revokeObjectURL(file);\n\t\t\t\t\t} else { // file is a File\n\t\t\t\t\t\tfile.remove();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tif (view.chrome) {\n\t\t\t\t\trevoker();\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(revoker, arbitrary_revoke_timeout);\n\t\t\t\t}\n\t\t\t}\n\t\t\t, dispatch = function(filesaver, event_types, event) {\n\t\t\t\tevent_types = [].concat(event_types);\n\t\t\t\tvar i = event_types.length;\n\t\t\t\twhile (i--) {\n\t\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\n\t\t\t\t\tif (typeof listener === \"function\") {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\n\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\tthrow_outside(ex);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t, FileSaver = function(blob, name) {\n\t\t\t\t// First try a.download, then web filesystem, then object URLs\n\t\t\t\tvar\n\t\t\t\t\t  filesaver = this\n\t\t\t\t\t, type = blob.type\n\t\t\t\t\t, blob_changed = false\n\t\t\t\t\t, object_url\n\t\t\t\t\t, target_view\n\t\t\t\t\t, dispatch_all = function() {\n\t\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\n\t\t\t\t\t}\n\t\t\t\t\t// on any filesys errors revert to saving with object URLs\n\t\t\t\t\t, fs_error = function() {\n\t\t\t\t\t\t// don't create more object URLs than needed\n\t\t\t\t\t\tif (blob_changed || !object_url) {\n\t\t\t\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (target_view) {\n\t\t\t\t\t\t\ttarget_view.location.href = object_url;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar new_tab = view.open(object_url, \"_blank\");\n\t\t\t\t\t\t\tif (new_tab == undefined && typeof safari !== \"undefined\") {\n\t\t\t\t\t\t\t\t//Apple do not allow window.open, see http://bit.ly/1kZffRI\n\t\t\t\t\t\t\t\tview.location.href = object_url\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\tdispatch_all();\n\t\t\t\t\t\trevoke(object_url);\n\t\t\t\t\t}\n\t\t\t\t\t, abortable = function(func) {\n\t\t\t\t\t\treturn function() {\n\t\t\t\t\t\t\tif (filesaver.readyState !== filesaver.DONE) {\n\t\t\t\t\t\t\t\treturn func.apply(this, arguments);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\t, create_if_not_found = {create: true, exclusive: false}\n\t\t\t\t\t, slice\n\t\t\t\t;\n\t\t\t\tfilesaver.readyState = filesaver.INIT;\n\t\t\t\tif (!name) {\n\t\t\t\t\tname = \"download\";\n\t\t\t\t}\n\t\t\t\tif (can_use_save_link) {\n\t\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\t\tsave_link.href = object_url;\n\t\t\t\t\tsave_link.download = name;\n\t\t\t\t\tclick(save_link);\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// Object and web filesystem URLs have a problem saving in Google Chrome when\n\t\t\t\t// viewed in a tab, so I force save with application/octet-stream\n\t\t\t\t// http://code.google.com/p/chromium/issues/detail?id=91158\n\t\t\t\t// Update: Google errantly closed 91158, I submitted it again:\n\t\t\t\t// https://code.google.com/p/chromium/issues/detail?id=389642\n\t\t\t\tif (view.chrome && type && type !== force_saveable_type) {\n\t\t\t\t\tslice = blob.slice || blob.webkitSlice;\n\t\t\t\t\tblob = slice.call(blob, 0, blob.size, force_saveable_type);\n\t\t\t\t\tblob_changed = true;\n\t\t\t\t}\n\t\t\t\t// Since I can't be sure that the guessed media type will trigger a download\n\t\t\t\t// in WebKit, I append .download to the filename.\n\t\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=65440\n\t\t\t\tif (webkit_req_fs && name !== \"download\") {\n\t\t\t\t\tname += \".download\";\n\t\t\t\t}\n\t\t\t\tif (type === force_saveable_type || webkit_req_fs) {\n\t\t\t\t\ttarget_view = view;\n\t\t\t\t}\n\t\t\t\tif (!req_fs) {\n\t\t\t\t\tfs_error();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfs_min_size += blob.size;\n\t\t\t\treq_fs(view.TEMPORARY, fs_min_size, abortable(function(fs) {\n\t\t\t\t\tfs.root.getDirectory(\"saved\", create_if_not_found, abortable(function(dir) {\n\t\t\t\t\t\tvar save = function() {\n\t\t\t\t\t\t\tdir.getFile(name, create_if_not_found, abortable(function(file) {\n\t\t\t\t\t\t\t\tfile.createWriter(abortable(function(writer) {\n\t\t\t\t\t\t\t\t\twriter.onwriteend = function(event) {\n\t\t\t\t\t\t\t\t\t\ttarget_view.location.href = file.toURL();\n\t\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\t\t\t\tdispatch(filesaver, \"writeend\", event);\n\t\t\t\t\t\t\t\t\t\trevoke(file);\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\twriter.onerror = function() {\n\t\t\t\t\t\t\t\t\t\tvar error = writer.error;\n\t\t\t\t\t\t\t\t\t\tif (error.code !== error.ABORT_ERR) {\n\t\t\t\t\t\t\t\t\t\t\tfs_error();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\"writestart progress write abort\".split(\" \").forEach(function(event) {\n\t\t\t\t\t\t\t\t\t\twriter[\"on\" + event] = filesaver[\"on\" + event];\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\twriter.write(blob);\n\t\t\t\t\t\t\t\t\tfilesaver.abort = function() {\n\t\t\t\t\t\t\t\t\t\twriter.abort();\n\t\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.WRITING;\n\t\t\t\t\t\t\t\t}), fs_error);\n\t\t\t\t\t\t\t}), fs_error);\n\t\t\t\t\t\t};\n\t\t\t\t\t\tdir.getFile(name, {create: false}, abortable(function(file) {\n\t\t\t\t\t\t\t// delete file if it already exists\n\t\t\t\t\t\t\tfile.remove();\n\t\t\t\t\t\t\tsave();\n\t\t\t\t\t\t}), abortable(function(ex) {\n\t\t\t\t\t\t\tif (ex.code === ex.NOT_FOUND_ERR) {\n\t\t\t\t\t\t\t\tsave();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfs_error();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t}), fs_error);\n\t\t\t\t}), fs_error);\n\t\t\t}\n\t\t\t, FS_proto = FileSaver.prototype\n\t\t\t, saveAs = function(blob, name) {\n\t\t\t\treturn new FileSaver(blob, name);\n\t\t\t}\n\t\t;\n\t\tFS_proto.abort = function() {\n\t\t\tvar filesaver = this;\n\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\tdispatch(filesaver, \"abort\");\n\t\t};\n\t\tFS_proto.readyState = FS_proto.INIT = 0;\n\t\tFS_proto.WRITING = 1;\n\t\tFS_proto.DONE = 2;\n\t\n\t\tFS_proto.error =\n\t\tFS_proto.onwritestart =\n\t\tFS_proto.onprogress =\n\t\tFS_proto.onwrite =\n\t\tFS_proto.onabort =\n\t\tFS_proto.onerror =\n\t\tFS_proto.onwriteend =\n\t\t\tnull;\n\t\n\t\treturn saveAs;\n\t}(\n\t\t   typeof self !== \"undefined\" && self\n\t\t|| typeof window !== \"undefined\" && window\n\t\t|| this.content\n\t));\n\t// `self` is undefined in Firefox for Android content script context\n\t// while `this` is nsIContentFrameMessageManager\n\t// with an attribute `content` that corresponds to the window\n\t\n\tif (typeof module !== \"undefined\" && module !== null) {\n\t  module.exports = saveAs;\n\t} else if ((\"function\" !== \"undefined\" && __webpack_require__(36) !== null) && (__webpack_require__(37) != null)) {\n\t  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function() {\n\t    return saveAs;\n\t  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t}\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(35)(module)))\n\n/***/ },\n/* 35 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(module) {\r\n\t\tif(!module.webpackPolyfill) {\r\n\t\t\tmodule.deprecate = function() {};\r\n\t\t\tmodule.paths = [];\r\n\t\t\t// module.parent = undefined by default\r\n\t\t\tmodule.children = [];\r\n\t\t\tmodule.webpackPolyfill = 1;\r\n\t\t}\r\n\t\treturn module;\r\n\t}\r\n\n\n/***/ },\n/* 36 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function() { throw new Error(\"define cannot be used indirect\"); };\r\n\n\n/***/ },\n/* 37 */\n/***/ function(module, exports) {\n\n\t/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {module.exports = __webpack_amd_options__;\r\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, {}))\n\n/***/ },\n/* 38 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar EditorControls = (function () {\n\t  function EditorControls(tweenTime, $timeline) {\n\t    var _this = this;\n\t\n\t    _classCallCheck(this, EditorControls);\n\t\n\t    this.tweenTime = tweenTime;\n\t    this.$timeline = $timeline;\n\t    this.timer = this.tweenTime.timer;\n\t    this.$time = this.$timeline.find('.control--time');\n\t    this.$time_end = this.$timeline.find('.control--time-end');\n\t    this.initControls();\n\t    this.$time_end.val(this.tweenTime.timer.getDuration());\n\t\n\t    $(document).keypress(function (e) {\n\t      if (e.charCode == 32) {\n\t        // Space\n\t        _this.playPause();\n\t      }\n\t    });\n\t  }\n\t\n\t  _createClass(EditorControls, [{\n\t    key: 'playPause',\n\t    value: function playPause() {\n\t      var $play_pause;\n\t      this.timer.toggle();\n\t      $play_pause = this.$timeline.find('.control--play-pause');\n\t      $play_pause.toggleClass('icon-pause', this.timer.is_playing);\n\t      $play_pause.toggleClass('icon-play', !this.timer.is_playing);\n\t    }\n\t  }, {\n\t    key: 'initControls',\n\t    value: function initControls() {\n\t      var _this2 = this;\n\t\n\t      var $play_pause = this.$timeline.find('.control--play-pause');\n\t      $play_pause.click(function (e) {\n\t        e.preventDefault();\n\t        _this2.playPause();\n\t      });\n\t      var $bt_first = this.$timeline.find('.control--first');\n\t      $bt_first.click(function (e) {\n\t        e.preventDefault();\n\t        _this2.timer.seek([0]);\n\t      });\n\t      var $bt_last = this.$timeline.find('.control--last');\n\t      $bt_last.click(function (e) {\n\t        e.preventDefault();\n\t        var total = _this2.tweenTime.getTotalDuration();\n\t        _this2.timer.seek([total * 1000]);\n\t      });\n\t      this.$time.change(function () {\n\t        var seconds = parseFloat(_this2.$time.val(), 10) * 1000;\n\t        _this2.timer.seek([seconds]);\n\t      });\n\t      this.$time_end.change(function () {\n\t        var seconds = parseFloat(_this2.$time_end.val(), 10);\n\t        _this2.timer.setDuration(seconds);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render(time, time_changed) {\n\t      if (time_changed) {\n\t        var seconds = time / 1000;\n\t        this.$time.val(seconds.toFixed(3));\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return EditorControls;\n\t})();\n\t\n\texports['default'] = EditorControls;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 39 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar d3 = __webpack_require__(9);\n\tvar Signals = __webpack_require__(3);\n\tvar _ = __webpack_require__(6);\n\t\n\tvar SelectionManager = (function () {\n\t  function SelectionManager(tweenTime) {\n\t    _classCallCheck(this, SelectionManager);\n\t\n\t    this.tweenTime = tweenTime;\n\t    this.selection = [];\n\t    this.onSelect = new Signals.Signal();\n\t  }\n\t\n\t  _createClass(SelectionManager, [{\n\t    key: 'select',\n\t    value: function select(item) {\n\t      var addToSelection = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];\n\t\n\t      this.addDataRelations();\n\t\n\t      if (!addToSelection) {\n\t        this.selection = [];\n\t      }\n\t      if (item instanceof Array) {\n\t        for (var i = 0; i < item.length; i++) {\n\t          var el = item[i];\n\t          this.selection.push(el);\n\t        }\n\t      } else {\n\t        this.selection.push(item);\n\t      }\n\t\n\t      this.removeDuplicates();\n\t      this.highlightItems();\n\t      this.sortSelection();\n\t      this.onSelect.dispatch(this.selection, addToSelection);\n\t    }\n\t  }, {\n\t    key: 'getSelection',\n\t    value: function getSelection() {\n\t      return this.selection;\n\t    }\n\t  }, {\n\t    key: 'removeDuplicates',\n\t    value: function removeDuplicates() {\n\t      var result = [];\n\t      for (var i = 0; i < this.selection.length; i++) {\n\t        var item = this.selection[i];\n\t        var found = false;\n\t        for (var j = 0; j < result.length; j++) {\n\t          var item2 = result[j];\n\t          if (_.isEqual(item, item2)) {\n\t            found = true;\n\t            break;\n\t          }\n\t        }\n\t        if (found === false) {\n\t          result.push(item);\n\t        }\n\t      }\n\t      this.selection = result;\n\t    }\n\t  }, {\n\t    key: 'removeItem',\n\t    value: function removeItem(item) {\n\t      var index = this.selection.indexOf(item);\n\t      if (index > -1) {\n\t        this.selection.splice(index, 1);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'sortSelection',\n\t    value: function sortSelection() {\n\t      var compare = function compare(a, b) {\n\t        if (!a.time || !b.time) {\n\t          return 0;\n\t        }\n\t        if (a.time < b.time) {\n\t          return -1;\n\t        }\n\t        if (a.time > b.time) {\n\t          return 1;\n\t        }\n\t        return 0;\n\t      };\n\t      this.selection = this.selection.sort(compare);\n\t    }\n\t  }, {\n\t    key: 'reset',\n\t    value: function reset() {\n\t      this.selection = [];\n\t      this.highlightItems();\n\t      this.onSelect.dispatch(this.selection, false);\n\t    }\n\t  }, {\n\t    key: 'triggerSelect',\n\t    value: function triggerSelect() {\n\t      this.onSelect.dispatch(this.selection, false);\n\t    }\n\t  }, {\n\t    key: 'addDataRelations',\n\t    value: function addDataRelations() {\n\t      // We need to add some parent references in main data object.\n\t      // Add a _property reference to each keys.\n\t      // Add a _line property for each references.\n\t      var data = this.tweenTime.data;\n\t      for (var lineIndex = 0; lineIndex < data.length; lineIndex++) {\n\t        var line = data[lineIndex];\n\t        for (var propIndex = 0; propIndex < line.properties.length; propIndex++) {\n\t          var property = line.properties[propIndex];\n\t          property._line = line;\n\t          for (var keyIndex = 0; keyIndex < property.keys.length; keyIndex++) {\n\t            var key = property.keys[keyIndex];\n\t            key._property = property;\n\t          }\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: 'highlightItems',\n\t    value: function highlightItems() {\n\t      d3.selectAll('.bar--selected').classed('bar--selected', false);\n\t      d3.selectAll('.key--selected').classed('key--selected', false);\n\t\n\t      for (var i = 0; i < this.selection.length; i++) {\n\t        var data = this.selection[i];\n\t        if (data._dom) {\n\t          var d3item = d3.select(data._dom);\n\t          if (d3item.classed('bar')) {\n\t            d3item.classed('bar--selected', true);\n\t          } else if (d3item.classed('key')) {\n\t            d3item.classed('key--selected', true);\n\t          }\n\t        }\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return SelectionManager;\n\t})();\n\t\n\texports['default'] = SelectionManager;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 40 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar Exporter = (function () {\n\t  function Exporter(editor) {\n\t    _classCallCheck(this, Exporter);\n\t\n\t    this.editor = editor;\n\t  }\n\t\n\t  _createClass(Exporter, [{\n\t    key: 'getData',\n\t    value: function getData() {\n\t      var tweenTime = this.editor.tweenTime;\n\t      var domain = this.editor.timeline.x.domain();\n\t      var domain_start = domain[0];\n\t      var domain_end = domain[1];\n\t      return {\n\t        settings: {\n\t          time: tweenTime.timer.getCurrentTime(),\n\t          duration: tweenTime.timer.getDuration(),\n\t          domain: [domain_start.getTime(), domain_end.getTime()]\n\t        },\n\t        data: tweenTime.data\n\t      };\n\t    }\n\t  }, {\n\t    key: 'getJSON',\n\t    value: function getJSON() {\n\t      var options = this.editor.options;\n\t      var json_replacer = function json_replacer(key, val) {\n\t        // Disable all private properies from TweenMax/TimelineMax\n\t        if (key.indexOf('_') === 0) {\n\t          return undefined;\n\t        }\n\t        if (options.json_replacer !== undefined) {\n\t          return options.json_replacer(key, val);\n\t        }\n\t        return val;\n\t      };\n\t\n\t      var data = this.getData();\n\t      return JSON.stringify(data, json_replacer, 2);\n\t    }\n\t  }]);\n\t\n\t  return Exporter;\n\t})();\n\t\n\texports['default'] = Exporter;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 41 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\t__webpack_require__(18);\n\t\n\tvar UndoManager = (function () {\n\t  function UndoManager(editor) {\n\t    var _this = this;\n\t\n\t    _classCallCheck(this, UndoManager);\n\t\n\t    this.editor = editor;\n\t    this.history_max = 100;\n\t    this.history = [];\n\t    this.current_index = 0;\n\t\n\t    // Add the initial state\n\t    this.addState();\n\t\n\t    $(document).keydown(function (e) {\n\t      if (e.keyCode == 90) {\n\t        if (e.metaKey || e.ctrlKey) {\n\t          if (!e.shiftKey) {\n\t            // (command | ctrl) Z\n\t            _this.undo();\n\t          } else {\n\t            // (command | ctrl) shift Z\n\t            _this.redo();\n\t          }\n\t        }\n\t      }\n\t    });\n\t  }\n\t\n\t  _createClass(UndoManager, [{\n\t    key: 'undo',\n\t    value: function undo() {\n\t      // If there is no more history return\n\t      if (this.current_index <= 0) {\n\t        return false;\n\t      }\n\t      this.current_index -= 1;\n\t      this.setState(this.current_index);\n\t    }\n\t  }, {\n\t    key: 'redo',\n\t    value: function redo() {\n\t      // Stop if there is no more things.\n\t      if (this.current_index >= this.history.length - 1) {\n\t        return false;\n\t      }\n\t      this.current_index += 1;\n\t      this.setState(this.current_index);\n\t    }\n\t  }, {\n\t    key: 'addState',\n\t    value: function addState() {\n\t      var data = JSON.parse(this.editor.exporter.getJSON());\n\t\n\t      // if we did some undo before and then edit something,\n\t      // we want to remove all actions past the current index first.\n\t      if (this.current_index + 1 < this.history.length) {\n\t        this.history.splice(this.current_index + 1, this.history.length - 1);\n\t      }\n\t\n\t      this.history.push(data);\n\t\n\t      // Keep history to a max size by removing the first element if needed.\n\t      if (this.history.length > this.history_max) {\n\t        this.history.shift();\n\t      }\n\t\n\t      // Set the current index\n\t      this.current_index = this.history.length - 1;\n\t    }\n\t  }, {\n\t    key: 'setState',\n\t    value: function setState(index) {\n\t      var state = this.history[index];\n\t      var data = state.data;\n\t      var tweenTime = this.editor.tweenTime;\n\t\n\t      // naively copy keys and values from previous state\n\t      for (var item_key = 0; item_key < data.length; item_key++) {\n\t        var item = data[item_key];\n\t        // if item is not defined copy it\n\t        if (!tweenTime.data[item_key]) {\n\t          tweenTime.data[item_key] = item;\n\t        } else {\n\t          for (var prop_key = 0; prop_key < item.properties.length; prop_key++) {\n\t            var prop = item.properties[prop_key];\n\t            // if property is not defined copy it\n\t            if (!tweenTime.data[item_key].properties[prop_key]) {\n\t              tweenTime.data[item_key].properties[prop_key] = prop;\n\t            } else {\n\t              // set property keys\n\t              var keys = tweenTime.data[item_key].properties[prop_key].keys;\n\t              for (var key_key = 0; key_key < prop.keys.length; key_key++) {\n\t                var key = prop.keys[key_key];\n\t                if (!keys[key_key]) {\n\t                  keys[key_key] = key;\n\t                } else {\n\t                  keys[key_key].time = key.time;\n\t                  keys[key_key].val = key.val;\n\t                  keys[key_key].ease = key.ease;\n\t                }\n\t              }\n\t            }\n\t          }\n\t        }\n\t\n\t        tweenTime.data[item_key]._isDirty = true;\n\t      }\n\t      this.editor.render(false, true);\n\t    }\n\t  }]);\n\t\n\t  return UndoManager;\n\t})();\n\t\n\texports['default'] = UndoManager;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 42 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar H = __webpack_require__(24);\n\tmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"timeline\\\">\");t.b(\"\\n\" + i);t.b(\"  <nav class=\\\"timeline__menu\\\">\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"menu-item\\\" data-action=\\\"export\\\">Export</a>\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\");t.b(\"\\n\" + i);t.b(\"  </nav>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"timeline__controls controls\\\">\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"control control--first icon-first\\\"></a>\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"control control--play-pause icon-play\\\"></a>\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"control control--last icon-last\\\"></a>\");t.b(\"\\n\" + i);t.b(\"    <input type=\\\"text\\\" class=\\\"control control--input control--time\\\" /> <span class=\\\"control__time-separator\\\">/</span> <input type=\\\"text\\\" class=\\\"control control--input control--time-end\\\" />\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"timeline__header\\\">\");t.b(\"\\n\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"timeline__main\\\">\");t.b(\"\\n\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"timeline\\\">\\n  <nav class=\\\"timeline__menu\\\">\\n    <a href=\\\"#\\\" class=\\\"menu-item\\\" data-action=\\\"export\\\">Export</a>\\n    <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\\n  </nav>\\n  <div class=\\\"timeline__controls controls\\\">\\n    <a href=\\\"#\\\" class=\\\"control control--first icon-first\\\"></a>\\n    <a href=\\\"#\\\" class=\\\"control control--play-pause icon-play\\\"></a>\\n    <a href=\\\"#\\\" class=\\\"control control--last icon-last\\\"></a>\\n    <input type=\\\"text\\\" class=\\\"control control--input control--time\\\" /> <span class=\\\"control__time-separator\\\">/</span> <input type=\\\"text\\\" class=\\\"control control--input control--time-end\\\" />\\n  </div>\\n  <div class=\\\"timeline__header\\\">\\n\\n  </div>\\n  <div class=\\\"timeline__main\\\">\\n\\n  </div>\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** TweenTime.Editor.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 77c2348108df7892830a\n **/","var tpl_timeline = require('./templates/timeline.tpl.html');\nimport Timeline from './graph/Timeline';\nimport PropertiesEditor from './editor/PropertiesEditor';\nimport EditorMenu from './editor/EditorMenu';\nimport EditorControls from './editor/EditorControls';\nimport SelectionManager from './editor/SelectionManager';\nimport Exporter from './editor/Exporter';\nimport UndoManager from './editor/UndoManager';\nlet Signals = require('js-signals');\n\nclass Editor {\n  constructor(tweenTime, options = {}) {\n    this.tweenTime = tweenTime;\n    this.options = options;\n    this.timer = this.tweenTime.timer;\n    this.lastTime = -1;\n\n    this.onKeyAdded = this.onKeyAdded.bind(this);\n    this.onKeyRemoved = this.onKeyRemoved.bind(this);\n\n    var el = options.el || $('body');\n    this.el = el;\n    this.$timeline = $(tpl_timeline());\n    el.append(this.$timeline);\n    el.addClass('has-editor');\n\n    this.selectionManager = new SelectionManager(this.tweenTime);\n    this.exporter = new Exporter(this);\n    this.timeline = new Timeline(this, options);\n\n    this.propertiesEditor = new PropertiesEditor(this, this.selectionManager);\n    this.propertiesEditor.keyAdded.add(this.onKeyAdded);\n    this.propertiesEditor.keyRemoved.add(this.onKeyRemoved);\n\n    this.menu = new EditorMenu(this.tweenTime, this.$timeline, this);\n    if (this.options.onMenuCreated !== undefined) {\n      this.options.onMenuCreated(this.$timeline.find('.timeline__menu'), this);\n    }\n\n    this.controls = new EditorControls(this.tweenTime, this.$timeline);\n    this.undoManager = new UndoManager(this);\n\n    // Public events.\n    this.onSelect = new Signals.Signal();\n    var self = this;\n    this.selectionManager.onSelect.add(function(selection, addToSelection) {\n      // Propagate the event.\n      self.onSelect.dispatch(selection, addToSelection);\n    });\n\n    // Will help resize the canvas to correct size (minus sidebar and timeline)\n    window.editorEnabled = true;\n    window.dispatchEvent(new Event('resize'));\n    window.requestAnimationFrame(() => this.update());\n  }\n\n  select(item, addToSelection = false) {\n    this.selectionManager.select(item, addToSelection);\n  }\n\n  getSelection() {\n    return this.selectionManager.getSelection();\n  }\n\n  onKeyAdded() {\n    this.undoManager.addState();\n    this.render(false, false, true);\n  }\n\n  onKeyRemoved(item) {\n    this.selectionManager.removeItem(item);\n    this.undoManager.addState();\n    if (this.selectionManager.selection.length) {\n      this.selectionManager.triggerSelect();\n    }\n    this.render(false, false, true);\n  }\n\n  render(time = false, time_changed = false, force = false) {\n    if (time === false) {\n      time = this.timer.time[0];\n    }\n    if (force) {\n      this.timeline._isDirty = true;\n    }\n    this.timeline.render(time, time_changed);\n    this.controls.render(time, time_changed);\n    this.propertiesEditor.render(time, time_changed);\n  }\n\n  update() {\n    var time = this.timer.time[0];\n    var time_changed = this.lastTime === time ? false : true;\n\n    this.render(time, time_changed);\n    this.lastTime = this.timer.time[0];\n    window.requestAnimationFrame(() => this.update());\n  }\n}\n\nmodule.exports = Editor;\n\n\n\n/** WEBPACK FOOTER **\n ** ./Editor.js\n **/","export default class Utils {\n  static formatMinutes(d) {\n    // convert milliseconds to seconds\n    d = d / 1000;\n    var hours = Math.floor(d / 3600);\n    var minutes = Math.floor((d - (hours * 3600)) / 60);\n    var seconds = d - (minutes * 60);\n    var output = seconds + \"s\";\n    if (minutes) {\n      output = minutes + \"m \" + output;\n    }\n    if (hours) {\n      output = hours + \"h \" + output;\n    }\n    return output;\n  }\n\n  static getClosestTime(data, time, objectId = false, property_name = false, timer = false, tolerance = 0.1) {\n    if (timer) {\n      var timer_time = timer.getCurrentTime() / 1000;\n      if (Math.abs(timer_time - time) <= tolerance) {\n        return timer_time;\n      }\n    }\n\n    if (objectId || property_name) {\n      for (var i = 0; i < data.length; i++) {\n        var item = data[i];\n        // Don't match item with itself, but allow property to match item start/end.\n        if (item.id != objectId || property_name) {\n          // First check start & end.\n          if (Math.abs(item.start - time) <= tolerance) {\n            return item.start;\n          }\n\n          if (Math.abs(item.end - time) <= tolerance) {\n            return item.end;\n          }\n        }\n\n        // Test properties keys\n        for (var j = 0; j < item.properties.length; j++) {\n          var prop = item.properties[j];\n\n          // Don't match property with itself.\n          if (prop.keys && (item.id != objectId || prop.name != property_name)) {\n            for (var k = 0; k < prop.keys.length; k++) {\n              var key = prop.keys[k];\n              if (Math.abs(key.time - time) <= tolerance) {\n                return key.time;\n              }\n            }\n          }\n        }\n      }\n    }\n    return false;\n  }\n\n  static getPreviousKey(keys, time) {\n    var prevKey = false;\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      if (key.time < time) {\n        prevKey = key;\n      }\n      else {\n        return prevKey;\n      }\n    }\n    return prevKey;\n  }\n\n  static sortKeys(keys) {\n    var compare = function (a, b) {\n      if (a.time < b.time) {\n        return -1;\n      }\n      if (a.time > b.time) {\n        return 1;\n      }\n      return 0;\n    };\n    return keys.sort(compare);\n  }\n\n  static guid() {\n    var s4 = function() {\n      return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n    };\n    return s4() + s4() + \"-\" + s4() + \"-\" + s4() + \"-\" + s4() + \"-\" + s4() + s4() + s4();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/Utils.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"signals\",\"commonjs\":\"./signals\",\"amd\":\"signals\"}\n ** module id = 3\n ** module chunks = 0 1\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}\n ** module id = 6\n ** module chunks = 0 1\n **/","let d3 = require('d3');\n\nimport Utils from '../core/Utils';\nimport Header from './Header';\nimport TimeIndicator from './TimeIndicator';\nimport Items from './Items';\nimport KeysPreview from './KeysPreview';\nimport Properties from './Properties';\nimport Keys from './Keys';\nimport Errors from './Errors';\nimport Selection from './Selection';\n\nexport default class Timeline {\n  constructor(editor, options) {\n    this.editor = editor;\n    this.tweenTime = this.editor.tweenTime;\n    this.timer = this.tweenTime.timer;\n    this.selectionManager = this.editor.selectionManager;\n\n    this._isDirty = true;\n    this.timer = this.tweenTime.timer;\n    this.currentTime = this.timer.time; // used in timeindicator.\n\n    this.onUpdate = this.onUpdate.bind(this);\n\n    // Make the domain cover 20% of the totalDuation by default.\n    this.initialDomain = [];\n    this.initialDomain[0] = options.domainStart || 0;\n    this.initialDomain[1] = options.domainEnd || this.timer.totalDuration * 0.2;\n\n    // Adapt time to be greater or equal to domainStart.\n    if (this.initialDomain[0] > this.timer.getCurrentTime()) {\n      this.timer.time[0] = this.initialDomain[0];\n    }\n\n    var margin = {top: 6, right: 20, bottom: 0, left: 265};\n    this.margin = margin;\n\n    var width = window.innerWidth - margin.left - margin.right;\n    var height = 270 - margin.top - margin.bottom - 40;\n    this.lineHeight = 20;\n    this.label_position_x = -margin.left + 20;\n\n    this.x = d3.time.scale()\n      .domain(this.initialDomain)\n      .range([0, width]);\n\n    this.xAxis = d3.svg.axis()\n      .scale(this.x)\n      .orient(\"top\")\n      .tickSize(-height, 0)\n      .tickFormat(Utils.formatMinutes);\n\n    this.svg = d3.select(editor.$timeline.get(0)).select('.timeline__main').append(\"svg\")\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", 600);\n\n    this.svgContainer = this.svg.append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n    this.svgContainerTime = this.svg.append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",0)\");\n\n    this.linesContainer = this.svg.append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + (margin.top) + \")\");\n\n    this.header = new Header(editor, this.timer, this.initialDomain, this.tweenTime, width, margin);\n    this.timeIndicator = new TimeIndicator(this, this.svgContainerTime);\n\n    this.selection = new Selection(this, this.svg, margin);\n\n    this.items = new Items(this, this.linesContainer);\n    this.items.onUpdate.add(this.onUpdate);\n    this.keysPreview = new KeysPreview(this, this.linesContainer);\n\n    this.properties = new Properties(this);\n    this.properties.onKeyAdded.add((newKey, keyContainer) => {\n      this._isDirty = true;\n      // render the timeline directly so that we can directly select\n      // the new key with it's domElement.\n      this.render(0, false);\n      this.keys.selectNewKey(newKey, keyContainer);\n    });\n    this.errors = new Errors(this);\n    this.keys = new Keys(this);\n    this.keys.onKeyUpdated.add(() => {\n      this.onUpdate();\n    });\n\n    this.xAxisGrid = d3.svg.axis()\n      .scale(this.x)\n      .ticks(100)\n      .tickSize(-this.items.dy, 0)\n      .tickFormat(\"\")\n      .orient(\"top\");\n\n    this.xGrid = this.svgContainer.append('g')\n      .attr('class', 'x axis grid')\n      .attr(\"transform\", \"translate(0,\" + margin.top + \")\")\n      .call(this.xAxisGrid);\n\n    this.xAxisElement = this.svgContainer.append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", \"translate(0,\" + margin.top + \")\")\n      .call(this.xAxis);\n\n    this.header.onBrush.add((extent) => {\n      this.x.domain(extent);\n      this.xGrid.call(this.xAxisGrid);\n      this.xAxisElement.call(this.xAxis);\n      this._isDirty = true;\n    });\n\n    // First render\n    window.requestAnimationFrame(() => {this.render();});\n\n    window.onresize = () => {\n      var INNER_WIDTH = window.innerWidth;\n      var width = INNER_WIDTH - margin.left - margin.right;\n      this.svg.attr(\"width\", width + margin.left + margin.right);\n      this.svg.selectAll('.timeline__right-mask')\n        .attr('width', INNER_WIDTH);\n      this.x.range([0, width]);\n\n      this._isDirty = true;\n      this.header.resize(INNER_WIDTH);\n      this.render();\n    };\n  }\n\n  onUpdate() {\n    this.editor.render(false, false, true);\n  }\n\n  render(time, time_changed) {\n    if (time_changed) {\n      var domainLength;\n      // Update current domain when playing to keep time indicator in view.\n      var margin_ms = 16;\n      if (this.timer.getCurrentTime() > this.initialDomain[1]) {\n        domainLength = this.initialDomain[1] - this.initialDomain[0];\n        this.initialDomain[0] += domainLength - margin_ms;\n        this.initialDomain[1] += domainLength - margin_ms;\n        this.header.setDomain(this.initialDomain);\n      }\n      if (this.timer.getCurrentTime() < this.initialDomain[0]) {\n        domainLength = this.initialDomain[1] - this.initialDomain[0];\n        this.initialDomain[0] = this.timer.getCurrentTime();\n        this.initialDomain[1] = this.initialDomain[0] + domainLength;\n        this.header.setDomain(this.initialDomain);\n      }\n    }\n\n    if (this._isDirty || time_changed) {\n      // Render header and time indicator everytime the time changed.\n      this.header.render();\n      this.timeIndicator.render();\n    }\n\n    if (this._isDirty) {\n      // No need to call this on each frames, but only on brush, key drag, ...\n      var bar = this.items.render();\n      this.keysPreview.render(bar);\n      var properties = this.properties.render(bar);\n      this.errors.render(properties);\n      this.keys.render(properties);\n      this._isDirty = false;\n\n      // Adapt the timeline height.\n      var height = Math.max(this.items.dy + 30, 230);\n      this.xAxis.tickSize(-height, 0);\n      this.xAxisGrid.tickSize(-height, 0);\n      this.xGrid.call(this.xAxisGrid);\n      this.xAxisElement.call(this.xAxis);\n      this.svg.attr(\"height\", height);\n      this.timeIndicator.updateHeight(height);\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Timeline.js\n **/","let d3 = require('d3');\n\nlet Signals = require('js-signals');\nimport Utils from '../core/Utils';\n\nexport default class Header {\n  constructor(editor, timer, initialDomain, tweenTime, width, margin) {\n    this.timer = timer;\n    this.initialDomain = initialDomain;\n    this.tweenTime = tweenTime;\n\n    this.onBrush = new Signals.Signal();\n    this.margin = {top: 10, right: 20, bottom: 0, left: margin.left};\n    this.height = 50 - this.margin.top - this.margin.bottom + 20;\n\n    this.currentTime = this.timer.time;\n    this.x = d3.time.scale().range([0, width]);\n    this.x.domain([0, this.timer.totalDuration]);\n\n    // Same as this.x from timeline\n    this.xDisplayed = d3.time.scale().range([0, width]);\n    this.xDisplayed.domain(this.initialDomain);\n\n    this.xAxis = d3.svg.axis()\n      .scale(this.x)\n      .orient(\"top\")\n      .tickSize(-5, 0)\n      .tickFormat(Utils.formatMinutes);\n\n    this.svg = d3.select(editor.$timeline.get(0)).select('.timeline__header').append(\"svg\")\n      .attr(\"width\", width + this.margin.left + this.margin.right)\n      .attr(\"height\", 56);\n\n    this.svgContainer = this.svg.append(\"g\")\n      .attr(\"transform\", \"translate(\" + this.margin.left + \",\" + this.margin.top + \")\");\n\n    this.createBrushHandle();\n    this.createTimeHandle();\n    this.timer.durationChanged.add(this.onDurationChanged);\n  }\n\n  adaptDomainToDuration(domain, seconds) {\n    var ms = seconds * 1000;\n    var new_domain = [domain[0], domain[1]];\n    // Make the domain smaller or equal to ms.\n    new_domain[0] = Math.min(new_domain[0], ms);\n    new_domain[1] = Math.min(new_domain[1], ms);\n    // Should not go below 0.\n    new_domain[0] = Math.max(new_domain[0], 0);\n\n    return new_domain;\n  }\n\n  setDomain() {\n    this.brush.x(this.x).extent(this.initialDomain);\n    this.svgContainer.select('.brush').call(this.brush);\n    // Same as onBrush\n    this.onBrush.dispatch(this.initialDomain);\n    this.render();\n    this.xDisplayed.domain(this.initialDomain);\n  }\n\n  onDurationChanged(seconds) {\n    this.x.domain([0, this.timer.totalDuration]);\n    this.xAxisElement.call(this.xAxis);\n    this.initialDomain = this.adaptDomainToDuration(this.initialDomain, seconds);\n    this.setDomain(this.initialDomain);\n  }\n\n  createBrushHandle() {\n    this.xAxisElement = this.svgContainer.append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", \"translate(0,\" + (this.margin.top + 7) + \")\")\n      .call(this.xAxis);\n\n    var onBrush = () => {\n      var extent0 = this.brush.extent();\n      // Get domain as milliseconds and not date.\n      var start = extent0[0].getTime();\n      var end = extent0[1].getTime();\n      // Set the initial domain.\n      this.initialDomain[0] = start;\n      this.initialDomain[1] = end;\n      this.setDomain(this.initialDomain);\n    };\n\n    this.brush = d3.svg.brush()\n      .x(this.x)\n      .extent(this.initialDomain)\n      .on(\"brush\", onBrush);\n\n    this.gBrush = this.svgContainer.append(\"g\")\n      .attr(\"class\", \"brush\")\n      .call(this.brush)\n      .selectAll(\"rect\")\n      .attr('height', 20);\n  }\n\n  render() {\n    var timeSelection = this.svgContainer.selectAll('.time-indicator');\n    timeSelection.attr('transform', 'translate(' + (this.xDisplayed(this.currentTime[0])) + ', 25)');\n  }\n\n  createTimeHandle() {\n    var self = this;\n\n    var dragTimeMove = function() {\n      var event = d3.event.sourceEvent;\n      event.stopPropagation();\n      var tweenTime = self.tweenTime;\n      var event_x = event.x !== undefined ? event.x : event.clientX;\n      var dx = self.xDisplayed.invert(event_x - self.margin.left);\n      dx = dx.getTime();\n      dx = Math.max(0, dx);\n\n      var timeMatch = false;\n      if (event.shiftKey) {\n        time = dx / 1000;\n        timeMatch = Utils.getClosestTime(tweenTime.data, time, '---non-existant');\n        if (timeMatch !== false) {\n          timeMatch = timeMatch * 1000;\n        }\n      }\n      if (timeMatch === false) {\n        timeMatch = dx;\n      }\n      self.timer.seek([timeMatch]);\n    };\n\n    var dragTime = d3.behavior.drag()\n      .origin(function(d) {\n        return d;\n      })\n      .on(\"drag\", dragTimeMove);\n\n    var timeSelection = this.svgContainer.selectAll('.time-indicator').data(this.currentTime);\n\n    timeSelection.enter().append('rect')\n      .attr('x', 0)\n      .attr('y', 20)\n      .attr('width', self.xDisplayed(self.timer.totalDuration))\n      .attr('height', 50)\n      .attr('fill-opacity', 0)\n      .on('click', function() {\n        var mouse = d3.mouse(this);\n        var dx = self.xDisplayed.invert(mouse[0]);\n        dx = dx.getTime();\n        dx = Math.max(0, dx);\n        self.timer.seek([dx]);\n      });\n\n    var timeGrp = timeSelection.enter().append(\"g\")\n      .attr('class', \"time-indicator\")\n      .attr(\"transform\", \"translate(-0.5,\" + 30 + \")\")\n      .call(dragTime);\n\n    timeGrp.append('rect')\n      .attr('class', 'time-indicator__line')\n      .attr('x', -0.5)\n      .attr('y', 0)\n      .attr('width', 1)\n      .attr('height', 1000);\n\n    timeGrp.append('path')\n      .attr('class', 'time-indicator__handle')\n      .attr('d', 'M -5 -3 L -5 5 L 0 10 L 5 5 L 5 -3 L -5 -3');\n\n    // Mask time indicator\n    // todo: remove the mask.\n    this.svgContainer.append(\"rect\")\n      .attr(\"class\", \"graph-mask\")\n      .attr(\"x\", -self.margin.left)\n      .attr(\"y\", -self.margin.top)\n      .attr(\"width\", self.margin.left - 5)\n      .attr(\"height\", self.height);\n  }\n\n  resize(width) {\n    width = width - this.margin.left - this.margin.right;\n    this.svg.attr(\"width\", width + this.margin.left + this.margin.right);\n\n    this.x.range([0, width]);\n    this.xDisplayed.range([0, width]);\n    this.xAxisElement.call(this.xAxis);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Header.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"d3\"\n ** module id = 9\n ** module chunks = 1\n **/","export default class TimeIndicator {\n  constructor(timeline, container) {\n    this.timeline = timeline;\n    this.container = container;\n    this.timeSelection = this.container.selectAll('.time-indicator').data(this.timeline.currentTime);\n    this.timeGrp = this.timeSelection.enter().append(\"svg\")\n      .attr('class', \"time-indicator timeline__right-mask\")\n      .attr('width', window.innerWidth - this.timeline.label_position_x)\n      .attr('height', 442);\n\n    this.timeSelection = this.timeGrp.append('rect')\n      .attr('class', 'time-indicator__line')\n      .attr('x', 0)\n      .attr('y', -this.timeline.margin.top - 5)\n      .attr('width', 1)\n      .attr('height', 1000);\n\n    this.timeSelection = this.container.selectAll('.time-indicator rect');\n  }\n\n  updateHeight(height) {\n    this.timeGrp.attr(\"height\", height);\n    this.timeSelection.attr(\"height\", height + this.timeline.margin.top + 5);\n  }\n\n  render() {\n    this.timeSelection.attr('transform', \"translate(\" + (this.timeline.x(this.timeline.currentTime[0]) - 0.5) + \",0)\");\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/TimeIndicator.js\n **/","let d3 = require('d3');\nlet Signals = require('js-signals');\nlet _ = require('lodash');\nimport Utils from '../core/Utils';\n\nexport default class Items {\n  constructor(timeline, container) {\n    this.timeline = timeline;\n    this.container = container;\n    this.dy = 10 + this.timeline.margin.top;\n    this.onUpdate = new Signals.Signal();\n  }\n\n  render() {\n    var self = this;\n    var tweenTime = self.timeline.tweenTime;\n\n    var selectBar = function() {\n      var data = d3.select(this).datum();\n      self.timeline.selectionManager.select(data);\n    };\n\n    var dragmove = function(d) {\n      var dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n      var diff = (dx - d.start);\n      d.start += diff;\n      d.end += diff;\n      if (d.properties) {\n        for (var prop_key = 0; prop_key < d.properties.length; prop_key++) {\n          var prop = d.properties[prop_key];\n          for (var i = 0; i < prop.keys.length; i++) {\n            var key = prop.keys[i];\n            key.time += diff;\n          }\n        }\n      }\n      d._isDirty = true;\n      self.onUpdate.dispatch();\n    };\n\n    var dragmoveLeft = function(d) {\n      d3.event.sourceEvent.stopPropagation();\n      var sourceEvent = d3.event.sourceEvent;\n      var dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n      var timeMatch = false;\n      if (sourceEvent.shiftKey) {\n        timeMatch = Utils.getClosestTime(tweenTime.data, dx, d.id, false, tweenTime.timer);\n      }\n      if (!timeMatch) {\n        var diff = dx - d.start;\n        timeMatch = d.start + diff;\n      }\n      d.start = timeMatch;\n      d._isDirty = true;\n      self.onUpdate.dispatch();\n    };\n\n    var dragmoveRight = function(d) {\n      d3.event.sourceEvent.stopPropagation();\n      var sourceEvent = d3.event.sourceEvent;\n      var dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n      var timeMatch = false;\n      if (sourceEvent.shiftKey) {\n        timeMatch = Utils.getClosestTime(tweenTime.data, dx, false, false, tweenTime.timer);\n      }\n      if (!timeMatch) {\n        var diff = dx - d.end;\n        timeMatch = d.end + diff;\n      }\n      d.end = timeMatch;\n      d._isDirty = true;\n      self.onUpdate.dispatch();\n    };\n\n    var dragLeft = d3.behavior.drag()\n      .origin(function() {\n        var t = d3.select(this);\n        return {x: t.attr('x'), y: t.attr('y')};\n      })\n      .on(\"drag\", dragmoveLeft);\n\n    var dragRight = d3.behavior.drag()\n      .origin(function() {\n        var t = d3.select(this);\n        return {x: t.attr('x'), y: t.attr('y')};\n      })\n      .on(\"drag\", dragmoveRight);\n\n    var drag = d3.behavior.drag()\n      .origin(function() {\n        var t = d3.select(this);\n        return {x: t.attr('x'), y: t.attr('y')};\n      })\n      .on(\"drag\", dragmove);\n\n    var bar_border = 1;\n    var bar = this.container.selectAll(\".line-grp\")\n      .data(this.timeline.tweenTime.data, (d) => {return d.id;});\n\n    var barEnter = bar.enter()\n      .append('g').attr('class', 'line-grp');\n\n    var barContainerRight = barEnter.append('svg')\n      .attr('class', 'timeline__right-mask')\n      .attr('width', window.innerWidth - self.timeline.label_position_x)\n      .attr('height', self.timeline.lineHeight);\n\n    barContainerRight.append(\"rect\")\n      .attr(\"class\", \"bar\")\n      // Add a unique id for SelectionManager.removeDuplicates\n      .attr('id', () => {return Utils.guid();})\n      .attr(\"y\", 3)\n      .attr(\"height\", 14);\n\n    barContainerRight.append(\"rect\")\n      .attr(\"class\", \"bar-anchor bar-anchor--left\")\n      .attr(\"y\", 2)\n      .attr(\"height\", 16)\n      .attr(\"width\", 6)\n      .call(dragLeft);\n\n    barContainerRight.append(\"rect\")\n      .attr(\"class\", \"bar-anchor bar-anchor--right\")\n      .attr(\"y\", 2)\n      .attr(\"height\", 16)\n      .attr(\"width\", 6)\n      .call(dragRight);\n\n    self.dy = 10 + this.timeline.margin.top;\n    bar.attr(\"transform\", function(d) {\n      var y = self.dy;\n      self.dy += self.timeline.lineHeight;\n      if (!d.collapsed) {\n        var numProperties = 0;\n        if (d.properties) {\n          var visibleProperties = _.filter(d.properties, function(prop) {\n            return prop.keys.length;\n          });\n          numProperties = visibleProperties.length;\n        }\n        self.dy += numProperties * self.timeline.lineHeight;\n      }\n      return \"translate(0,\" + y + \")\";\n    });\n\n    var barWithStartAndEnd = function(d) {\n      if ((d.start !== undefined) && (d.end !== undefined)) {\n        return true;\n      }\n      return false;\n    };\n\n    bar.selectAll('.bar-anchor--left')\n      .filter(barWithStartAndEnd)\n      .attr(\"x\", (d) => {return self.timeline.x(d.start * 1000) - 1;})\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation();\n      });\n\n    bar.selectAll('.bar-anchor--right')\n      .filter(barWithStartAndEnd)\n      .attr(\"x\", (d) => {return self.timeline.x(d.end * 1000) - 1;})\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation();\n      });\n\n    bar.selectAll('.bar')\n      .filter(barWithStartAndEnd)\n      .attr(\"x\", (d) => {return self.timeline.x(d.start * 1000) + bar_border;})\n      .attr(\"width\", function(d) {\n        return Math.max(0, (self.timeline.x(d.end) - self.timeline.x(d.start)) * 1000 - bar_border);\n      })\n      .call(drag)\n      .on(\"click\", selectBar)\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation();\n      });\n\n    barEnter.append(\"text\")\n      .attr(\"class\", \"line-label\")\n      .attr(\"x\", self.timeline.label_position_x + 10)\n      .attr(\"y\", 16)\n      .text((d) => {return d.label;})\n      .on('click', selectBar)\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation();\n      });\n\n    barEnter.append(\"text\")\n      .attr(\"class\", \"line__toggle\")\n      .attr(\"x\", self.timeline.label_position_x - 10)\n      .attr(\"y\", 16)\n      .on('click', function(d) {\n        d.collapsed = !d.collapsed;\n        self.onUpdate.dispatch();\n      });\n\n    bar.selectAll(\".line__toggle\").text(function(d) {\n      if (d.collapsed) {\n        return \"▸\";\n      } else {\n        return \"▾\";\n      }\n    });\n\n    barEnter.append(\"line\")\n      .attr(\"class\", 'line-separator')\n      .attr(\"x1\", -self.timeline.margin.left)\n      .attr(\"x2\", self.timeline.x(self.timeline.timer.totalDuration + 100))\n      .attr(\"y1\", self.timeline.lineHeight)\n      .attr(\"y2\", self.timeline.lineHeight);\n\n    bar.exit().remove();\n\n    return bar;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Items.js\n **/","let d3 = require('d3');\n\nexport default class KeysPreview {\n  constructor(timeline, container) {\n    this.timeline = timeline;\n    this.container = container;\n  }\n\n  render(bar) {\n    var self = this;\n\n    var propVal = function(d) {\n      if (d.properties) {\n        return d.properties;\n      } else {\n        return [];\n      }\n    };\n    var propKey = function(d) {\n      return d.name;\n    };\n\n    var properties = bar.selectAll('.keys-preview').data(propVal, propKey);\n\n    properties.enter()\n      .append('svg')\n      .attr(\"class\", 'keys-preview timeline__right-mask')\n      .attr('width', window.innerWidth - self.timeline.label_position_x)\n      .attr('height', self.timeline.lineHeight);\n\n    var setItemStyle = function() {\n      var item = d3.select(this.parentNode.parentNode);\n      var bar_data = item.datum();\n      if (bar_data.collapsed === true) {\n        return \"\";\n      }\n      // Show only when item is collapsed\n      return \"display: none;\";\n    };\n\n    properties.selectAll('.key--preview')\n      .attr(\"style\", setItemStyle);\n\n    var keyValue = function(d) {\n      return d.keys;\n    };\n    var keyKey = function(d) {\n      return d.time;\n    };\n    var keys = properties.selectAll('.key--preview').data(keyValue, keyKey);\n\n    keys.enter()\n      .append('path')\n      .attr('class', 'key--preview')\n      .attr(\"style\", setItemStyle)\n      .attr('d', 'M 0 -4 L 4 0 L 0 4 L -4 0');\n\n    keys.attr('transform', function(d) {\n        var dx = self.timeline.x(d.time * 1000);\n        dx = parseInt(dx, 10);\n        var dy = 11;\n        return \"translate(\" + dx + \",\" + dy + \")\";\n      });\n\n    keys.exit().remove();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/KeysPreview.js\n **/","let d3 = require('d3');\nlet Signals = require('js-signals');\nimport Utils from '../core/Utils';\n\nexport default class Properties {\n  constructor(timeline) {\n    this.timeline = timeline;\n    this.onKeyAdded = new Signals.Signal();\n    this.subGrp = false;\n  }\n\n  render(bar) {\n    var self = this;\n\n    var propVal = function(d) {\n      if (d.properties) {\n        return d.properties.filter((prop) => {return prop.keys.length;});\n      } else {\n        return [];\n      }\n    };\n    var propKey = function(d) {\n      return d.name;\n    };\n\n    var properties = bar.selectAll('.line-item').data(propVal, propKey);\n    var subGrp = properties.enter()\n      .append('g')\n      .attr(\"class\", 'line-item');\n\n    // Save subGrp in a variable for use in Errors.coffee\n    self.subGrp = subGrp;\n\n    properties.attr (\"transform\", function(d, i) {\n        var sub_height = (i + 1) * self.timeline.lineHeight;\n        return \"translate(0,\" + sub_height + \")\";\n      });\n\n    subGrp.append('rect')\n      .attr('class', 'click-handler click-handler--property')\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('width', self.timeline.x(self.timeline.timer.totalDuration + 100))\n      .attr('height', self.timeline.lineHeight)\n      .on('dblclick', function(d) {\n        var lineObject = this.parentNode.parentNode;\n        var lineValue = d3.select(lineObject).datum();\n        var def = d[\"default\"] ? d[\"default\"] : 0;\n        var mouse = d3.mouse(this);\n        var dx = self.timeline.x.invert(mouse[0]);\n        dx = dx.getTime() / 1000;\n        var prevKey = Utils.getPreviousKey(d.keys, dx);\n        // set the value to match the previous key if we found one\n        if (prevKey) {\n          def = prevKey.val;\n        }\n        d._line = lineValue;\n        var newKey = {\n          time: dx,\n          val: def,\n          _property: d\n        };\n        d.keys.push(newKey);\n        // Sort the keys for tweens creation\n        d.keys = Utils.sortKeys(d.keys);\n\n        lineValue._isDirty = true;\n        var keyContainer = this.parentNode;\n        self.onKeyAdded.dispatch(newKey, keyContainer);\n      });\n\n    // Mask\n    subGrp.append('svg')\n      .attr('class','line-item__keys timeline__right-mask')\n      .attr('width', window.innerWidth - self.timeline.label_position_x)\n      .attr('height', self.timeline.lineHeight)\n      .attr('fill', '#f00');\n\n    subGrp.append('text')\n      .attr(\"class\", \"line-label line-label--small\")\n      .attr(\"x\", self.timeline.label_position_x + 10)\n      .attr(\"y\", 15)\n      .text(function(d) {\n        return d.name;\n      });\n\n    subGrp.append(\"line\")\n      .attr(\"class\", 'line-separator--secondary')\n      .attr(\"x1\", -self.timeline.margin.left)\n      .attr(\"x2\", self.timeline.x(self.timeline.timer.totalDuration + 100))\n      .attr(\"y1\", self.timeline.lineHeight)\n      .attr(\"y2\", self.timeline.lineHeight);\n\n    bar.selectAll('.line-item').attr('display', function() {\n        var lineObject = this.parentNode;\n        var lineValue = d3.select(lineObject).datum();\n        if (!lineValue.collapsed) {\n          return \"block\";\n        } else {\n          return \"none\";\n        }\n      });\n\n    properties.exit().remove();\n\n    return properties;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Properties.js\n **/","let d3 = require('d3');\nlet Signals = require('js-signals');\nimport Utils from '../core/Utils';\nlet _ = require('lodash');\n\nexport default class Keys {\n  constructor(timeline) {\n    this.timeline = timeline;\n    this.onKeyUpdated = new Signals.Signal();\n  }\n\n  selectNewKey(data, container) {\n    var self = this;\n    var key = d3.select(container).selectAll('.key').filter(function(item) {\n      return item.time === data.time;\n    });\n    if (key.length) {\n      d3.selectAll('.key--selected').classed('key--selected', false);\n      key.classed('key--selected', true);\n      key = key[0][0];\n      data._dom = key;\n      self.timeline.selectionManager.select(data);\n    }\n  }\n\n  render(properties) {\n    var self = this;\n    var tweenTime = self.timeline.tweenTime;\n\n    var dragmove = function(d) {\n      var sourceEvent = d3.event.sourceEvent;\n      var propertyObject = this.parentNode;\n      var lineObject = propertyObject.parentNode.parentNode;\n      var propertyData = d3.select(propertyObject).datum();\n      var lineData = d3.select(lineObject).datum();\n      var key_data = d;\n\n      var currentDomainStart = self.timeline.x.domain()[0];\n      var mouse = d3.mouse(this);\n      var old_time = d.time;\n      var dx = self.timeline.x.invert(mouse[0]);\n      dx = dx.getTime();\n      dx = dx / 1000 - currentDomainStart / 1000;\n      dx = d.time + dx;\n\n      var selection = self.timeline.selectionManager.getSelection();\n      var selection_first_time = false;\n      var selection_last_time = false;\n      if (selection.length) {\n        selection_first_time = selection[0].time;\n        selection_last_time = selection[selection.length - 1].time;\n      }\n\n      selection = _.filter(selection, (item) => {return _.isEqual(item, key_data) === false;});\n\n      var timeMatch = false;\n      if (sourceEvent.shiftKey) {\n        timeMatch = Utils.getClosestTime(tweenTime.data, dx, lineData.id, propertyData.name, tweenTime.timer);\n      }\n      if (timeMatch === false) {\n        timeMatch = dx;\n      }\n\n      d.time = timeMatch;\n      // Sort the keys of the current selected item.\n      propertyData.keys = Utils.sortKeys(propertyData.keys);\n      var time_offset = d.time - old_time;\n\n      var updateKeyItem = function(item) {\n        var property = item._property;\n        property._line._isDirty = true;\n        property.keys = Utils.sortKeys(property.keys);\n      };\n\n      var key_scale = false;\n      var is_first = false;\n      if (selection.length) {\n        if (sourceEvent.altKey && (selection_first_time !== false) && (selection_last_time !== false)) {\n          is_first = selection_first_time === old_time;\n          if (is_first) {\n            key_scale = (selection_last_time - d.time) / (selection_last_time - old_time);\n          } else {\n            key_scale = (d.time - selection_first_time) / (old_time - selection_first_time);\n          }\n        }\n\n        for (var i = 0; i < selection.length; i++) {\n          var data = selection[i];\n          if (key_scale === false) {\n            data.time += time_offset;\n          } else {\n            if (is_first) {\n              data.time = selection_last_time - (selection_last_time - data.time) * key_scale;\n            } else {\n              data.time = selection_first_time + (data.time - selection_first_time) * key_scale;\n            }\n          }\n          updateKeyItem(data);\n        }\n      }\n\n      lineData._isDirty = true;\n      self.onKeyUpdated.dispatch();\n    };\n\n    var propValue = function(d) {\n      return d.keys;\n    };\n    var propKey = function(d) {\n      if (!d._id) {\n        d._id = Utils.guid();\n      }\n      return d._id;\n    };\n    var keys = properties.select('.line-item__keys').selectAll('.key').data(propValue, propKey);\n\n    // selectKey is triggered by dragstart event\n    var selectKey = function() {\n      var event = d3.event;\n      // with dragstart event the mousevent is is inside the event.sourcEvent\n      if (event.sourceEvent) {\n        event = event.sourceEvent;\n      }\n\n      var addToSelection = event.shiftKey;\n      // if element is already selectionned and we are on\n      // the dragstart event, we stop there since it is already selected.\n      if (d3.event.type && d3.event.type === \"dragstart\") {\n        if (d3.select(this).classed('key--selected')) {\n          return;\n        }\n      }\n      var key_data = d3.select(this).datum();\n\n      // Also keep a reference to the key dom element.\n      key_data._dom = this;\n\n      self.timeline.selectionManager.select(key_data, addToSelection);\n    };\n\n    var dragend = function() {\n      self.timeline.editor.undoManager.addState();\n    };\n\n    var drag = d3.behavior.drag()\n      .origin((d) => {return d;})\n      .on(\"drag\", dragmove)\n      .on(\"dragstart\", selectKey)\n      .on(\"dragend\", dragend);\n\n    var key_grp = keys.enter()\n      .append('g')\n      .attr('class', 'key')\n      // Use the unique id added in propKey above for the dom element id.\n      .attr('id', (d) => {return d._id;})\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation();\n      })\n      .call(drag);\n\n    properties.selectAll('.key')\n      .attr('class', function(d) {\n        var cls = 'key';\n        // keep selected class\n        if (d3.select(this).classed('key--selected')) {\n          cls += \" key--selected\";\n        }\n        if (d.ease) {\n          var ease = d.ease.split('.');\n          if (ease.length === 2) {\n            cls += \" \" + ease[1];\n          }\n        } else {\n          // If no easing specified, the it's the default Quad.easeOut\n          cls += ' easeOut';\n        }\n        return cls;\n      });\n\n    var grp_linear = key_grp.append('g')\n      .attr('class', 'ease-linear');\n    grp_linear.append('path')\n      .attr('class', 'key__shape-arrow')\n      .attr('d', 'M 0 -6 L 6 0 L 0 6');\n    grp_linear.append('path')\n      .attr('class', 'key__shape-arrow')\n      .attr('d', 'M 0 -6 L -6 0 L 0 6');\n\n    var grp_in = key_grp.append('g')\n      .attr('class', 'ease-in');\n    grp_in.append('path')\n      .attr('class', 'key__shape-rect')\n      .attr('d', 'M 0 -6 L 0 6 L 4 5 L 1 0 L 4 -5');\n    grp_in.append('path')\n      .attr('class', 'key__shape-arrow')\n      .attr('d', 'M 0 -6 L -6 0 L 0 6');\n\n    var grp_out = key_grp.append('g')\n      .attr('class', 'ease-out');\n    grp_out.append('path')\n      .attr('class', 'key__shape-rect')\n      .attr('d', 'M 0 -6 L 0 6 L -4 5 L -1 0 L -4 -5');\n    grp_out.append('path')\n      .attr('class', 'key__shape-arrow')\n      .attr('d', 'M 0 -6 L 6 0 L 0 6');\n\n    var grp_inout = key_grp.append('g')\n      .attr('class', 'ease-inout');\n    grp_inout.append('circle')\n      .attr('cx', 0)\n      .attr('cy', 0)\n      .attr('r', 5);\n\n    keys.attr('transform', function(d) {\n      var dx = self.timeline.x(d.time * 1000);\n      dx = parseInt(dx, 10);\n      var dy = 10;\n      return \"translate(\" + dx + \",\" + dy + \")\";\n    });\n\n    keys.exit().remove();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Keys.js\n **/","export default class Errors {\n  constructor(timeline) {\n    this.timeline = timeline;\n  }\n\n  render(properties) {\n    var self = this;\n    var subGrp = self.timeline.properties.subGrp;\n    var propertiesWithError = function(d) {\n      return d.errors !== undefined;\n    };\n    // use insert with :first-child to prepend.\n    subGrp.insert('svg', ':first-child')\n      .attr('class','line-item__errors')\n      .attr('width', window.innerWidth - self.timeline.label_position_x)\n      .attr('height', self.timeline.lineHeight);\n\n    var errorsValue = function(d) {\n      return d.errors;\n    };\n    var errorTime = function(d) {\n      return d.time;\n    };\n\n    var errors = properties.filter(propertiesWithError)\n      .select('.line-item__errors').selectAll('.error')\n      .data(errorsValue, errorTime);\n\n    errors.enter().append('rect')\n      .attr('class', 'error')\n      .attr('width', 4)\n      .attr('height', self.timeline.lineHeight - 1)\n      .attr('y', '1');\n\n    properties.selectAll('.error').attr('x', function(d) {\n      var dx;\n      dx = self.timeline.x(d.time * 1000);\n      return dx;\n    });\n\n    errors.exit().remove();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Errors.js\n **/","export default class Selection {\n  constructor(timeline, svg, margin) {\n    this.timeline = timeline;\n    this.svg = svg;\n    this.margin = margin;\n\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.init();\n  }\n\n  onMouseUp() {\n    this.svg.selectAll('.selection').remove();\n    // Enable again the default browser text selection.\n    $('body').css({\n      'user-select': 'all'\n    });\n  }\n\n  init() {\n    var self = this;\n    this.svg.on(\"mousedown\", function() {\n      var p = d3.mouse(this);\n      // Only init selection if we click on the timeline and not on the labels.\n      if (p[0] < self.timeline.margin.left) {\n        return;\n      }\n      self.svg.append('rect')\n        .attr({\n          class: 'selection',\n          x: p[0],\n          y: p[1],\n          width: 0,\n          height: 0\n        });\n      // Unselect items.\n      self.timeline.selectionManager.reset();\n      // Prevent default browser text selection.\n      $('body').css({\n        'user-select': 'none'\n      });\n    }).on(\"mousemove\", function() {\n      var s = self.svg.select('.selection');\n      if (s.empty()) {\n        return;\n      }\n      var p = d3.mouse(this);\n      var d = {\n        x: parseInt(s.attr('x'), 10),\n        y: parseInt(s.attr('y'), 10),\n        width: parseInt(s.attr('width'), 10),\n        height: parseInt(s.attr('height'), 10)\n      };\n      // Apply margin to mouse selection.\n      p[0] = Math.max(self.margin.left, p[0]);\n\n      var move = {\n        x: p[0] - d.x,\n        y: p[1] - d.y\n      };\n      if (move.x < 1 || move.x * 2 < d.width) {\n        d.x = p[0];\n        d.width -= move.x;\n      } else {\n        d.width = move.x;\n      }\n\n      if (move.y < 1 || move.y * 2 < d.height) {\n        d.y = p[1];\n        d.height -= move.y;\n      } else {\n        d.height = move.y;\n      }\n\n      s.attr(d);\n\n      // remove margins from selection\n      d.x -= self.margin.left;\n      var key_width = 6;\n\n      d.timeStart = self.timeline.x.invert(d.x - key_width).getTime() / 1000;\n      d.timeEnd = self.timeline.x.invert(d.x + d.width + key_width).getTime() / 1000;\n      var containerBounding = self.svg[0][0].getBoundingClientRect();\n\n      // deselect all previously selected items\n      d3.selectAll('.key--selected').classed('key--selected', false);\n      self.timeline.selectionManager.reset();\n      var selection = [];\n      d3.selectAll('.key').each( function(state_data) {\n        var item_data = d3.select(this.parentNode.parentNode.parentNode).datum();\n        var key_data = d3.select(this).datum();\n\n        // Also keep a reference to the key dom element.\n        key_data._dom = this;\n\n        if (item_data.collapsed !== true) {\n          var itemBounding = d3.select(this)[0][0].getBoundingClientRect();\n          var y = itemBounding.top - containerBounding.top;\n          if (state_data.time >= d.timeStart && state_data.time <= d.timeEnd) {\n            // use or condition for top and bottom\n            if ((y >= d.y && y <= d.y + d.height) || (y + 10 >= d.y && y + 10 <= d.y + d.height)) {\n              d3.select(this).classed('key--selected', true);\n\n              selection.push(key_data);\n            }\n          }\n        }\n      });\n      self.timeline.selectionManager.select(selection);\n    });\n    // Attach the mouseup event to window so that it catch it event if\n    // mouseup happen outside of the browser window.\n    $(window).on(\"mouseup\", this.onMouseUp);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Selection.js\n **/","import 'jquery';\nlet Signals = require('js-signals');\nimport Property from '../editor/Property';\n\nlet tpl_propertiesEditor = require('./../templates/propertiesEditor.tpl.html');\n\nexport default class PropertiesEditor {\n  constructor(editor) {\n    this.editor = editor;\n\n    this.render = this.render.bind(this);\n    this.addProperty = this.addProperty.bind(this);\n    this.onSelect = this.onSelect.bind(this);\n    this.onKeyAdded = this.onKeyAdded.bind(this);\n\n    this.timeline = this.editor.timeline;\n    this.timer = this.editor.timer;\n    this.selectionManager = editor.selectionManager;\n\n    this.$el = $(tpl_propertiesEditor());\n    this.$container = this.$el.find('.properties-editor__main');\n    // todo: rename keyAdded to updated\n    this.keyAdded = new Signals.Signal();\n    this.keyRemoved = new Signals.Signal();\n    this.items = [];\n\n    this.parentElement = editor.el;\n    // Close properties by default.\n    this.parentElement.addClass('properties-is-closed');\n    // Add the properties editor to the document.\n    this.parentElement.append(this.$el);\n\n    this.selectionManager.onSelect.add(this.onSelect);\n\n    // Stop event propagation to no play by accident.\n    this.$el.keypress(function(e) {\n      return e.stopPropagation();\n    });\n  }\n\n  onKeyAdded() {\n    this.keyAdded.dispatch();\n  }\n\n  onSelect(data = false) {\n    this.items.forEach((item) => {item.remove();});\n    this.items = [];\n    this.$container.empty();\n    if (data instanceof Array) {\n      for (var i = 0; i < data.length; i++) {\n        this.addProperty(data[i]);\n      }\n    } else {\n      this.addProperty(data);\n    }\n\n    // When selecting anything, automatically display the properties editor.\n    if (this.items.length) {\n      this.parentElement.removeClass('properties-is-closed');\n    }\n  }\n\n  addProperty(data) {\n    var prop = new Property(this.editor, this.$container, data);\n    prop.keyAdded.add(this.onKeyAdded);\n    this.items.push(prop);\n  }\n\n  render(time, time_changed) {\n    if (!time_changed) {\n      return;\n    }\n    this.items.forEach((prop) => {prop.update();});\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertiesEditor.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_18__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"$\",\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\"}\n ** module id = 18\n ** module chunks = 1\n **/","let Signals = require('js-signals');\nimport PropertyNumber from './PropertyNumber';\nimport PropertyColor from './PropertyColor';\nimport PropertyTween from './PropertyTween';\n\nexport default class Property {\n  constructor(editor, $el, data) {\n    this.editor = editor;\n    this.$el = $el;\n\n    this.onKeyAdded = this.onKeyAdded.bind(this);\n\n    this.timeline = editor.timeline;\n    this.timer = editor.timer;\n    this.selectionManager = editor.selectionManager;\n    this.keyAdded = new Signals.Signal();\n    this.items = [];\n    this.numberProp = false;\n    this.tweenProp = false;\n\n    var key_val = false;\n    var propertyObject = false;\n    var propertyData = false;\n    var lineObject = false;\n    var lineData = false;\n\n    // For keys the _property data should be defined.\n    if (data._property) {\n      propertyData = data._property;\n      lineData = propertyData._line;\n      key_val = data;\n    }\n\n    // Check if we selected a main item.\n    if (data.id) {\n      lineData = data;\n    }\n\n    // data and propertyData are defined on key select.\n    var property_name = false;\n    if (propertyData) {\n      property_name = propertyData.name;\n    }\n\n    // Get the property container.\n    var $container = this.getContainer(lineData);\n\n    var $tween_container = $container;\n\n    // Basic data, loop through properties.\n    for (var key in lineData.properties) {\n      var instance_prop = lineData.properties[key];\n      // show all properties or only 1 if we selected a key.\n      if (!property_name || instance_prop.name === property_name) {\n        var $grp_container = this.getGroupContainer(instance_prop, $container);\n        var numberProp = this.addNumberProperty(instance_prop, lineData, key_val, $grp_container);\n        this.items.push(numberProp);\n        if (instance_prop.name === property_name) {\n          $tween_container = $grp_container;\n        }\n\n        if (property_name) {\n          // Add tween select if we are editing a key, so only if there is property_name.\n          var tweenProp = this.addTweenProperty(instance_prop, lineData, key_val, $tween_container, propertyData);\n          this.items.push(tweenProp);\n        }\n      }\n    }\n\n\n  }\n\n  onKeyAdded() {\n    // propagate the event.\n    this.keyAdded.dispatch();\n  }\n\n  getGroupContainer(instance_prop, $container) {\n    var $existing, $grp, grp_class;\n    if (!instance_prop.group) {\n      grp_class = 'property-grp--general';\n      $existing = $container.find('.' + grp_class);\n      if ($existing.length) {\n        return $existing;\n      } else {\n        $grp = this.createGroupContainer(grp_class);\n        $container.append($grp);\n        return $grp;\n      }\n    } else {\n      // Replace all spaces to dash and make class lowercase\n      var group_name = instance_prop.group.replace(/\\s+/g, '-').toLowerCase();\n      grp_class = 'property-grp--' + group_name;\n      $existing = $container.find('.' + grp_class);\n      if ($existing.length) {\n        return $existing;\n      } else {\n        $grp = this.createGroupContainer(grp_class, instance_prop.group);\n        $container.append($grp);\n        return $grp;\n      }\n    }\n  }\n\n  createGroupContainer(grp_class, label = false) {\n    var $grp = $('<div class=\"property-grp ' + grp_class + '\"></div>');\n    if (label) {\n      $grp.append('<h3 class=\"property-grp__title\">' + label + '</h3>');\n    }\n    return $grp;\n  }\n\n  getContainer(lineData) {\n    var $container = false;\n    if (lineData.id) {\n      $container = $('#property--' + lineData.id);\n      if (!$container.length) {\n        $container = $container = $('<div class=\"properties__wrapper\" id=\"property--' + lineData.id + '\"></div>');\n        this.$el.append($container);\n        if (lineData.label) {\n          $container.append('<h2 class=\"properties-editor__title\">' + lineData.label + '</h2>');\n        }\n      }\n    }\n    if ($container === false) {\n      $container = $('<div class=\"properties__wrapper\" id=\"no-item\"></div>');\n      this.$el.append($container);\n    }\n    return $container;\n  }\n\n  remove() {\n    this.items.forEach((item) => {item.remove();});\n    if (this.keyAdded) {\n      this.keyAdded.dispose();\n    }\n\n    delete this.editor;\n    delete this.$el;\n\n    delete this.timeline;\n    delete this.timer;\n    delete this.selectionManager;\n    delete this.keyAdded;\n    delete this.items;\n    delete this.numberProp;\n    delete this.tweenProp;\n  }\n\n  addNumberProperty(instance_prop, lineData, key_val, $container) {\n    var propClass = PropertyNumber;\n    if (instance_prop.type && instance_prop.type === 'color') {\n      propClass = PropertyColor;\n    }\n    var prop = new propClass(instance_prop, lineData, this.editor, key_val);\n    prop.keyAdded.add(this.onKeyAdded);\n    $container.append(prop.$el);\n    return prop;\n  }\n\n  addTweenProperty(instance_prop, lineData, key_val, $container, propertyData) {\n    var tween = new PropertyTween(instance_prop, lineData, this.editor, key_val, this.timeline);\n    $container.append(tween.$el);\n\n    // Add a remove key button\n    tween.$el.find('[data-action-remove]').click((e) => {\n      e.preventDefault();\n      var index = propertyData.keys.indexOf(key_val);\n      if (index > -1) {\n        propertyData.keys.splice(index, 1);\n        if (key_val._dom) {\n          this.editor.propertiesEditor.keyRemoved.dispatch(key_val._dom);\n        }\n        lineData._isDirty = true;\n      }\n    });\n    return tween;\n  }\n\n  update() {\n    for (var i = 0; i < this.items.length; i++) {\n      var item = this.items[i];\n      item.update();\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/Property.js\n **/","import 'jquery';\nimport PropertyBase from './PropertyBase';\nlet DraggableNumber = require('draggable-number.js');\n\nlet tpl_property = require('../templates/propertyNumber.tpl.html');\n\nexport default class PropertyNumber extends PropertyBase {\n  // instance_property: The current property on the data object.\n  // lineData: The line data object.\n  constructor(instance_property, lineData, editor, key_val = false) {\n    super(instance_property, lineData, editor, key_val);\n    this.onInputChange = this.onInputChange.bind(this);\n    this.$input = this.$el.find('input');\n  }\n\n  getInputVal() {\n    return parseFloat(this.$el.find('input').val());\n  }\n\n  render() {\n    super.render();\n    // By default assign the property default value\n    var val = this.getCurrentVal();\n\n    var data = {\n      id: this.instance_property.name, // \"circleRadius\" instead of \"circle radius\"\n      label: this.instance_property.label || this.instance_property.name,\n      val: val\n    };\n\n    var view = tpl_property(data);\n    this.$el = $(view);\n    this.$el.find('.property__key').click(this.onKeyClick);\n\n    var $input = this.$el.find('input');\n\n    var onChangeEnd = () => {\n      this.editor.undoManager.addState();\n    };\n\n    var draggableOptions = {\n      changeCallback: () => this.onInputChange(),\n      endCallback: () => onChangeEnd()\n    };\n    // Set min & max if they are defined.\n    if ('min' in this.instance_property) {\n      draggableOptions.min = this.instance_property.min;\n    }\n    if ('max' in this.instance_property) {\n      draggableOptions.max = this.instance_property.max;\n    }\n\n    var draggable = new DraggableNumber($input.get(0), draggableOptions);\n    $input.data('draggable', draggable);\n    $input.change(this.onInputChange);\n  }\n\n  remove() {\n    super.remove();\n    if (this.$input.data('draggable')) {\n      this.$input.data('draggable').destroy();\n    }\n\n    delete this.$input;\n    delete this.$el;\n  }\n\n  update() {\n    super.update();\n    var val = this.getCurrentVal();\n    var draggable = this.$input.data('draggable');\n\n    if (draggable) {\n      draggable.set(val.toFixed(3));\n    }\n    else {\n      this.$input.val(val.toFixed(3));\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyNumber.js\n **/","let Signals = require('js-signals');\nlet _ = require('lodash');\nimport Utils from '../core/Utils';\n\nexport default class PropertyBase {\n  // @instance_property: The current property on the data object.\n  // @lineData: The line data object.\n  constructor(instance_property, lineData, editor, key_val = false) {\n    this.instance_property = instance_property;\n    this.lineData = lineData;\n    this.editor = editor;\n    this.key_val = key_val;\n\n    //this.update = this.update.bind(this);\n    this.onInputChange = this.onInputChange.bind(this);\n    this.onKeyClick = this.onKeyClick.bind(this);\n\n    this.timer = editor.timer;\n    this.keyAdded = new Signals.Signal();\n    this.render();\n\n    this.$key = this.$el.find('.property__key');\n  }\n\n  onKeyClick(e) {\n    e.preventDefault();\n    var currentValue = this.getCurrentVal();\n    this.addKey(currentValue);\n  }\n\n  getInputVal() {\n    return this.$el.find('input').val();\n  }\n\n  getCurrentVal() {\n    var val = this.instance_property.val;\n    var prop_name = this.instance_property.name;\n\n    // if we selected a key simply return it's value\n    if (this.key_val) {\n      return this.key_val.val;\n    }\n    if (this.lineData.values !== undefined && this.lineData.values[prop_name]) {\n      return this.lineData.values[prop_name];\n    }\n    return val;\n  }\n\n  onInputChange() {\n    var current_value = this.getInputVal();\n    var currentTime = this.timer.getCurrentTime() / 1000;\n    // if we selected a key simply get the time from it.\n    if (this.key_val) {\n      currentTime = this.key_val.time;\n    }\n\n    if (this.instance_property.keys && this.instance_property.keys.length) {\n      // Add a new key if there is no other key at same time\n      var current_key = _.find(this.instance_property.keys, (key) => key.time == currentTime);\n\n      if (current_key) {\n        // if there is a key update it\n        current_key.val = current_value;\n      }\n      else {\n        // add a new key\n        this.addKey(current_value);\n      }\n    }\n    else {\n      // There is no keys, simply update the property value (for data saving)\n      this.instance_property.val = current_value;\n      // Also directly set the lineData value.\n      this.lineData.values[this.instance_property.name] = current_value;\n      // Simply update the custom object with new values.\n      if (this.lineData.object) {\n        currentTime = this.timer.getCurrentTime() / 1000;\n        // Set the property on the instance object.\n        this.lineData.object.update(currentTime - this.lineData.start);\n      }\n    }\n\n    // Something changed, make the lineData dirty to rebuild things. d\n    this.lineData._isDirty = true;\n  }\n\n  getCurrentKey() {\n    var time = this.timer.getCurrentTime() / 1000;\n    if (!this.instance_property || !this.instance_property.keys) {\n      return false;\n    }\n    if (this.instance_property.keys.length === 0) {\n      return false;\n    }\n    for (var i = 0; i < this.instance_property.keys.length; i++) {\n      var key = this.instance_property.keys[i];\n      if (key.time === time) {\n        return key;\n      }\n    }\n    return false;\n  }\n\n  addKey(val) {\n    var currentTime = this.timer.getCurrentTime() / 1000;\n    var key = {\n      time: currentTime,\n      val: val\n    };\n    this.instance_property.keys.push(key);\n    this.instance_property.keys = Utils.sortKeys(this.instance_property.keys);\n    this.lineData._isDirty = true;\n    this.keyAdded.dispatch();\n  }\n\n  render() {\n    // current values are defined in @lineData.values\n    this.values = this.lineData.values !== undefined ? this.lineData.values : {};\n  }\n\n  update() {\n    var key = this.getCurrentKey();\n    this.$key.toggleClass('property__key--active', key);\n  }\n\n  remove() {\n    if (this.keyAdded) {\n      this.keyAdded.dispose();\n    }\n    delete this.instance_property;\n    delete this.lineData;\n    delete this.editor;\n    delete this.key_val;\n\n    delete this.timer;\n    delete this.keyAdded;\n    delete this.$key;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyBase.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_22__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"DraggableNumber\",\"commonjs\":\"DraggableNumber\",\"commonjs2\":\"DraggableNumber\",\"amd\":\"DraggableNumber\"}\n ** module id = 22\n ** module chunks = 1\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--number\\\">\");t.b(\"\\n\" + i);t.b(\"  <button class=\\\"property__key\\\"></button>\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">\");t.b(t.v(t.f(\"label\",c,p,0)));t.b(\"</label>\");t.b(\"\\n\" + i);t.b(\"  <input type=\\\"number\\\" id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__input\\\" value=\\\"\");t.b(t.v(t.f(\"val\",c,p,0)));t.b(\"\\\" />\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--number\\\">\\n  <button class=\\\"property__key\\\"></button>\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">{{label}}</label>\\n  <input type=\\\"number\\\" id=\\\"{{id}}\\\" class=\\\"property__input\\\" value=\\\"{{val}}\\\" />\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/propertyNumber.tpl.html\n ** module id = 23\n ** module chunks = 1\n **/","/*\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n// This file is for use with Node.js. See dist/ for browser files.\n\nvar Hogan = require('./compiler');\nHogan.Template = require('./template').Template;\nHogan.template = Hogan.Template;\nmodule.exports = Hogan;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** /Users/poly/ws/TweenTime/~/hogan.js/lib/hogan.js\n ** module id = 24\n ** module chunks = 1\n **/","/*\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n(function (Hogan) {\n  // Setup regex  assignments\n  // remove whitespace according to Mustache spec\n  var rIsWhitespace = /\\S/,\n      rQuot = /\\\"/g,\n      rNewline =  /\\n/g,\n      rCr = /\\r/g,\n      rSlash = /\\\\/g,\n      rLineSep = /\\u2028/,\n      rParagraphSep = /\\u2029/;\n\n  Hogan.tags = {\n    '#': 1, '^': 2, '<': 3, '$': 4,\n    '/': 5, '!': 6, '>': 7, '=': 8, '_v': 9,\n    '{': 10, '&': 11, '_t': 12\n  };\n\n  Hogan.scan = function scan(text, delimiters) {\n    var len = text.length,\n        IN_TEXT = 0,\n        IN_TAG_TYPE = 1,\n        IN_TAG = 2,\n        state = IN_TEXT,\n        tagType = null,\n        tag = null,\n        buf = '',\n        tokens = [],\n        seenTag = false,\n        i = 0,\n        lineStart = 0,\n        otag = '{{',\n        ctag = '}}';\n\n    function addBuf() {\n      if (buf.length > 0) {\n        tokens.push({tag: '_t', text: new String(buf)});\n        buf = '';\n      }\n    }\n\n    function lineIsWhitespace() {\n      var isAllWhitespace = true;\n      for (var j = lineStart; j < tokens.length; j++) {\n        isAllWhitespace =\n          (Hogan.tags[tokens[j].tag] < Hogan.tags['_v']) ||\n          (tokens[j].tag == '_t' && tokens[j].text.match(rIsWhitespace) === null);\n        if (!isAllWhitespace) {\n          return false;\n        }\n      }\n\n      return isAllWhitespace;\n    }\n\n    function filterLine(haveSeenTag, noNewLine) {\n      addBuf();\n\n      if (haveSeenTag && lineIsWhitespace()) {\n        for (var j = lineStart, next; j < tokens.length; j++) {\n          if (tokens[j].text) {\n            if ((next = tokens[j+1]) && next.tag == '>') {\n              // set indent to token value\n              next.indent = tokens[j].text.toString()\n            }\n            tokens.splice(j, 1);\n          }\n        }\n      } else if (!noNewLine) {\n        tokens.push({tag:'\\n'});\n      }\n\n      seenTag = false;\n      lineStart = tokens.length;\n    }\n\n    function changeDelimiters(text, index) {\n      var close = '=' + ctag,\n          closeIndex = text.indexOf(close, index),\n          delimiters = trim(\n            text.substring(text.indexOf('=', index) + 1, closeIndex)\n          ).split(' ');\n\n      otag = delimiters[0];\n      ctag = delimiters[delimiters.length - 1];\n\n      return closeIndex + close.length - 1;\n    }\n\n    if (delimiters) {\n      delimiters = delimiters.split(' ');\n      otag = delimiters[0];\n      ctag = delimiters[1];\n    }\n\n    for (i = 0; i < len; i++) {\n      if (state == IN_TEXT) {\n        if (tagChange(otag, text, i)) {\n          --i;\n          addBuf();\n          state = IN_TAG_TYPE;\n        } else {\n          if (text.charAt(i) == '\\n') {\n            filterLine(seenTag);\n          } else {\n            buf += text.charAt(i);\n          }\n        }\n      } else if (state == IN_TAG_TYPE) {\n        i += otag.length - 1;\n        tag = Hogan.tags[text.charAt(i + 1)];\n        tagType = tag ? text.charAt(i + 1) : '_v';\n        if (tagType == '=') {\n          i = changeDelimiters(text, i);\n          state = IN_TEXT;\n        } else {\n          if (tag) {\n            i++;\n          }\n          state = IN_TAG;\n        }\n        seenTag = i;\n      } else {\n        if (tagChange(ctag, text, i)) {\n          tokens.push({tag: tagType, n: trim(buf), otag: otag, ctag: ctag,\n                       i: (tagType == '/') ? seenTag - otag.length : i + ctag.length});\n          buf = '';\n          i += ctag.length - 1;\n          state = IN_TEXT;\n          if (tagType == '{') {\n            if (ctag == '}}') {\n              i++;\n            } else {\n              cleanTripleStache(tokens[tokens.length - 1]);\n            }\n          }\n        } else {\n          buf += text.charAt(i);\n        }\n      }\n    }\n\n    filterLine(seenTag, true);\n\n    return tokens;\n  }\n\n  function cleanTripleStache(token) {\n    if (token.n.substr(token.n.length - 1) === '}') {\n      token.n = token.n.substring(0, token.n.length - 1);\n    }\n  }\n\n  function trim(s) {\n    if (s.trim) {\n      return s.trim();\n    }\n\n    return s.replace(/^\\s*|\\s*$/g, '');\n  }\n\n  function tagChange(tag, text, index) {\n    if (text.charAt(index) != tag.charAt(0)) {\n      return false;\n    }\n\n    for (var i = 1, l = tag.length; i < l; i++) {\n      if (text.charAt(index + i) != tag.charAt(i)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  // the tags allowed inside super templates\n  var allowedInSuper = {'_t': true, '\\n': true, '$': true, '/': true};\n\n  function buildTree(tokens, kind, stack, customTags) {\n    var instructions = [],\n        opener = null,\n        tail = null,\n        token = null;\n\n    tail = stack[stack.length - 1];\n\n    while (tokens.length > 0) {\n      token = tokens.shift();\n\n      if (tail && tail.tag == '<' && !(token.tag in allowedInSuper)) {\n        throw new Error('Illegal content in < super tag.');\n      }\n\n      if (Hogan.tags[token.tag] <= Hogan.tags['$'] || isOpener(token, customTags)) {\n        stack.push(token);\n        token.nodes = buildTree(tokens, token.tag, stack, customTags);\n      } else if (token.tag == '/') {\n        if (stack.length === 0) {\n          throw new Error('Closing tag without opener: /' + token.n);\n        }\n        opener = stack.pop();\n        if (token.n != opener.n && !isCloser(token.n, opener.n, customTags)) {\n          throw new Error('Nesting error: ' + opener.n + ' vs. ' + token.n);\n        }\n        opener.end = token.i;\n        return instructions;\n      } else if (token.tag == '\\n') {\n        token.last = (tokens.length == 0) || (tokens[0].tag == '\\n');\n      }\n\n      instructions.push(token);\n    }\n\n    if (stack.length > 0) {\n      throw new Error('missing closing tag: ' + stack.pop().n);\n    }\n\n    return instructions;\n  }\n\n  function isOpener(token, tags) {\n    for (var i = 0, l = tags.length; i < l; i++) {\n      if (tags[i].o == token.n) {\n        token.tag = '#';\n        return true;\n      }\n    }\n  }\n\n  function isCloser(close, open, tags) {\n    for (var i = 0, l = tags.length; i < l; i++) {\n      if (tags[i].c == close && tags[i].o == open) {\n        return true;\n      }\n    }\n  }\n\n  function stringifySubstitutions(obj) {\n    var items = [];\n    for (var key in obj) {\n      items.push('\"' + esc(key) + '\": function(c,p,t,i) {' + obj[key] + '}');\n    }\n    return \"{ \" + items.join(\",\") + \" }\";\n  }\n\n  function stringifyPartials(codeObj) {\n    var partials = [];\n    for (var key in codeObj.partials) {\n      partials.push('\"' + esc(key) + '\":{name:\"' + esc(codeObj.partials[key].name) + '\", ' + stringifyPartials(codeObj.partials[key]) + \"}\");\n    }\n    return \"partials: {\" + partials.join(\",\") + \"}, subs: \" + stringifySubstitutions(codeObj.subs);\n  }\n\n  Hogan.stringify = function(codeObj, text, options) {\n    return \"{code: function (c,p,i) { \" + Hogan.wrapMain(codeObj.code) + \" },\" + stringifyPartials(codeObj) +  \"}\";\n  }\n\n  var serialNo = 0;\n  Hogan.generate = function(tree, text, options) {\n    serialNo = 0;\n    var context = { code: '', subs: {}, partials: {} };\n    Hogan.walk(tree, context);\n\n    if (options.asString) {\n      return this.stringify(context, text, options);\n    }\n\n    return this.makeTemplate(context, text, options);\n  }\n\n  Hogan.wrapMain = function(code) {\n    return 'var t=this;t.b(i=i||\"\");' + code + 'return t.fl();';\n  }\n\n  Hogan.template = Hogan.Template;\n\n  Hogan.makeTemplate = function(codeObj, text, options) {\n    var template = this.makePartials(codeObj);\n    template.code = new Function('c', 'p', 'i', this.wrapMain(codeObj.code));\n    return new this.template(template, text, this, options);\n  }\n\n  Hogan.makePartials = function(codeObj) {\n    var key, template = {subs: {}, partials: codeObj.partials, name: codeObj.name};\n    for (key in template.partials) {\n      template.partials[key] = this.makePartials(template.partials[key]);\n    }\n    for (key in codeObj.subs) {\n      template.subs[key] = new Function('c', 'p', 't', 'i', codeObj.subs[key]);\n    }\n    return template;\n  }\n\n  function esc(s) {\n    return s.replace(rSlash, '\\\\\\\\')\n            .replace(rQuot, '\\\\\\\"')\n            .replace(rNewline, '\\\\n')\n            .replace(rCr, '\\\\r')\n            .replace(rLineSep, '\\\\u2028')\n            .replace(rParagraphSep, '\\\\u2029');\n  }\n\n  function chooseMethod(s) {\n    return (~s.indexOf('.')) ? 'd' : 'f';\n  }\n\n  function createPartial(node, context) {\n    var prefix = \"<\" + (context.prefix || \"\");\n    var sym = prefix + node.n + serialNo++;\n    context.partials[sym] = {name: node.n, partials: {}};\n    context.code += 't.b(t.rp(\"' +  esc(sym) + '\",c,p,\"' + (node.indent || '') + '\"));';\n    return sym;\n  }\n\n  Hogan.codegen = {\n    '#': function(node, context) {\n      context.code += 'if(t.s(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,1),' +\n                      'c,p,0,' + node.i + ',' + node.end + ',\"' + node.otag + \" \" + node.ctag + '\")){' +\n                      't.rs(c,p,' + 'function(c,p,t){';\n      Hogan.walk(node.nodes, context);\n      context.code += '});c.pop();}';\n    },\n\n    '^': function(node, context) {\n      context.code += 'if(!t.s(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,1),c,p,1,0,0,\"\")){';\n      Hogan.walk(node.nodes, context);\n      context.code += '};';\n    },\n\n    '>': createPartial,\n    '<': function(node, context) {\n      var ctx = {partials: {}, code: '', subs: {}, inPartial: true};\n      Hogan.walk(node.nodes, ctx);\n      var template = context.partials[createPartial(node, context)];\n      template.subs = ctx.subs;\n      template.partials = ctx.partials;\n    },\n\n    '$': function(node, context) {\n      var ctx = {subs: {}, code: '', partials: context.partials, prefix: node.n};\n      Hogan.walk(node.nodes, ctx);\n      context.subs[node.n] = ctx.code;\n      if (!context.inPartial) {\n        context.code += 't.sub(\"' + esc(node.n) + '\",c,p,i);';\n      }\n    },\n\n    '\\n': function(node, context) {\n      context.code += write('\"\\\\n\"' + (node.last ? '' : ' + i'));\n    },\n\n    '_v': function(node, context) {\n      context.code += 't.b(t.v(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,0)));';\n    },\n\n    '_t': function(node, context) {\n      context.code += write('\"' + esc(node.text) + '\"');\n    },\n\n    '{': tripleStache,\n\n    '&': tripleStache\n  }\n\n  function tripleStache(node, context) {\n    context.code += 't.b(t.t(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,0)));';\n  }\n\n  function write(s) {\n    return 't.b(' + s + ');';\n  }\n\n  Hogan.walk = function(nodelist, context) {\n    var func;\n    for (var i = 0, l = nodelist.length; i < l; i++) {\n      func = Hogan.codegen[nodelist[i].tag];\n      func && func(nodelist[i], context);\n    }\n    return context;\n  }\n\n  Hogan.parse = function(tokens, text, options) {\n    options = options || {};\n    return buildTree(tokens, '', [], options.sectionTags || []);\n  }\n\n  Hogan.cache = {};\n\n  Hogan.cacheKey = function(text, options) {\n    return [text, !!options.asString, !!options.disableLambda, options.delimiters, !!options.modelGet].join('||');\n  }\n\n  Hogan.compile = function(text, options) {\n    options = options || {};\n    var key = Hogan.cacheKey(text, options);\n    var template = this.cache[key];\n\n    if (template) {\n      var partials = template.partials;\n      for (var name in partials) {\n        delete partials[name].instance;\n      }\n      return template;\n    }\n\n    template = this.generate(this.parse(this.scan(text, options.delimiters), text, options), text, options);\n    return this.cache[key] = template;\n  }\n})(typeof exports !== 'undefined' ? exports : Hogan);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** /Users/poly/ws/TweenTime/~/hogan.js/lib/compiler.js\n ** module id = 25\n ** module chunks = 1\n **/","/*\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\nvar Hogan = {};\n\n(function (Hogan) {\n  Hogan.Template = function (codeObj, text, compiler, options) {\n    codeObj = codeObj || {};\n    this.r = codeObj.code || this.r;\n    this.c = compiler;\n    this.options = options || {};\n    this.text = text || '';\n    this.partials = codeObj.partials || {};\n    this.subs = codeObj.subs || {};\n    this.buf = '';\n  }\n\n  Hogan.Template.prototype = {\n    // render: replaced by generated code.\n    r: function (context, partials, indent) { return ''; },\n\n    // variable escaping\n    v: hoganEscape,\n\n    // triple stache\n    t: coerceToString,\n\n    render: function render(context, partials, indent) {\n      return this.ri([context], partials || {}, indent);\n    },\n\n    // render internal -- a hook for overrides that catches partials too\n    ri: function (context, partials, indent) {\n      return this.r(context, partials, indent);\n    },\n\n    // ensurePartial\n    ep: function(symbol, partials) {\n      var partial = this.partials[symbol];\n\n      // check to see that if we've instantiated this partial before\n      var template = partials[partial.name];\n      if (partial.instance && partial.base == template) {\n        return partial.instance;\n      }\n\n      if (typeof template == 'string') {\n        if (!this.c) {\n          throw new Error(\"No compiler available.\");\n        }\n        template = this.c.compile(template, this.options);\n      }\n\n      if (!template) {\n        return null;\n      }\n\n      // We use this to check whether the partials dictionary has changed\n      this.partials[symbol].base = template;\n\n      if (partial.subs) {\n        // Make sure we consider parent template now\n        if (!partials.stackText) partials.stackText = {};\n        for (key in partial.subs) {\n          if (!partials.stackText[key]) {\n            partials.stackText[key] = (this.activeSub !== undefined && partials.stackText[this.activeSub]) ? partials.stackText[this.activeSub] : this.text;\n          }\n        }\n        template = createSpecializedPartial(template, partial.subs, partial.partials,\n          this.stackSubs, this.stackPartials, partials.stackText);\n      }\n      this.partials[symbol].instance = template;\n\n      return template;\n    },\n\n    // tries to find a partial in the current scope and render it\n    rp: function(symbol, context, partials, indent) {\n      var partial = this.ep(symbol, partials);\n      if (!partial) {\n        return '';\n      }\n\n      return partial.ri(context, partials, indent);\n    },\n\n    // render a section\n    rs: function(context, partials, section) {\n      var tail = context[context.length - 1];\n\n      if (!isArray(tail)) {\n        section(context, partials, this);\n        return;\n      }\n\n      for (var i = 0; i < tail.length; i++) {\n        context.push(tail[i]);\n        section(context, partials, this);\n        context.pop();\n      }\n    },\n\n    // maybe start a section\n    s: function(val, ctx, partials, inverted, start, end, tags) {\n      var pass;\n\n      if (isArray(val) && val.length === 0) {\n        return false;\n      }\n\n      if (typeof val == 'function') {\n        val = this.ms(val, ctx, partials, inverted, start, end, tags);\n      }\n\n      pass = !!val;\n\n      if (!inverted && pass && ctx) {\n        ctx.push((typeof val == 'object') ? val : ctx[ctx.length - 1]);\n      }\n\n      return pass;\n    },\n\n    // find values with dotted names\n    d: function(key, ctx, partials, returnFound) {\n      var found,\n          names = key.split('.'),\n          val = this.f(names[0], ctx, partials, returnFound),\n          doModelGet = this.options.modelGet,\n          cx = null;\n\n      if (key === '.' && isArray(ctx[ctx.length - 2])) {\n        val = ctx[ctx.length - 1];\n      } else {\n        for (var i = 1; i < names.length; i++) {\n          found = findInScope(names[i], val, doModelGet);\n          if (found !== undefined) {\n            cx = val;\n            val = found;\n          } else {\n            val = '';\n          }\n        }\n      }\n\n      if (returnFound && !val) {\n        return false;\n      }\n\n      if (!returnFound && typeof val == 'function') {\n        ctx.push(cx);\n        val = this.mv(val, ctx, partials);\n        ctx.pop();\n      }\n\n      return val;\n    },\n\n    // find values with normal names\n    f: function(key, ctx, partials, returnFound) {\n      var val = false,\n          v = null,\n          found = false,\n          doModelGet = this.options.modelGet;\n\n      for (var i = ctx.length - 1; i >= 0; i--) {\n        v = ctx[i];\n        val = findInScope(key, v, doModelGet);\n        if (val !== undefined) {\n          found = true;\n          break;\n        }\n      }\n\n      if (!found) {\n        return (returnFound) ? false : \"\";\n      }\n\n      if (!returnFound && typeof val == 'function') {\n        val = this.mv(val, ctx, partials);\n      }\n\n      return val;\n    },\n\n    // higher order templates\n    ls: function(func, cx, partials, text, tags) {\n      var oldTags = this.options.delimiters;\n\n      this.options.delimiters = tags;\n      this.b(this.ct(coerceToString(func.call(cx, text)), cx, partials));\n      this.options.delimiters = oldTags;\n\n      return false;\n    },\n\n    // compile text\n    ct: function(text, cx, partials) {\n      if (this.options.disableLambda) {\n        throw new Error('Lambda features disabled.');\n      }\n      return this.c.compile(text, this.options).render(cx, partials);\n    },\n\n    // template result buffering\n    b: function(s) { this.buf += s; },\n\n    fl: function() { var r = this.buf; this.buf = ''; return r; },\n\n    // method replace section\n    ms: function(func, ctx, partials, inverted, start, end, tags) {\n      var textSource,\n          cx = ctx[ctx.length - 1],\n          result = func.call(cx);\n\n      if (typeof result == 'function') {\n        if (inverted) {\n          return true;\n        } else {\n          textSource = (this.activeSub && this.subsText && this.subsText[this.activeSub]) ? this.subsText[this.activeSub] : this.text;\n          return this.ls(result, cx, partials, textSource.substring(start, end), tags);\n        }\n      }\n\n      return result;\n    },\n\n    // method replace variable\n    mv: function(func, ctx, partials) {\n      var cx = ctx[ctx.length - 1];\n      var result = func.call(cx);\n\n      if (typeof result == 'function') {\n        return this.ct(coerceToString(result.call(cx)), cx, partials);\n      }\n\n      return result;\n    },\n\n    sub: function(name, context, partials, indent) {\n      var f = this.subs[name];\n      if (f) {\n        this.activeSub = name;\n        f(context, partials, this, indent);\n        this.activeSub = false;\n      }\n    }\n\n  };\n\n  //Find a key in an object\n  function findInScope(key, scope, doModelGet) {\n    var val;\n\n    if (scope && typeof scope == 'object') {\n\n      if (scope[key] !== undefined) {\n        val = scope[key];\n\n      // try lookup with get for backbone or similar model data\n      } else if (doModelGet && scope.get && typeof scope.get == 'function') {\n        val = scope.get(key);\n      }\n    }\n\n    return val;\n  }\n\n  function createSpecializedPartial(instance, subs, partials, stackSubs, stackPartials, stackText) {\n    function PartialTemplate() {};\n    PartialTemplate.prototype = instance;\n    function Substitutions() {};\n    Substitutions.prototype = instance.subs;\n    var key;\n    var partial = new PartialTemplate();\n    partial.subs = new Substitutions();\n    partial.subsText = {};  //hehe. substext.\n    partial.buf = '';\n\n    stackSubs = stackSubs || {};\n    partial.stackSubs = stackSubs;\n    partial.subsText = stackText;\n    for (key in subs) {\n      if (!stackSubs[key]) stackSubs[key] = subs[key];\n    }\n    for (key in stackSubs) {\n      partial.subs[key] = stackSubs[key];\n    }\n\n    stackPartials = stackPartials || {};\n    partial.stackPartials = stackPartials;\n    for (key in partials) {\n      if (!stackPartials[key]) stackPartials[key] = partials[key];\n    }\n    for (key in stackPartials) {\n      partial.partials[key] = stackPartials[key];\n    }\n\n    return partial;\n  }\n\n  var rAmp = /&/g,\n      rLt = /</g,\n      rGt = />/g,\n      rApos = /\\'/g,\n      rQuot = /\\\"/g,\n      hChars = /[&<>\\\"\\']/;\n\n  function coerceToString(val) {\n    return String((val === null || val === undefined) ? '' : val);\n  }\n\n  function hoganEscape(str) {\n    str = coerceToString(str);\n    return hChars.test(str) ?\n      str\n        .replace(rAmp, '&amp;')\n        .replace(rLt, '&lt;')\n        .replace(rGt, '&gt;')\n        .replace(rApos, '&#39;')\n        .replace(rQuot, '&quot;') :\n      str;\n  }\n\n  var isArray = Array.isArray || function(a) {\n    return Object.prototype.toString.call(a) === '[object Array]';\n  };\n\n})(typeof exports !== 'undefined' ? exports : Hogan);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** /Users/poly/ws/TweenTime/~/hogan.js/lib/template.js\n ** module id = 26\n ** module chunks = 1\n **/","import 'jquery';\nrequire('spectrum');\nimport PropertyBase from './PropertyBase';\n\nlet tpl_property = require('../templates/propertyColor.tpl.html');\n\nexport default class PropertyColor extends PropertyBase {\n  constructor(instance_property, lineData, editor, key_val = false) {\n    super(instance_property, lineData, editor, key_val);\n    this.onInputChange = this.onInputChange.bind(this);\n    this.$input = this.$el.find('input');\n  }\n\n  render() {\n    super.render();\n    // By default assign the property default value\n    var val = this.getCurrentVal();\n\n    var data = {\n      id: this.instance_property.name, // \"circleRadius\" instead of \"circle radius\"\n      label: this.instance_property.label || this.instance_property.name,\n      val: val\n    };\n\n    var view = tpl_property(data);\n    this.$el = $(view);\n    this.$el.find('.property__key').click(this.onKeyClick);\n\n    var $input = this.$el.find('input');\n\n    $input.spectrum({\n      allowEmpty: false,\n      showAlpha: true,\n      clickoutFiresChange: false,\n      preferredFormat: \"rgb\",\n      change: () => {\n        this.editor.undoManager.addState();\n      },\n      move: (color) => {\n        if (color._a == 1) {\n          $input.val(color.toHexString());\n        }\n        else {\n          $input.val(color.toRgbString());\n        }\n\n        this.onInputChange();\n      }\n    });\n\n    $input.change(this.onInputChange);\n  }\n\n  remove() {\n    super.remove();\n    this.$el.find('input').spectrum('destroy');\n    delete this.$el;\n    delete this.$input;\n  }\n\n  update() {\n    super.update();\n    var val = this.getCurrentVal();\n    this.$input.val(val);\n    this.$input.spectrum('set', val);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyColor.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_28__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"spectrum\"\n ** module id = 28\n ** module chunks = 1\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--number\\\">\");t.b(\"\\n\" + i);t.b(\"  <button class=\\\"property__key\\\"></button>\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">\");t.b(t.v(t.f(\"label\",c,p,0)));t.b(\"</label>\");t.b(\"\\n\" + i);t.b(\"  <input id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__input\\\" value=\\\"\");t.b(t.v(t.f(\"val\",c,p,0)));t.b(\"\\\" />\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--number\\\">\\n  <button class=\\\"property__key\\\"></button>\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">{{label}}</label>\\n  <input id=\\\"{{id}}\\\" class=\\\"property__input\\\" value=\\\"{{val}}\\\" />\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/propertyColor.tpl.html\n ** module id = 29\n ** module chunks = 1\n **/","import 'jquery';\n\nlet tpl_property = require('../templates/propertyTween.tpl.html');\n\nexport default class PropertyTween {\n  // instance_property: The current property on the data object.\n  // lineData: The line data object.\n  constructor(instance_property, lineData, editor, key_val = false, timeline = false) {\n    this.instance_property = instance_property;\n    this.lineData = lineData;\n    this.editor = editor;\n    this.key_val = key_val;\n    this.timeline = timeline;\n\n    this.onChange = this.onChange.bind(this);\n\n    this.timer = this.editor.timer;\n    this.$time = false;\n    this.$el = false;\n    this.render();\n  }\n\n  remove() {\n    delete this.$el;\n    delete this.instance_property;\n    delete this.lineData;\n    delete this.editor;\n    delete this.key_val;\n    delete this.timeline;\n\n    delete this.timer;\n    delete this.$time;\n  }\n\n  render() {\n    var self = this;\n    if (!this.key_val.ease) {\n      this.key_val.ease = \"Quad.easeOut\";\n    }\n    var data = {\n      id: this.instance_property.name + \"_tween\",\n      val: this.key_val.ease,\n      time: this.key_val.time.toFixed(3),\n      options: ['Linear.easeNone'],\n      selected: function() {\n        if (this.toString() === self.key_val.ease) {\n          return 'selected';\n        } else {\n          return '';\n        }\n      }\n    };\n\n    var tweens = [\"Quad\", \"Cubic\", \"Quart\", \"Quint\", \"Strong\"];\n    for (var i = 0; i < tweens.length; i++) {\n      var tween = tweens[i];\n      data.options.push(tween + \".easeOut\");\n      data.options.push(tween + \".easeIn\");\n      data.options.push(tween + \".easeInOut\");\n    }\n\n    this.$el = $(tpl_property(data));\n    this.$time = this.$el.find('.property__key-time strong');\n    this.$time.keypress((e) => {\n      if (e.charCode == 13) {\n        // Enter\n        e.preventDefault();\n        this.$time.blur();\n        this.updateKeyTime(this.$time.text());\n      }\n    });\n\n    this.$time.on('click', () => document.execCommand('selectAll', false, null));\n    this.$el.find('select').change(this.onChange);\n  }\n\n  updateKeyTime(time) {\n    time = parseFloat(time);\n    if (isNaN(time)) {\n      time = this.key_val.time;\n    }\n    this.$time.text(time);\n    this.key_val.time = time;\n    this.onChange();\n  }\n\n  onChange() {\n    var ease = this.$el.find('select').val();\n    this.key_val.ease = ease;\n    this.editor.undoManager.addState();\n    this.lineData._isDirty = true;\n    this.timeline._isDirty = true;\n  }\n\n  update() {\n    // todo: use mustache instead...\n    this.$time.html(this.key_val.time.toFixed(3));\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyTween.js\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--tween\\\">\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">easing</label>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"property__select\\\">\");t.b(\"\\n\" + i);t.b(\"    <div class=\\\"custom-select\\\">\");t.b(\"\\n\" + i);t.b(\"      <select id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\">\");t.b(\"\\n\" + i);if(t.s(t.f(\"options\",c,p,1),c,p,0,212,279,\"{{ }}\")){t.rs(c,p,function(c,p,t){t.b(\"        <option value=\\\"\");t.b(t.v(t.d(\".\",c,p,0)));t.b(\"\\\" \");t.b(t.v(t.f(\"selected\",c,p,0)));t.b(\">\");t.b(t.v(t.d(\".\",c,p,0)));t.b(\"</option>\");t.b(\"\\n\" + i);});c.pop();}t.b(\"      </select>\");t.b(\"\\n\" + i);t.b(\"    </div>\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\" + i);t.b(\"<div class=\\\"properties-editor__actions actions\\\">\");t.b(\"\\n\" + i);t.b(\"  <span class=\\\"property__key-time\\\">key at <strong class=\\\"property__key-input\\\" contenteditable=\\\"true\\\">\");t.b(t.v(t.f(\"time\",c,p,0)));t.b(\"</strong> seconds</span>\");t.b(\"\\n\" + i);t.b(\"  <a href=\\\"#\\\" class=\\\"actions__item\\\" data-action-remove>Remove key</a>\");t.b(\"\\n\" + i);t.b(\"</div>\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--tween\\\">\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">easing</label>\\n  <div class=\\\"property__select\\\">\\n    <div class=\\\"custom-select\\\">\\n      <select id=\\\"{{id}}\\\">\\n        {{#options}}\\n        <option value=\\\"{{.}}\\\" {{selected}}>{{.}}</option>\\n        {{/options}}\\n      </select>\\n    </div>\\n  </div>\\n</div>\\n<div class=\\\"properties-editor__actions actions\\\">\\n  <span class=\\\"property__key-time\\\">key at <strong class=\\\"property__key-input\\\" contenteditable=\\\"true\\\">{{time}}</strong> seconds</span>\\n  <a href=\\\"#\\\" class=\\\"actions__item\\\" data-action-remove>Remove key</a>\\n</div>\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/propertyTween.tpl.html\n ** module id = 31\n ** module chunks = 1\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"properties-editor\\\">\");t.b(\"\\n\" + i);t.b(\"  <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle-side\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"properties-editor__main\\\"></div>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"properties-editor\\\">\\n  <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle-side\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\\n  <div class=\\\"properties-editor__main\\\"></div>\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/propertiesEditor.tpl.html\n ** module id = 32\n ** module chunks = 1\n **/","let saveAs = require('../bower_components/FileSaver/FileSaver.js');\n\nexport default class EditorMenu {\n  constructor(tweenTime, $timeline, editor) {\n    this.tweenTime = tweenTime;\n    this.$timeline = $timeline;\n    this.editor = editor;\n    this.timer = this.tweenTime.timer;\n    this.initExport();\n    this.initToggle();\n  }\n\n  initToggle() {\n    var parentElement = this.editor.el;\n    var timelineClosed = false;\n    var $toggleLink = this.$timeline.find('[data-action=\"toggle\"]');\n    $toggleLink.click((e) => {\n      e.preventDefault();\n      timelineClosed = !timelineClosed;\n      $toggleLink.toggleClass('menu-item--toggle-up', timelineClosed);\n      parentElement.toggleClass('timeline-is-closed', timelineClosed);\n      return window.dispatchEvent(new Event('resize'));\n    });\n    var $toggleLinkSide = $('.properties-editor', parentElement).find('[data-action=\"toggle\"]');\n    $toggleLinkSide.click((e) => {\n      var propertiesClosed;\n      e.preventDefault();\n      propertiesClosed = !parentElement.hasClass('properties-is-closed');\n      parentElement.toggleClass('properties-is-closed', propertiesClosed);\n      return window.dispatchEvent(new Event('resize'));\n    });\n  }\n\n  initExport() {\n    var exporter = this.editor.exporter;\n    this.$timeline.find('[data-action=\"export\"]').click(function(e) {\n      e.preventDefault();\n      var data = exporter.getJSON();\n      var blob = new Blob([data], {\n        \"type\": \"text/json;charset=utf-8\"\n      });\n      saveAs(blob, 'data.json');\n    });\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./editor/EditorMenu.js\n **/","/* FileSaver.js\n * A saveAs() FileSaver implementation.\n * 2014-08-29\n *\n * By Eli Grey, http://eligrey.com\n * License: X11/MIT\n *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n */\n\n/*global self */\n/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\n\n/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\n\nvar saveAs = saveAs\n  // IE 10+ (native saveAs)\n  || (typeof navigator !== \"undefined\" &&\n      navigator.msSaveOrOpenBlob && navigator.msSaveOrOpenBlob.bind(navigator))\n  // Everyone else\n  || (function(view) {\n\t\"use strict\";\n\t// IE <10 is explicitly unsupported\n\tif (typeof navigator !== \"undefined\" &&\n\t    /MSIE [1-9]\\./.test(navigator.userAgent)) {\n\t\treturn;\n\t}\n\tvar\n\t\t  doc = view.document\n\t\t  // only get URL when necessary in case Blob.js hasn't overridden it yet\n\t\t, get_URL = function() {\n\t\t\treturn view.URL || view.webkitURL || view;\n\t\t}\n\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\n\t\t, can_use_save_link = \"download\" in save_link\n\t\t, click = function(node) {\n\t\t\tvar event = doc.createEvent(\"MouseEvents\");\n\t\t\tevent.initMouseEvent(\n\t\t\t\t\"click\", true, false, view, 0, 0, 0, 0, 0\n\t\t\t\t, false, false, false, false, 0, null\n\t\t\t);\n\t\t\tnode.dispatchEvent(event);\n\t\t}\n\t\t, webkit_req_fs = view.webkitRequestFileSystem\n\t\t, req_fs = view.requestFileSystem || webkit_req_fs || view.mozRequestFileSystem\n\t\t, throw_outside = function(ex) {\n\t\t\t(view.setImmediate || view.setTimeout)(function() {\n\t\t\t\tthrow ex;\n\t\t\t}, 0);\n\t\t}\n\t\t, force_saveable_type = \"application/octet-stream\"\n\t\t, fs_min_size = 0\n\t\t// See https://code.google.com/p/chromium/issues/detail?id=375297#c7 for\n\t\t// the reasoning behind the timeout and revocation flow\n\t\t, arbitrary_revoke_timeout = 10\n\t\t, revoke = function(file) {\n\t\t\tvar revoker = function() {\n\t\t\t\tif (typeof file === \"string\") { // file is an object URL\n\t\t\t\t\tget_URL().revokeObjectURL(file);\n\t\t\t\t} else { // file is a File\n\t\t\t\t\tfile.remove();\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (view.chrome) {\n\t\t\t\trevoker();\n\t\t\t} else {\n\t\t\t\tsetTimeout(revoker, arbitrary_revoke_timeout);\n\t\t\t}\n\t\t}\n\t\t, dispatch = function(filesaver, event_types, event) {\n\t\t\tevent_types = [].concat(event_types);\n\t\t\tvar i = event_types.length;\n\t\t\twhile (i--) {\n\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\n\t\t\t\tif (typeof listener === \"function\") {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\tthrow_outside(ex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t, FileSaver = function(blob, name) {\n\t\t\t// First try a.download, then web filesystem, then object URLs\n\t\t\tvar\n\t\t\t\t  filesaver = this\n\t\t\t\t, type = blob.type\n\t\t\t\t, blob_changed = false\n\t\t\t\t, object_url\n\t\t\t\t, target_view\n\t\t\t\t, dispatch_all = function() {\n\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\n\t\t\t\t}\n\t\t\t\t// on any filesys errors revert to saving with object URLs\n\t\t\t\t, fs_error = function() {\n\t\t\t\t\t// don't create more object URLs than needed\n\t\t\t\t\tif (blob_changed || !object_url) {\n\t\t\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\t\t}\n\t\t\t\t\tif (target_view) {\n\t\t\t\t\t\ttarget_view.location.href = object_url;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar new_tab = view.open(object_url, \"_blank\");\n\t\t\t\t\t\tif (new_tab == undefined && typeof safari !== \"undefined\") {\n\t\t\t\t\t\t\t//Apple do not allow window.open, see http://bit.ly/1kZffRI\n\t\t\t\t\t\t\tview.location.href = object_url\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t}\n\t\t\t\t, abortable = function(func) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tif (filesaver.readyState !== filesaver.DONE) {\n\t\t\t\t\t\t\treturn func.apply(this, arguments);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t, create_if_not_found = {create: true, exclusive: false}\n\t\t\t\t, slice\n\t\t\t;\n\t\t\tfilesaver.readyState = filesaver.INIT;\n\t\t\tif (!name) {\n\t\t\t\tname = \"download\";\n\t\t\t}\n\t\t\tif (can_use_save_link) {\n\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\tsave_link.href = object_url;\n\t\t\t\tsave_link.download = name;\n\t\t\t\tclick(save_link);\n\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\tdispatch_all();\n\t\t\t\trevoke(object_url);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Object and web filesystem URLs have a problem saving in Google Chrome when\n\t\t\t// viewed in a tab, so I force save with application/octet-stream\n\t\t\t// http://code.google.com/p/chromium/issues/detail?id=91158\n\t\t\t// Update: Google errantly closed 91158, I submitted it again:\n\t\t\t// https://code.google.com/p/chromium/issues/detail?id=389642\n\t\t\tif (view.chrome && type && type !== force_saveable_type) {\n\t\t\t\tslice = blob.slice || blob.webkitSlice;\n\t\t\t\tblob = slice.call(blob, 0, blob.size, force_saveable_type);\n\t\t\t\tblob_changed = true;\n\t\t\t}\n\t\t\t// Since I can't be sure that the guessed media type will trigger a download\n\t\t\t// in WebKit, I append .download to the filename.\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=65440\n\t\t\tif (webkit_req_fs && name !== \"download\") {\n\t\t\t\tname += \".download\";\n\t\t\t}\n\t\t\tif (type === force_saveable_type || webkit_req_fs) {\n\t\t\t\ttarget_view = view;\n\t\t\t}\n\t\t\tif (!req_fs) {\n\t\t\t\tfs_error();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfs_min_size += blob.size;\n\t\t\treq_fs(view.TEMPORARY, fs_min_size, abortable(function(fs) {\n\t\t\t\tfs.root.getDirectory(\"saved\", create_if_not_found, abortable(function(dir) {\n\t\t\t\t\tvar save = function() {\n\t\t\t\t\t\tdir.getFile(name, create_if_not_found, abortable(function(file) {\n\t\t\t\t\t\t\tfile.createWriter(abortable(function(writer) {\n\t\t\t\t\t\t\t\twriter.onwriteend = function(event) {\n\t\t\t\t\t\t\t\t\ttarget_view.location.href = file.toURL();\n\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\t\t\tdispatch(filesaver, \"writeend\", event);\n\t\t\t\t\t\t\t\t\trevoke(file);\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\twriter.onerror = function() {\n\t\t\t\t\t\t\t\t\tvar error = writer.error;\n\t\t\t\t\t\t\t\t\tif (error.code !== error.ABORT_ERR) {\n\t\t\t\t\t\t\t\t\t\tfs_error();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\"writestart progress write abort\".split(\" \").forEach(function(event) {\n\t\t\t\t\t\t\t\t\twriter[\"on\" + event] = filesaver[\"on\" + event];\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\twriter.write(blob);\n\t\t\t\t\t\t\t\tfilesaver.abort = function() {\n\t\t\t\t\t\t\t\t\twriter.abort();\n\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.WRITING;\n\t\t\t\t\t\t\t}), fs_error);\n\t\t\t\t\t\t}), fs_error);\n\t\t\t\t\t};\n\t\t\t\t\tdir.getFile(name, {create: false}, abortable(function(file) {\n\t\t\t\t\t\t// delete file if it already exists\n\t\t\t\t\t\tfile.remove();\n\t\t\t\t\t\tsave();\n\t\t\t\t\t}), abortable(function(ex) {\n\t\t\t\t\t\tif (ex.code === ex.NOT_FOUND_ERR) {\n\t\t\t\t\t\t\tsave();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfs_error();\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}), fs_error);\n\t\t\t}), fs_error);\n\t\t}\n\t\t, FS_proto = FileSaver.prototype\n\t\t, saveAs = function(blob, name) {\n\t\t\treturn new FileSaver(blob, name);\n\t\t}\n\t;\n\tFS_proto.abort = function() {\n\t\tvar filesaver = this;\n\t\tfilesaver.readyState = filesaver.DONE;\n\t\tdispatch(filesaver, \"abort\");\n\t};\n\tFS_proto.readyState = FS_proto.INIT = 0;\n\tFS_proto.WRITING = 1;\n\tFS_proto.DONE = 2;\n\n\tFS_proto.error =\n\tFS_proto.onwritestart =\n\tFS_proto.onprogress =\n\tFS_proto.onwrite =\n\tFS_proto.onabort =\n\tFS_proto.onerror =\n\tFS_proto.onwriteend =\n\t\tnull;\n\n\treturn saveAs;\n}(\n\t   typeof self !== \"undefined\" && self\n\t|| typeof window !== \"undefined\" && window\n\t|| this.content\n));\n// `self` is undefined in Firefox for Android content script context\n// while `this` is nsIContentFrameMessageManager\n// with an attribute `content` that corresponds to the window\n\nif (typeof module !== \"undefined\" && module !== null) {\n  module.exports = saveAs;\n} else if ((typeof define !== \"undefined\" && define !== null) && (define.amd != null)) {\n  define([], function() {\n    return saveAs;\n  });\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./bower_components/FileSaver/FileSaver.js\n ** module id = 34\n ** module chunks = 1\n **/","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/module.js\n ** module id = 35\n ** module chunks = 1\n **/","module.exports = function() { throw new Error(\"define cannot be used indirect\"); };\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/amd-define.js\n ** module id = 36\n ** module chunks = 1\n **/","module.exports = __webpack_amd_options__;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/amd-options.js\n ** module id = 37\n ** module chunks = 1\n **/","export default class EditorControls {\n  constructor(tweenTime, $timeline) {\n    this.tweenTime = tweenTime;\n    this.$timeline = $timeline;\n    this.timer = this.tweenTime.timer;\n    this.$time = this.$timeline.find('.control--time');\n    this.$time_end = this.$timeline.find('.control--time-end');\n    this.initControls();\n    this.$time_end.val(this.tweenTime.timer.getDuration());\n\n    $(document).keypress((e) => {\n      if (e.charCode == 32) {\n        // Space\n        this.playPause();\n      }\n    });\n  }\n\n  playPause() {\n    var $play_pause;\n    this.timer.toggle();\n    $play_pause = this.$timeline.find('.control--play-pause');\n    $play_pause.toggleClass('icon-pause', this.timer.is_playing);\n    $play_pause.toggleClass('icon-play', !this.timer.is_playing);\n  }\n\n  initControls() {\n    var $play_pause = this.$timeline.find('.control--play-pause');\n    $play_pause.click((e) => {\n      e.preventDefault();\n      this.playPause();\n    });\n    var $bt_first = this.$timeline.find('.control--first');\n    $bt_first.click((e) => {\n      e.preventDefault();\n      this.timer.seek([0]);\n    });\n    var $bt_last = this.$timeline.find('.control--last');\n    $bt_last.click((e) => {\n      e.preventDefault();\n      var total = this.tweenTime.getTotalDuration();\n      this.timer.seek([total * 1000]);\n    });\n    this.$time.change(() => {\n      var seconds = parseFloat(this.$time.val(), 10) * 1000;\n      this.timer.seek([seconds]);\n    });\n    this.$time_end.change(() => {\n      var seconds = parseFloat(this.$time_end.val(), 10);\n      this.timer.setDuration(seconds);\n    });\n  }\n\n  render(time, time_changed) {\n    if (time_changed) {\n      var seconds = time / 1000;\n      this.$time.val(seconds.toFixed(3));\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/EditorControls.js\n **/","let d3 = require('d3');\nlet Signals = require('js-signals');\nlet _ = require('lodash');\n\nexport default class SelectionManager {\n  constructor(tweenTime) {\n    this.tweenTime = tweenTime;\n    this.selection = [];\n    this.onSelect = new Signals.Signal();\n  }\n\n  select(item, addToSelection = false) {\n    this.addDataRelations();\n\n    if (!addToSelection) {\n      this.selection = [];\n    }\n    if (item instanceof Array) {\n      for (var i = 0; i < item.length; i++) {\n        var el = item[i];\n        this.selection.push(el);\n      }\n    }\n    else {\n      this.selection.push(item);\n    }\n\n    this.removeDuplicates();\n    this.highlightItems();\n    this.sortSelection();\n    this.onSelect.dispatch(this.selection, addToSelection);\n  }\n\n  getSelection() {\n    return this.selection;\n  }\n\n  removeDuplicates() {\n    var result = [];\n    for (var i = 0; i < this.selection.length; i++) {\n      var item = this.selection[i];\n      var found = false;\n      for (var j = 0; j < result.length; j++) {\n        var item2 = result[j];\n        if (_.isEqual(item, item2)) {\n          found = true;\n          break;\n        }\n      }\n      if (found === false) {\n        result.push(item);\n      }\n    }\n    this.selection = result;\n  }\n\n  removeItem(item) {\n    var index = this.selection.indexOf(item);\n    if (index > -1) {\n      this.selection.splice(index, 1);\n    }\n  }\n\n  sortSelection() {\n    var compare = function(a, b) {\n      if (!a.time || !b.time) {\n        return 0;\n      }\n      if (a.time < b.time) {\n        return -1;\n      }\n      if (a.time > b.time) {\n        return 1;\n      }\n      return 0;\n    };\n    this.selection = this.selection.sort(compare);\n  }\n\n  reset() {\n    this.selection = [];\n    this.highlightItems();\n    this.onSelect.dispatch(this.selection, false);\n  }\n\n  triggerSelect() {\n    this.onSelect.dispatch(this.selection, false);\n  }\n\n  addDataRelations() {\n    // We need to add some parent references in main data object.\n    // Add a _property reference to each keys.\n    // Add a _line property for each references.\n    var data = this.tweenTime.data;\n    for (var lineIndex = 0; lineIndex < data.length; lineIndex++) {\n      var line = data[lineIndex];\n      for (var propIndex = 0; propIndex < line.properties.length; propIndex++) {\n        var property = line.properties[propIndex];\n        property._line = line;\n        for (var keyIndex = 0; keyIndex < property.keys.length; keyIndex++) {\n          var key = property.keys[keyIndex];\n          key._property = property;\n        }\n      }\n    }\n  }\n\n  highlightItems() {\n    d3.selectAll('.bar--selected').classed('bar--selected', false);\n    d3.selectAll('.key--selected').classed('key--selected', false);\n\n    for (var i = 0; i < this.selection.length; i++) {\n      var data = this.selection[i];\n      if (data._dom) {\n        var d3item = d3.select(data._dom);\n        if (d3item.classed('bar')) {\n          d3item.classed('bar--selected', true);\n        }\n        else if (d3item.classed('key')) {\n          d3item.classed('key--selected', true);\n        }\n      }\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/SelectionManager.js\n **/","export default class Exporter {\n  constructor (editor) {\n    this.editor = editor;\n  }\n\n  getData() {\n    var tweenTime = this.editor.tweenTime;\n    var domain = this.editor.timeline.x.domain();\n    var domain_start = domain[0];\n    var domain_end = domain[1];\n    return {\n      settings: {\n        time: tweenTime.timer.getCurrentTime(),\n        duration: tweenTime.timer.getDuration(),\n        domain: [domain_start.getTime(), domain_end.getTime()]\n      },\n      data: tweenTime.data\n    };\n  }\n\n  getJSON () {\n    var options = this.editor.options;\n    var json_replacer = function(key, val) {\n      // Disable all private properies from TweenMax/TimelineMax\n      if (key.indexOf('_') === 0) {\n        return undefined;\n      }\n      if (options.json_replacer !== undefined) {\n        return options.json_replacer(key, val);\n      }\n      return val;\n    };\n\n    var data = this.getData();\n    return JSON.stringify(data, json_replacer, 2);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/Exporter.js\n **/","import 'jquery';\n\nexport default class UndoManager {\n  constructor(editor) {\n    this.editor = editor;\n    this.history_max = 100;\n    this.history = [];\n    this.current_index = 0;\n\n    // Add the initial state\n    this.addState();\n\n    $(document).keydown((e) => {\n      if (e.keyCode == 90) {\n        if (e.metaKey || e.ctrlKey) {\n          if (!e.shiftKey) {\n            // (command | ctrl) Z\n            this.undo();\n          }\n          else {\n            // (command | ctrl) shift Z\n            this.redo();\n          }\n        }\n      }\n    });\n  }\n\n  undo() {\n    // If there is no more history return\n    if (this.current_index <= 0) {\n      return false;\n    }\n    this.current_index -= 1;\n    this.setState(this.current_index);\n  }\n\n  redo() {\n    // Stop if there is no more things.\n    if (this.current_index >= this.history.length - 1) {\n      return false;\n    }\n    this.current_index += 1;\n    this.setState(this.current_index);\n  }\n\n  addState() {\n    var data = JSON.parse(this.editor.exporter.getJSON());\n\n    // if we did some undo before and then edit something,\n    // we want to remove all actions past the current index first.\n    if (this.current_index + 1 < this.history.length) {\n      this.history.splice(this.current_index + 1, this.history.length - 1);\n    }\n\n    this.history.push(data);\n\n    // Keep history to a max size by removing the first element if needed.\n    if (this.history.length > this.history_max) {\n      this.history.shift();\n    }\n\n    // Set the current index\n    this.current_index = this.history.length - 1;\n  }\n\n  setState(index) {\n    var state = this.history[index];\n    var data = state.data;\n    var tweenTime = this.editor.tweenTime;\n\n    // naively copy keys and values from previous state\n    for (var item_key = 0; item_key < data.length; item_key++) {\n      var item = data[item_key];\n      // if item is not defined copy it\n      if (!tweenTime.data[item_key]) {\n        tweenTime.data[item_key] = item;\n      }\n      else {\n        for (var prop_key = 0; prop_key < item.properties.length; prop_key++) {\n          var prop = item.properties[prop_key];\n          // if property is not defined copy it\n          if (!tweenTime.data[item_key].properties[prop_key]) {\n            tweenTime.data[item_key].properties[prop_key] = prop;\n          }\n          else {\n            // set property keys\n            var keys = tweenTime.data[item_key].properties[prop_key].keys;\n            for (var key_key = 0; key_key < prop.keys.length; key_key++) {\n              var key = prop.keys[key_key];\n              if (!keys[key_key]) {\n                keys[key_key] = key;\n              }\n              else {\n                keys[key_key].time = key.time;\n                keys[key_key].val = key.val;\n                keys[key_key].ease = key.ease;\n              }\n            }\n          }\n        }\n      }\n\n      tweenTime.data[item_key]._isDirty = true;\n    }\n    this.editor.render(false, true);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/UndoManager.js\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"timeline\\\">\");t.b(\"\\n\" + i);t.b(\"  <nav class=\\\"timeline__menu\\\">\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"menu-item\\\" data-action=\\\"export\\\">Export</a>\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\");t.b(\"\\n\" + i);t.b(\"  </nav>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"timeline__controls controls\\\">\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"control control--first icon-first\\\"></a>\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"control control--play-pause icon-play\\\"></a>\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"control control--last icon-last\\\"></a>\");t.b(\"\\n\" + i);t.b(\"    <input type=\\\"text\\\" class=\\\"control control--input control--time\\\" /> <span class=\\\"control__time-separator\\\">/</span> <input type=\\\"text\\\" class=\\\"control control--input control--time-end\\\" />\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"timeline__header\\\">\");t.b(\"\\n\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"timeline__main\\\">\");t.b(\"\\n\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"timeline\\\">\\n  <nav class=\\\"timeline__menu\\\">\\n    <a href=\\\"#\\\" class=\\\"menu-item\\\" data-action=\\\"export\\\">Export</a>\\n    <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\\n  </nav>\\n  <div class=\\\"timeline__controls controls\\\">\\n    <a href=\\\"#\\\" class=\\\"control control--first icon-first\\\"></a>\\n    <a href=\\\"#\\\" class=\\\"control control--play-pause icon-play\\\"></a>\\n    <a href=\\\"#\\\" class=\\\"control control--last icon-last\\\"></a>\\n    <input type=\\\"text\\\" class=\\\"control control--input control--time\\\" /> <span class=\\\"control__time-separator\\\">/</span> <input type=\\\"text\\\" class=\\\"control control--input control--time-end\\\" />\\n  </div>\\n  <div class=\\\"timeline__header\\\">\\n\\n  </div>\\n  <div class=\\\"timeline__main\\\">\\n\\n  </div>\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/timeline.tpl.html\n ** module id = 42\n ** module chunks = 1\n **/"],"sourceRoot":""}