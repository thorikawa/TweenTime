!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require(void 0),require("TweenMax"),require("lodash")):"function"==typeof define&&define.amd?define(["signals","TweenMax","lodash"],e):"object"==typeof exports?exports.Core=e(require("./signals"),require("TweenMax"),require("lodash")):(t.TweenTime=t.TweenTime||{},t.TweenTime.Core=e(t.signals,t.TweenMax,t._))}(this,function(t,e,i){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(1),o=n(s),l=i(2),u=n(l),c=i(4),h=n(c),d=i(6),p=function(){function t(e){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];r(this,t),this.data=e,this.timer=new u["default"](i),this.orchestrator=new h["default"](this.timer,this.data)}return a(t,[{key:"getItem",value:function(t){return t&&"object"==typeof t?t:d.find(this.data,function(e){return e.id==t})}},{key:"getProperty",value:function(t,e){return e=this.getItem(e),e?d.find(e.properties,function(e){return e.name==t}):!1}},{key:"getValues",value:function(t){return t=this.getItem(t),t?t.values:void 0}},{key:"getValue",value:function(t,e){var i=this.getValues(e);return i&&void 0!==i[t]?i[t]:void 0}},{key:"getKeyAt",value:function(t,e){return d.find(t.keys,function(t){return t.time==e})}},{key:"setValue",value:function(t,e){var i=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];i===!1&&(i=this.timer.getCurrentTime()/1e3);var n=this.getKeyAt(t,i);n?n.val=e:0===t.keys.length?t.val=e:(n={val:e,time:i,_property:t},t.keys.push(n),t.keys=o["default"].sortKeys(t.keys))}},{key:"getTotalDuration",value:function(){return this.orchestrator.getTotalDuration()}}]),t}();t.exports=p},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(){i(this,t)}return n(t,null,[{key:"formatMinutes",value:function(t){t/=1e3;var e=Math.floor(t/3600),i=Math.floor((t-3600*e)/60),n=t-60*i,r=n+"s";return i&&(r=i+"m "+r),e&&(r=e+"h "+r),r}},{key:"getClosestTime",value:function(t,e){var i=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],n=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],r=arguments.length<=4||void 0===arguments[4]?!1:arguments[4],a=arguments.length<=5||void 0===arguments[5]?.1:arguments[5];if(r){var s=r.getCurrentTime()/1e3;if(Math.abs(s-e)<=a)return s}if(i||n)for(var o=0;o<t.length;o++){var l=t[o];if(l.id!=i||n){if(Math.abs(l.start-e)<=a)return l.start;if(Math.abs(l.end-e)<=a)return l.end}for(var u=0;u<l.properties.length;u++){var c=l.properties[u];if(c.keys&&(l.id!=i||c.name!=n))for(var h=0;h<c.keys.length;h++){var d=c.keys[h];if(Math.abs(d.time-e)<=a)return d.time}}}return!1}},{key:"getPreviousKey",value:function(t,e){for(var i=!1,n=0;n<t.length;n++){var r=t[n];if(!(r.time<e))return i;i=r}return i}},{key:"sortKeys",value:function(t){var e=function(t,e){return t.time<e.time?-1:t.time>e.time?1:0};return t.sort(e)}},{key:"guid",value:function(){var t=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}]),t}();e["default"]=r,t.exports=e["default"]},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(3),s=function(){function t(){var e=this,i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];n(this,t),this.totalDuration=i.totalDuration||24e4,this.time=[0],this.is_playing=!1,this.last_timeStamp=-1,this.last_time=-1,this.updated=new a.Signal,this.statusChanged=new a.Signal,this.durationChanged=new a.Signal,this.seeked=new a.Signal,window.requestAnimationFrame(function(t){return e.update(t)})}return r(t,[{key:"getCurrentTime",value:function(){return this.time[0]}},{key:"getDuration",value:function(){return this.totalDuration/1e3}},{key:"setDuration",value:function(t){this.totalDuration=1e3*t,this.durationChanged.dispatch(t)}},{key:"play",value:function(){this.is_playing=!0,this.statusChanged.dispatch(this.is_playing)}},{key:"stop",value:function(){this.is_playing=!1,this.statusChanged.dispatch(this.is_playing)}},{key:"toggle",value:function(){this.is_playing=!this.is_playing,this.statusChanged.dispatch(this.is_playing)}},{key:"seek",value:function(t){this.time[0]=t[0],this.seeked.dispatch(this.time[0])}},{key:"update",value:function(t){var e=this;-1==this.last_timeStamp&&(this.last_timeStamp=t);var i=t-this.last_timeStamp;this.is_playing&&(this.time[0]+=i),this.time[0]>=this.totalDuration&&(this.time[0]=this.totalDuration,this.stop()),this.updated.dispatch(this.time[0]),this.last_timeStamp=t,this.last_time=this.time[0],window.requestAnimationFrame(function(t){return e.update(t)})}}]),t}();e["default"]=s,t.exports=e["default"]},function(e,i){e.exports=t},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(3),s=i(5),o=function(){function t(e,i){n(this,t),this.update=this.update.bind(this),this.timer=e,this.data=i,this.mainTimeline=new TimelineMax({paused:!0}),this.onUpdate=new a.Signal,this.timer.updated.add(this.update),this.update(0)}return r(t,[{key:"getTotalDuration",value:function(){return this.mainTimeline.totalDuration()}},{key:"getEasing",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];if(t&&t.ease){var e=t.ease.split(".");if(2==e.length&&window[e[0]]&&window[e[0]][e[1]])return window[e[0]][e[1]]}return Quad.easeOut}},{key:"initSpecialProperties",value:function(t){t._domHelper=document.createElement("div");for(var e=0;e<t.properties.length;e++){var i=t.properties[e];i.type&&"color"==i.type&&(i.css=!0),i.css&&(t._domHelper.style[i.name]=i.val)}}},{key:"initItemValues",value:function(t){t.values={};for(var e=0;e<t.properties.length;e++){var i=t.properties[e];i.keys.length&&(i.val=i.keys[0].val),t.values[i.name]=i.val}}},{key:"update",value:function(t){var e,i,n,r,a=t/1e3,o=!1;for(e=0;e<this.data.length;e++)if(i=this.data[e],i._domHelper||this.initSpecialProperties(i),i.values||this.initItemValues(i),i._timeline||(i._timeline=new TimelineMax,this.mainTimeline.add(i._timeline,0),i._isDirty=!0),i._isDirty&&(o=!0),i._timeline&&i._isDirty&&i.properties){for(i._isDirty=!1,r=0;r<i.properties.length;r++){n=i.properties[r],n._timeline?n._timeline.clear():(n._timeline=new TimelineMax,i._timeline.add(n._timeline,0));var l=n._timeline,u=n.name;if(n.keys.length){var c=i.values,h=n.keys[0],d=0;h&&(d=Math.min(-1,h.time-.1));var p=0,f={},m=this.getEasing();f.ease=m,n.css?(c=i._domHelper,f.css={},f.css[u]=h?h.val:n.val):f[u]=h?h.val:n.val;var v=s.to(c,p,f);l.add(v,d);for(var g=0;g<n.keys.length;g++){var y=n.keys[g];if(g<n.keys.length-1){var b=n.keys[g+1];p=b.time-y.time,f={},m=this.getEasing(b),f.ease=m,n.css?(f.css={},f.css[u]=b.val):f[u]=b.val,v=s.to(c,p,f),l.add(v,y.time)}}l.seek(a)}else i.values[n.name]=n.val}a>0?a-=1e-7:a+=1e-7}for(this.mainTimeline.seek(a),e=0;e<this.data.length;e++)for(i=this.data[e],r=0;r<i.properties.length;r++)n=i.properties[r],n.css&&n.keys.length&&(i.values[n.name]=i._domHelper.style[n.name]);o&&this.onUpdate.dispatch()}}]),t}();e["default"]=o,t.exports=e["default"]},function(t,i){t.exports=e},function(t,e){t.exports=i}])});
//# sourceMappingURL=TweenTime.Core.min.js.map